{"code":"(function(){(this||window).webpackJsonp.registerAbsMids({})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{\"./node_modules/arcgis-js-api/layers/ImageryLayer.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../PopupTemplate */ \"./node_modules/arcgis-js-api/PopupTemplate.js\"),__webpack_require__(/*! ../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../core/MultiOriginJSONSupport */ \"./node_modules/arcgis-js-api/core/MultiOriginJSONSupport.js\"),__webpack_require__(/*! ../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ./Layer */ \"./node_modules/arcgis-js-api/layers/Layer.js\"),__webpack_require__(/*! ./mixins/ArcGISImageService */ \"./node_modules/arcgis-js-api/layers/mixins/ArcGISImageService.js\"),__webpack_require__(/*! ./mixins/ArcGISService */ \"./node_modules/arcgis-js-api/layers/mixins/ArcGISService.js\"),__webpack_require__(/*! ./mixins/OperationalLayer */ \"./node_modules/arcgis-js-api/layers/mixins/OperationalLayer.js\"),__webpack_require__(/*! ./mixins/PortalLayer */ \"./node_modules/arcgis-js-api/layers/mixins/PortalLayer.js\"),__webpack_require__(/*! ./mixins/RefreshableLayer */ \"./node_modules/arcgis-js-api/layers/mixins/RefreshableLayer.js\"),__webpack_require__(/*! ./mixins/ScaleRangeLayer */ \"./node_modules/arcgis-js-api/layers/mixins/ScaleRangeLayer.js\"),__webpack_require__(/*! ./mixins/TemporalLayer */ \"./node_modules/arcgis-js-api/layers/mixins/TemporalLayer.js\"),__webpack_require__(/*! ./support/commonProperties */ \"./node_modules/arcgis-js-api/layers/support/commonProperties.js\"),__webpack_require__(/*! ../support/popupUtils */ \"./node_modules/arcgis-js-api/support/popupUtils.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,r,t,a,o,i,p,n,s,l,c,d,y,u,m,v,f,g){return function(e){function r(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var a=e.apply(this,r)||this;return a.legendEnabled=!0,a.isReference=null,a.operationalLayerType=\"ArcGISImageServiceLayer\",a.popupEnabled=!0,a.popupTemplate=null,a.type=\"imagery\",a}return t.__extends(r,e),r.prototype.normalizeCtorArgs=function(e,r){return\"string\"==typeof e?t.__assign({url:e},r):e},r.prototype.load=function(e){var r=this,t=o.isSome(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Image Service\"]},e).then((function(){return r._fetchService(t)}),(function(){return r._fetchService(t)}))),p.resolve(this)},Object.defineProperty(r.prototype,\"defaultPopupTemplate\",{get:function(){return this.createPopupTemplate()},enumerable:!0,configurable:!0}),r.prototype.createPopupTemplate=function(e){var r=this.rasterFields,a=this.title,o=new Set,i=!1,p=!1;this.capabilities&&(p=(i=this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0)&&(\"esriImageServiceDataTypeVector-UV\"===this.serviceDataType||\"esriImageServiceDataTypeVector-MagDir\"===this.serviceDataType));var n=new Set;i&&(n.add(\"raster.itempixelvalue\"),p&&n.add(\"raster.magnitude\").add(\"raster.direction\"));for(var s=0,l=r;s<l.length;s++){var c=l[s],d=c.name.toLowerCase();n.has(d)||d.indexOf(\"raster.servicepixelvalue.\")>-1||o.add(c.name)}return g.createPopupTemplate({fields:r,title:a},t.__assign(t.__assign({},e),{visibleFieldNames:o}))},r.prototype.redraw=function(){this.emit(\"redraw\")},t.__decorate([n.property(f.legendEnabled)],r.prototype,\"legendEnabled\",void 0),t.__decorate([n.property({type:[\"show\",\"hide\"]})],r.prototype,\"listMode\",void 0),t.__decorate([n.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],r.prototype,\"isReference\",void 0),t.__decorate([n.property({type:[\"ArcGISImageServiceLayer\"]})],r.prototype,\"operationalLayerType\",void 0),t.__decorate([n.property(f.popupEnabled)],r.prototype,\"popupEnabled\",void 0),t.__decorate([n.property({type:a,json:{read:{source:\"popupInfo\"},write:{target:\"popupInfo\"}}})],r.prototype,\"popupTemplate\",void 0),t.__decorate([n.property({readOnly:!0,dependsOn:[\"fields\",\"title\"]})],r.prototype,\"defaultPopupTemplate\",null),t.__decorate([n.property({readOnly:!0,json:{read:!1}})],r.prototype,\"type\",void 0),r=t.__decorate([n.subclass(\"esri.layers.ImageryLayer\")],r)}(v.TemporalLayer(u.RefreshableLayer(m.ScaleRangeLayer(d.OperationalLayer(y.PortalLayer(l.ArcGISImageService(c.ArcGISService(i.MultiOriginJSONMixin(s)))))))))}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/ImageryLayer.js?')},\"./node_modules/arcgis-js-api/layers/mixins/ArcGISImageService.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../geometry */ \"./node_modules/arcgis-js-api/geometry.js\"),__webpack_require__(/*! ../../Graphic */ \"./node_modules/arcgis-js-api/Graphic.js\"),__webpack_require__(/*! ../../rasterRenderers */ \"./node_modules/arcgis-js-api/rasterRenderers.js\"),__webpack_require__(/*! ../../request */ \"./node_modules/arcgis-js-api/request.js\"),__webpack_require__(/*! ../../core/Error */ \"./node_modules/arcgis-js-api/core/Error.js\"),__webpack_require__(/*! ../../core/jsonMap */ \"./node_modules/arcgis-js-api/core/jsonMap.js\"),__webpack_require__(/*! ../../core/lang */ \"./node_modules/arcgis-js-api/core/lang.js\"),__webpack_require__(/*! ../../core/Logger */ \"./node_modules/arcgis-js-api/core/Logger.js\"),__webpack_require__(/*! ../../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../core/urlUtils */ \"./node_modules/arcgis-js-api/core/urlUtils.js\"),__webpack_require__(/*! ../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ../../core/accessorSupport/ensureType */ \"./node_modules/arcgis-js-api/core/accessorSupport/ensureType.js\"),__webpack_require__(/*! ../support/commonProperties */ \"./node_modules/arcgis-js-api/layers/support/commonProperties.js\"),__webpack_require__(/*! ../support/DimensionalDefinition */ \"./node_modules/arcgis-js-api/layers/support/DimensionalDefinition.js\"),__webpack_require__(/*! ../support/ExportImageServiceParameters */ \"./node_modules/arcgis-js-api/layers/support/ExportImageServiceParameters.js\"),__webpack_require__(/*! ../support/Field */ \"./node_modules/arcgis-js-api/layers/support/Field.js\"),__webpack_require__(/*! ../support/FieldsIndex */ \"./node_modules/arcgis-js-api/layers/support/FieldsIndex.js\"),__webpack_require__(/*! ../support/imageryRendererUtils */ \"./node_modules/arcgis-js-api/layers/support/imageryRendererUtils.js\"),__webpack_require__(/*! ../support/MosaicRule */ \"./node_modules/arcgis-js-api/layers/support/MosaicRule.js\"),__webpack_require__(/*! ../support/PixelBlock */ \"./node_modules/arcgis-js-api/layers/support/PixelBlock.js\"),__webpack_require__(/*! ../support/RasterFunction */ \"./node_modules/arcgis-js-api/layers/support/RasterFunction.js\"),__webpack_require__(/*! ../support/RasterInfo */ \"./node_modules/arcgis-js-api/layers/support/RasterInfo.js\"),__webpack_require__(/*! ../support/RasterJobHandler */ \"./node_modules/arcgis-js-api/layers/support/RasterJobHandler.js\"),__webpack_require__(/*! ../support/rasterFormats/RasterCodec */ \"./node_modules/arcgis-js-api/layers/support/rasterFormats/RasterCodec.js\"),__webpack_require__(/*! ../../renderers/support/RasterSymbolizer */ \"./node_modules/arcgis-js-api/renderers/support/RasterSymbolizer.js\"),__webpack_require__(/*! ../../tasks/ImageServiceIdentifyTask */ \"./node_modules/arcgis-js-api/tasks/ImageServiceIdentifyTask.js\"),__webpack_require__(/*! ../../tasks/QueryTask */ \"./node_modules/arcgis-js-api/tasks/QueryTask.js\"),__webpack_require__(/*! ../../tasks/support/FeatureSet */ \"./node_modules/arcgis-js-api/tasks/support/FeatureSet.js\"),__webpack_require__(/*! ../../tasks/support/ImageServiceIdentifyParameters */ \"./node_modules/arcgis-js-api/tasks/support/ImageServiceIdentifyParameters.js\"),__webpack_require__(/*! ../../tasks/support/Query */ \"./node_modules/arcgis-js-api/tasks/support/Query.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,r,i,n,a,o,s,l,u,p,c,d,f,h,m,y,g,_,v,R,b,x,I,S,w,O,P,N,F,T,D,C,J){Object.defineProperty(t,\"__esModule\",{value:!0});var V=p.getLogger(\"esri.layers.mixins.ArcGISImageService\"),M=l.strict()({RSP_NearestNeighbor:\"nearest\",RSP_BilinearInterpolation:\"bilinear\",RSP_CubicConvolution:\"cubic\",RSP_Majority:\"majority\"}),j=l.strict()({esriNoDataMatchAny:\"any\",esriNoDataMatchAll:\"all\"}),z=l.strict()({U1:\"u1\",U2:\"u2\",U4:\"u4\",U8:\"u8\",S8:\"s8\",U16:\"u16\",S16:\"s16\",U32:\"u32\",S32:\"s32\",F32:\"f32\",F64:\"f64\",C64:\"c64\",C128:\"c128\",UNKNOWN:\"unknown\"});t.ArcGISImageService=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._functionRasterInfos={},t._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},t._symbolizer=null,t._defaultServiceMosaicRule=null,t.rasterAttributeTableFieldPrefix=\"Raster.\",t.adjustAspectRatio=null,t.bandCount=null,t.bandIds=void 0,t.capabilities=null,t.compressionQuality=void 0,t.compressionTolerance=.01,t.copyright=null,t.definitionExpression=null,t.exportImageServiceParameters=null,t.rasterInfo=null,t.fields=null,t.fullExtent=null,t.hasMultidimensions=!1,t.imageMaxHeight=4100,t.imageMaxWidth=4100,t.interpolation=void 0,t.multidimensionalInfo=null,t.noData=null,t.noDataInterpretation=void 0,t.objectIdField=null,t.pixelSizeX=null,t.pixelSizeY=null,t.pixelFilter=null,t.raster=void 0,t.viewId=void 0,t.renderer=null,t.rasterAttributeTable=null,t.rasterFunctionInfos=null,t.serviceDataType=null,t.spatialReference=null,t.pixelType=null,t.serviceRasterInfo=null,t.sourceJSON=null,t.url=null,t.version=null,t}return r.__extends(t,e),t.prototype.initialize=function(){this._set(\"exportImageServiceParameters\",new _.ExportImageServiceParameters({layer:this}))},t.prototype.readDefaultServiceMosaicRule=function(e,t){return x.fromJSON(t)},Object.defineProperty(t.prototype,\"rasterFunctionNamesIndex\",{get:function(){var e=new Map;return!this.rasterFunctionInfos||this.rasterFunctionInfos.length<1?e:(this.rasterFunctionInfos.forEach((function(t){e.set(t.name.toLowerCase().replace(/ /gi,\"_\"),t.name)})),e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"queryTask\",{get:function(){return new T({url:this.url})},enumerable:!0,configurable:!0}),t.prototype.readBandIds=function(e,t){if(Array.isArray(e)&&e.length>0&&e.every((function(e){return\"number\"==typeof e})))return e},t.prototype.readCapabilities=function(e,t){return this._readCapabilities(t)},t.prototype.writeCompressionQuality=function(e,t,r){null!=e&&\"lerc\"!==this.format&&(t[r]=e)},t.prototype.writeCompressionTolerance=function(e,t,r){\"lerc\"===this.format&&null!=e&&(t[r]=e)},Object.defineProperty(t.prototype,\"fieldsIndex\",{get:function(){return this.fields?new R(this.fields):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"format\",{get:function(){return this._get(\"format\")||(null!=this.pixelFilter?\"lerc\":\"jpgpng\")},set:function(e){e&&[\"png\",\"png8\",\"png24\",\"png32\",\"jpg\",\"bmp\",\"jpgpng\",\"lerc\",\"tiff\"].indexOf(e.toLowerCase())>-1&&this._set(\"format\",e.toLowerCase())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"mosaicRule\",{set:function(e){var t=e;t&&t.mosaicMethod&&(t=x.fromJSON(r.__assign(r.__assign({},t.toJSON()),{mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation}))),this._set(\"mosaicRule\",t)},enumerable:!0,configurable:!0}),t.prototype.readMosaicRule=function(e,t){return x.fromJSON(e||t.mosaicRule||t)},t.prototype.writeMosaicRule=function(e,t,r){var i=this.mosaicRule,n=this.definitionExpression;i?n&&n!==i.where&&((i=i.clone()).where=n):n&&(i=new x({where:n})),this._isValidCustomizedMosaicRule(i)&&(t[r]=i.toJSON())},t.prototype.writeNoData=function(e,t,r){null!=e&&\"number\"==typeof e&&(t[r]=e)},t.prototype.readObjectIdField=function(e,t){if(!e){var r=t.fields.filter((function(e){return\"esriFieldTypeOID\"===e.type||\"oid\"===e.type}));e=r&&r[0]&&r[0].name}return e},Object.defineProperty(t.prototype,\"parsedUrl\",{get:function(){return this.url?f.urlToObject(this.url):null},enumerable:!0,configurable:!0}),t.prototype.readRenderer=function(e,t,r){var i=t&&t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.renderer,n=a.read(i,r)||void 0;if(null!=n)return b.isSupportedRendererType(n)||V.warn(\"ArcGISImageService\",\"Imagery layer doesn\\'t support given renderer type.\"),n},Object.defineProperty(t.prototype,\"rasterFields\",{get:function(){var e=this.rasterAttributeTableFieldPrefix||\"Raster.\",t=new v({name:\"Raster.ItemPixelValue\",alias:\"Item Pixel Value\",domain:null,editable:!1,length:50,type:\"string\"}),r=new v({name:\"Raster.ServicePixelValue\",alias:\"Service Pixel Value\",domain:null,editable:!1,length:50,type:\"string\"}),i=new v({name:\"Raster.ServicePixelValue.Raw\",alias:\"Raw Service Pixel Value\",domain:null,editable:!1,length:50,type:\"string\"}),n=this.fields?u.clone(this.fields):[];n.push(r),this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0&&n.push(t),this.version>=10.4&&this.rasterFunctionInfos&&this.rasterFunctionInfos.some((function(e){return\"none\"===e.name.toLowerCase()}))&&n.push(i),this.rasterFunctionInfos&&this.rasterFunctionInfos.filter((function(e){return\"none\"!==e.name.toLowerCase()})).forEach((function(e){n.push(new v({name:\"Raster.ServicePixelValue.\"+e.name,alias:e.name,domain:null,editable:!1,length:50,type:\"string\"}))})),null==this.pixelFilter||\"esriImageServiceDataTypeVector-UV\"!==this.serviceDataType&&\"esriImageServiceDataTypeVector-MagDir\"!==this.serviceDataType||(n.push(new v({name:\"Raster.Magnitude\",alias:\"Magnitude\",domain:null,editable:!1,type:\"double\"})),n.push(new v({name:\"Raster.Direction\",alias:\"Direction\",domain:null,editable:!1,type:\"double\"})));var a=this.rasterInfo.attributeTable&&this.rasterInfo.attributeTable.fields||null;if(a&&a.length>0){var o=a.filter((function(e){return\"esriFieldTypeOID\"!==e.type&&\"value\"!==e.name.toLowerCase()})).map((function(t){var r=u.clone(t);return r.name=e+t.name,r}));n=n.concat(o)}return n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"renderingRule\",{set:function(e){var t=e;t&&t.rasterFunction&&(t=S.fromJSON(r.__assign(r.__assign({},t.toJSON()),{rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments}))),this._set(\"renderingRule\",t)},enumerable:!0,configurable:!0}),t.prototype.readRenderingRule=function(e,t){var r=t.rasterFunctionInfos;return t.renderingRule||r&&r.length&&\"None\"!==r[0].name?S.fromJSON(t.renderingRule||{rasterFunctionInfos:t.rasterFunctionInfos}):null},t.prototype.writeRenderingRule=function(e,t,r){this._isRFTJson(e)||(t[r]=e.toJSON())},t.prototype.readSpatialReference=function(e,t){var r=e||t.extent.spatialReference;return r?i.SpatialReference.fromJSON(r):null},t.prototype.readPixelType=function(e){return z.fromJSON(e)||e},t.prototype.writePixelType=function(e,t,r){(c.isNone(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)&&(t[r]=z.toJSON(e))},t.prototype.readVersion=function(e,t){var r=t.currentVersion;return r||(r=t.hasOwnProperty(\"fields\")||t.hasOwnProperty(\"timeInfo\")?10:9.3),r},t.prototype.applyFilter=function(e){var t=e;return this.pixelFilter&&(t=this._clonePixelData(e),this.pixelFilter(t)),t},t.prototype.applyRenderer=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i,n,a,o,s;return r.__generator(this,(function(l){switch(l.label){case 0:return i=e,this._isPicture()||!this.renderer||!this._symbolizer||this.pixelFilter?[3,5]:(n=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer.toJSON()),a=this._rasterJobHandler.instance,o=this.bandIds,a?n?(this._symbolizer.bind(),[4,a.updateSymbolizer(this._symbolizer,t)]):[3,2]:[3,4]);case 1:l.sent(),this._cachedRendererJson=this.renderer.toJSON(),l.label=2;case 2:return[4,a.symbolize(r.__assign({bandIds:o},e),t)];case 3:return s=l.sent(),i={extent:e.extent,pixelBlock:s},[3,5];case 4:i={extent:e.extent,pixelBlock:this._symbolizer.symbolize(r.__assign({bandIds:o},e))},l.label=5;case 5:return[2,i]}}))}))},t.prototype.destroy=function(){this._shutdownJobHandler()},t.prototype.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++},t.prototype.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()},t.prototype.fetchImage=function(e,t,r,i){var n=this;if(void 0===i&&(i={}),null==e||null==t||null==r)return d.reject(new s(\"imagery-layer:fetch-image\",\"Insufficient parameters for requesting an image. A valid extent, width and height values are required.\"));var a=this.renderer||this._symbolizer?this.generateRasterInfo(this.renderingRule,{signal:i.signal}):null;return d.when(a).then((function(a){a&&(n.rasterInfo=a);var o={imageServiceParameters:n.getExportImageServiceParameters(e,t,r,i.timeExtent),imageProps:{extent:e,width:t,height:r,format:n.format},requestAsImageElement:i.requestAsImageElement&&!n.pixelFilter||!1,signal:i.signal};return n._requestArrayBuffer(o)}))},t.prototype.fetchKeyProperties=function(e){var t=e&&e.renderingRule&&e.renderingRule.toJSON();return o(this.parsedUrl.path+\"/keyProperties\",{query:this._getQueryParams({renderingRule:this.version>=10.3&&t?JSON.stringify(t):null})}).then((function(e){return e.data}))},t.prototype.fetchRasterAttributeTable=function(e){var t=e&&e.renderingRule&&e.renderingRule.toJSON();return this.version<10.1?d.reject(new s(\"#fetchRasterAttributeTable()\",\"Failed to get rasterAttributeTable\")):o(this.parsedUrl.path+\"/rasterAttributeTable\",{query:this._getQueryParams({renderingRule:this.version>=10.3&&t?JSON.stringify(t):null})}).then((function(e){return D.fromJSON(e.data)}))},t.prototype.getCatalogItemRasterInfo=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,a,s,l,u;return r.__generator(this,(function(p){switch(p.label){case 0:return n=o(this.parsedUrl.path+\"/\"+e+\"/info\",r.__assign({query:this._getQueryParams()},t)).then((function(e){return e.data})),a=o(this.parsedUrl.path+\"/\"+e+\"/info/keyProperties\",r.__assign({query:this._getQueryParams()},t)).then((function(e){return e.data})).catch((function(){})),[4,d.all([n,a])];case 1:return(s=p.sent())[0]?(l=i.Extent.fromJSON(s[0].extent),u=s[0].statistics?s[0].statistics.map((function(e){return{min:e[0],max:e[1],avg:e[2],stddev:e[3]}})):null,[2,new w({bandCount:s[0].bandCount,extent:l,spatialReference:l.sr,pixelSize:new i.Point({x:s[0].pixelSizeX,y:s[0].pixelSizeY,spatialReference:l.sr}),pixelType:s[0].pixelType.toLowerCase(),statistics:u,histograms:s[0].histograms,keyProperties:s[1]})]):[2,void 0]}}))}))},t.prototype.getCatalogItemICSInfo=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,a,s,l,u,p,c,f,h,m,y,g,_,v,R,b,x,I,S,w,O,P,N,F,T,D,C,J,V,M;return r.__generator(this,(function(j){switch(j.label){case 0:return[4,o(this.parsedUrl.path+\"/\"+e+\"/info/ics\",r.__assign({query:this._getQueryParams()},t))];case 1:if(n=j.sent().data,!(a=n&&n.ics))return[2,void 0];s=null,j.label=2;case 2:return j.trys.push([2,4,,5]),[4,o(this.parsedUrl.path+\"/\"+e+\"/info\",r.__assign({query:this._getQueryParams()},t))];case 3:return l=j.sent(),s=l.data.extent,[3,5];case 4:return j.sent(),[3,5];case 5:if(!s||!s.spatialReference)return[2,{ics:a,icsToPixelTransform:null,icsExtent:null,northDirection:null}];for(u=this.version>=10.7?o(this.parsedUrl.path+\"/\"+e+\"/info/icstopixel\",r.__assign({query:this._getQueryParams()},t)).then((function(e){return e.data})).catch((function(){return{}})):{},p=s.spatialReference,c={geometries:JSON.stringify({geometryType:\"esriGeometryEnvelope\",geometries:[s]}),inSR:p.wkid||p,outSR:\"0:\"+e},f=o(this.parsedUrl.path+\"/project\",r.__assign({query:this._getQueryParams(c)},t)).then((function(e){return e.data})).catch((function(){return{}})),h=5,m=(s.xmin+s.xmax)/2,y=(s.ymax-s.ymin)/(h+1),g=s.ymin+y,_=[],D=0;D<h;D++)_.push({x:m,y:g+y*D});return v={geometries:JSON.stringify({geometryType:\"esriGeometryPoint\",geometries:_}),inSR:p.wkid||p,outSR:\"0:\"+e},R=o(this.parsedUrl.path+\"/project\",r.__assign({query:this._getQueryParams(v)},t)).then((function(e){return e.data})).catch((function(){return{}})),[4,d.all([u,f,R])];case 6:if(b=j.sent(),null==(x=b[0].ipxf)&&(I=a.geodataXform&&a.geodataXform.xf_0)&&\"topup\"===I.name.toLowerCase()&&(x={affine:{name:\"ics [sensor: Frame] to pixel (column, row) transformation\",coefficients:I.coefficients,cellsizeRatio:0,type:\"GeometricXform\"}}),(S=i.Extent.fromJSON(b[1]&&b[1].geometries&&b[1].geometries[0]))&&(S.spatialReference=new i.SpatialReference({wkid:0,imageCoordinateSystem:a})),w=b[2].geometries?b[2].geometries.filter((function(e){return null!=e})):[],(O=w.length)<3)return[2,{ics:a,icsToPixelTransform:x,icsExtent:S,northDirection:null}];for(P=0,N=0,F=0,T=0,D=0;D<O;D++)P+=w[D].x,N+=w[D].y,F+=w[D].x*w[D].x,T+=w[D].x*w[D].y;return C=(O*T-P*N)/(O*F-P*P),J=0,V=w[h-1].x>w[0].x,M=w[h-1].y>w[0].y,C===1/0?J=M?90:270:0===C?J=V?0:180:C>0?J=V?180*Math.atan(C)/Math.PI:180*Math.atan(C)/Math.PI+180:C<0&&(J=M?180+180*Math.atan(C)/Math.PI:360+180*Math.atan(C)/Math.PI),[2,{ics:a,icsToPixelTransform:x,icsExtent:S,northDirection:J}]}}))}))},t.prototype.generateRasterInfo=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i,n;return r.__generator(this,(function(r){switch(r.label){case 0:if((!e||\"none\"===e.functionName.toLowerCase())&&c.isSome(this.serviceRasterInfo))return[2,this.serviceRasterInfo];if(i=function(e){if(!e)return null;var t=JSON.stringify(e).match(/\"rasterFunction\":\"(.*?\")/gi),r=null==t?void 0:t.map((function(e){return e.replace(\\'\"rasterFunction\":\"\\',\"\").replace(\\'\"\\',\"\")}));return r?r.join(\"/\"):null}(e),this._functionRasterInfos[i])return[2,this._functionRasterInfos[i]];n=this._generateRasterInfo(e,t),this._functionRasterInfos[i]=n,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n];case 2:return[2,r.sent()];case 3:return r.sent(),this._functionRasterInfos[i]=null,[2,null];case 4:return[2]}}))}))},t.prototype.getExportImageServiceParameters=function(e,t,i,n){var a,o=(e=e.clone().shiftCentralMeridian()).spatialReference;if(o.imageCoordinateSystem){var s=o.imageCoordinateSystem,l=s.id,u=s.referenceServiceName;a=null!=l?u?this.parsedUrl.path.toLowerCase().indexOf(\"/\"+u.toLowerCase()+\"/\")>-1?\"0:\"+l:JSON.stringify({icsid:l,icsns:u}):\"0:\"+l:JSON.stringify({ics:o.imageCoordinateSystem})}else a=o.wkid||JSON.stringify(o.toJSON());c.isSome(this.serviceRasterInfo)&&this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);var p=this.exportImageServiceParameters.toJSON(),d=p.bandIds,f=p.noData,h=p.mosaicRule,m=p.renderingRule;d instanceof Array&&d.length>0&&(p.bandIds=d.join(\",\")),f instanceof Array&&f.length>0&&(p.noData=f.join(\",\"));var y=this.timeInfo;h&&h.multidimensionalDefinition&&n&&y&&y.startField&&(h.multidimensionalDefinition=h.multidimensionalDefinition.filter((function(e){return e.dimensionName!==y.startField}))),p.mosaicRule=h&&JSON.stringify(h),p.renderingRule=m&&JSON.stringify(m);var g={};if(n){var _=n.toJSON(),v=_.start,R=_.end;v&&R&&v===R?g.time=\"\"+v:null==v&&null==R||(g.time=(null==v?\"null\":v)+\",\"+(null==R?\"null\":R))}return r.__assign(r.__assign({bbox:e.xmin+\",\"+e.ymin+\",\"+e.xmax+\",\"+e.ymax,bboxSR:a,imageSR:a,size:t+\",\"+i},p),g)},t.prototype.queryRasters=function(e){return this.queryTask.execute(e)},t.prototype.queryVisibleRasters=function(e,t){var r=this;if(!e)return d.reject(new s(\"imagery-layer: query-visible-rasters\",\"missing query parameter\"));var n=t||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1},a=n.pixelSize,o=n.returnDomainValues,l=n.returnTopmostRaster,u=n.showNoDataRecords,p=!1,c=null,f=null,h=this.rasterFunctionNamesIndex;if(e.outFields&&(p=e.outFields.some((function(e){return-1===e.toLowerCase().indexOf(\"raster.servicepixelvalue\")})),this.version>=10.4)){var m=e.outFields.filter((function(e){return e.toLowerCase().indexOf(\"raster.servicepixelvalue\")>-1&&e.length>\"raster.servicepixelvalue\".length})).map((function(e){var t=e.slice(\"raster.servicepixelvalue\".length+1);return[r._updateRenderingRulesFunctionName(t,h),t]}));c=m.map((function(e){return new S({functionName:e[0]})})),f=m.map((function(e){return e[1]})),0===c.length?this.renderingRule?(c.push(this.renderingRule),f.push(this.renderingRule.functionName)):c=null:this.renderingRule&&!c.some((function(e){return e.functionName===r.renderingRule.functionName}))&&(c.push(this.renderingRule),f.push(this.renderingRule.functionName))}var y=!e.outSpatialReference||e.outSpatialReference.equals(this.spatialReference),g=this._getQueryParams({geometry:e.geometry,timeExtent:e.timeExtent,mosaicRule:this.exportImageServiceParameters.mosaicRule,renderingRule:this.version<10.4?this.renderingRule:null,renderingRules:c,pixelSize:a,returnCatalogItems:p,returnGeometry:y,maxItemCount:l?1:null});delete g.f;var _=new C(g),v=new F({url:this.url}),R=this.generateRasterInfo(this.renderingRule);return d.create((function(t){R.then((function(){v.execute(_).then((function(n){var a=e.outFields;if(p&&!y&&n.catalogItems&&n.catalogItems.features&&n.catalogItems.features.length>0){var l=r.objectIdField||\"ObjectId\",c=n.catalogItems.features,d=c.map((function(e){return e.attributes&&e.attributes[l]})),h=new J({objectIds:d,returnGeometry:!0,outSpatialReference:e.outSpatialReference,outFields:[l]});return r.queryRasters(h).then((function(s){s&&s.features&&s.features.length>0&&s.features.forEach((function(t){c.forEach((function(r){r.attributes[l]===t.attributes[l]&&(r.geometry=new i.Polygon(t.geometry),r.geometry.spatialReference=e.outSpatialReference)}))})),t(r._processVisibleRastersResponse(n,{returnDomainValues:o,templateRRFunctionNames:f,showNoDataRecords:u,templateFields:a}))})).catch((function(){throw new s(\"imagery-layer:query-visible-rasters\",\"encountered error when querying visible rasters geometry\")}))}t(r._processVisibleRastersResponse(n,{returnDomainValues:o,templateRRFunctionNames:f,showNoDataRecords:u,templateFields:a}))})).catch((function(){throw new s(\"imagery-layer:query-visible-rasters\",\"encountered error when querying visible rasters\")}))}))}))},t.prototype._fetchService=function(e){var t;return r.__awaiter(this,void 0,void 0,(function(){var i,n,a,l,u,p,f=this;return r.__generator(this,(function(r){switch(r.label){case 0:return(i=this.sourceJSON)?[3,2]:[4,o(this.parsedUrl.path,{query:this._getQueryParams(),signal:e})];case 1:n=r.sent(),a=n.data,l=n.ssl,i=a,this.sourceJSON=i,l&&(this.url=this.url.replace(/^http:/i,\"https:\")),r.label=2;case 2:if((null===(t=i.capabilities)||void 0===t?void 0:t.toLowerCase().split(\",\").map((function(e){return e.trim()})).indexOf(\"tilesonly\"))>-1)throw new s(\"imagery-layer:fetch-metadata\",\"use ImageryTileLayer to open tiles-only image services\");return this.read(i,{origin:\"service\",url:this.parsedUrl}),c.isSome(this.serviceRasterInfo)&&!this.rasterInfo&&(this.rasterInfo=this.serviceRasterInfo),u=c.isSome(this.serviceRasterInfo)?d.resolve(this.serviceRasterInfo):this._fetchAuxiliaryRasterInfo({serviceInfo:i,signal:e}).then((function(e){return f._set(\"serviceRasterInfo\",e),e})),p=this.renderingRule&&\"none\"!==this.renderingRule.functionName.toLowerCase()?this.generateRasterInfo(this.renderingRule,{signal:e}):null,[2,d.all([u,p]).then((function(e){e[1]?f._set(\"rasterInfo\",e[1]):f._set(\"rasterInfo\",e[0]),f._configDefaultRenderer(),f.watch(\"renderer\",(function(){return f._configDefaultRenderer()})),f.watch(\"renderingRule\",(function(e){(f.renderer||f._symbolizer||f.popupEnabled&&f.popupTemplate)&&f.generateRasterInfo(e).then((function(e){e&&(f.rasterInfo=e)}))}));var t=c.isSome(f.serviceRasterInfo)&&f.serviceRasterInfo.multidimensionalInfo;t&&f._updateMultidimensionalDefinition(t)}))]}}))}))},t.prototype._initJobHandler=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t=this;return r.__generator(this,(function(r){switch(r.label){case 0:return null!=this._rasterJobHandler.connectionPromise?[2,this._rasterJobHandler.connectionPromise]:(e=new O,this._rasterJobHandler.connectionPromise=e.initialize().then((function(){t._rasterJobHandler.instance=e}),(function(){return null})),[4,this._rasterJobHandler.connectionPromise]);case 1:return r.sent(),[2]}}))}))},t.prototype._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0},t.prototype._isPicture=function(){return!this.format||this.format.indexOf(\"jpg\")>-1||this.format.indexOf(\"png\")>-1},t.prototype._configDefaultRenderer=function(){if(!this._isPicture()&&!this.pixelFilter){if(!this.bandIds&&this.rasterInfo.bandCount>=3){var e=b.getDefaultBandCombination(this.rasterInfo);!e||3===this.rasterInfo.bandCount&&0===e[0]&&1===e[1]&&2===e[2]||(this.bandIds=e)}this.renderer||(this.renderer=b.createDefaultRenderer(this.rasterInfo,this.bandIds)),this._symbolizer?(this._symbolizer.renderer=this.renderer,this._symbolizer.rasterInfo=this.rasterInfo):this._symbolizer=new N({renderer:this.renderer,rasterInfo:this.rasterInfo}),this._symbolizer.bind()||(this._symbolizer=null)}},t.prototype._clonePixelData=function(e){return null==e?e:{extent:e.extent&&e.extent.clone(),pixelBlock:e.pixelBlock&&e.pixelBlock.clone()}},t.prototype._getQueryParams=function(e){var t=this.raster,i=this.viewId;return r.__assign({raster:t,viewId:i,f:\"json\"},e)},t.prototype._decodePixelBlock=function(e,t,r){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:e,options:t}):P.decode(e,t,r)},t.prototype._fetchAuxiliaryRasterInfo=function(e){var t=e&&e.serviceInfo;if(!t)return d.reject(new s(\"imagery-layer:fetch-metadata\",\"valid serviceInfo is required\"));var r=e.renderingRule?JSON.stringify(e.renderingRule.toJSON()):null,n=e.signal,a=!!(t.hasRasterAttributeTable&&this.version>=10.1)&&o(this.parsedUrl.path+\"/rasterAttributeTable\",{query:this._getQueryParams({renderingRule:this.version>=10.1?r:null}),signal:n}).then((function(e){return D.fromJSON(e.data)})).catch((function(){return null})),l=!!(t.hasColormap&&this.version>=10.1)&&o(this.parsedUrl.path+\"/colormap\",{query:this._getQueryParams({renderingRule:this.version>=10.6?r:null}),signal:n}).then((function(e){return e.data&&e.data.colormap})),u=!!(t.hasHistograms&&this.version>=10.1)&&o(this.parsedUrl.path+\"/histograms\",{query:this._getQueryParams({renderingRule:this.version>=10.1?r:null}),signal:n}).then((function(e){return e.data&&e.data.histograms})),p=this.version>=10.3&&o(this.parsedUrl.path+\"/keyProperties\",{query:this._getQueryParams({renderingRule:r}),signal:n}).then((function(e){return e.data})).catch((function(){})),c=!!(t.hasMultidimensions&&this.version>=10.3)&&o(this.parsedUrl.path+\"/multidimensionalInfo\",{query:this._getQueryParams(),signal:n}).then((function(e){return e.data&&e.data.multidimensionalInfo}));return d.all([a,l,u,p,c]).then((function(e){var r=null;if(t.minValues&&t.minValues.length===t.bandCount){r=[];for(var n=0;n<t.minValues.length;n++)r.push({min:t.minValues[n],max:t.maxValues[n],avg:t.meanValues[n],stddev:t.stdvValues[n]})}var a=Math.ceil((t.extent.xmax-t.extent.xmin)/t.pixelSizeX-.1),o=Math.ceil((t.extent.ymax-t.extent.ymin)/t.pixelSizeY-.1),s=i.SpatialReference.fromJSON(t.spatialReference||t.extent.spatialReference);return new w({width:a,height:o,bandCount:t.bandCount,extent:i.Extent.fromJSON(t.extent),spatialReference:s,pixelSize:new i.Point({x:t.pixelSizeX,y:t.pixelSizeY,spatialReference:s}),pixelType:t.pixelType.toLowerCase(),statistics:r,attributeTable:e[0]||null,colormap:e[1]||null,histograms:e[2]||null,keyProperties:e[3]||null,multidimensionalInfo:e[4]||null})}))},t.prototype._requestArrayBuffer=function(e){var t=this,i=e.imageProps,n=e.requestAsImageElement,a=e.signal;if(n&&!this.pixelFilter&&i.format&&i.format.indexOf(\"png\")>-1)return o(this.parsedUrl.path+\"/exportImage\",{responseType:\"image\",query:this._getQueryParams(r.__assign({f:\"image\"},e.imageServiceParameters)),signal:a}).then((function(e){return{imageElement:e.data,params:i}}));var l=this._initJobHandler(),u=o(this.parsedUrl.path+\"/exportImage\",{responseType:\"array-buffer\",query:this._getQueryParams(r.__assign({f:\"image\"},e.imageServiceParameters)),signal:a});return d.all([u,l]).then((function(e){var n=e[0].data,o=i.format||\"jpgpng\",l=o;if(\"bsq\"!==l&&\"bip\"!==l&&(l=P.getFormat(n)),!l)throw new s(\"imagery-layer:fetch-image\",\"unsupported format signature \"+String.fromCharCode.apply(null,new Uint8Array(n)));var u=o.indexOf(\"png\")>-1&&(\"png\"===l||\"jpg\"===l),p={signal:a};return u?P.decode(n,r.__assign({useCanvas:!0},i),p).then((function(e){return{pixelData:{pixelBlock:e,extent:i.extent},params:i}})):t._decodePixelBlock(n,{width:i.width,height:i.height,planes:null,pixelType:null,noDataValue:null,format:o},p).then((function(e){return{pixelData:{pixelBlock:e,extent:i.extent},params:i}}))}))},t.prototype._generateRasterInfo=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,o(this.parsedUrl.path,r.__assign({query:this._getQueryParams({renderingRule:e})},t))];case 1:return i=n.sent().data,[4,this._fetchAuxiliaryRasterInfo(r.__assign({serviceInfo:i,renderingRule:e},t))];case 2:return[2,n.sent()]}}))}))},t.prototype._isValidCustomizedMosaicRule=function(e){return e&&JSON.stringify(e.toJSON())!==JSON.stringify(this._defaultServiceMosaicRule&&this._defaultServiceMosaicRule.toJSON())},t.prototype._updateMultidimensionalDefinition=function(e){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)){var t=e.variables[0].dimensions,r=[];for(var i in t)if(t.hasOwnProperty(i)){var n=t[i],a=n.extent,o=!0,s=[a[0]];n.hasRanges&&!0===n.hasRanges?(o=!1,s=[n.values[0]]):\"stdz\"===n.name.toLowerCase()&&Math.abs(a[1])<=Math.abs(a[0])&&(s=[a[1]]),r.push(new g({variableName:\"\",dimensionName:t[i].name,isSlice:o,values:s}))}if(r.length>0){this.mosaicRule=this.mosaicRule||new x;var l=this.mosaicRule.multidimensionalDefinition;(!l||l&&l.length<=0)&&(this.mosaicRule.multidimensionalDefinition=r)}}},t.prototype._formatAttributeValue=function(e,t){if(\"string\"==typeof e){var r=this.popupTemplate&&this.popupTemplate.fieldInfos,i=this._getFieldInfo(r,t),n=i&&i.format;if(n){var a=void 0,o=void 0;return e.trim().indexOf(\",\")>-1?(o=(a=\",\")+\" \",this._formatDelimitedString(e,a,o,n)):e.trim().indexOf(\" \")>-1?(a=o=\" \",this._formatDelimitedString(e,a,o,n)):this._formatNumberFromString(e,n)}}return e},t.prototype._getFieldInfo=function(e,t){if(e&&e.length&&t){var r=t.toLowerCase(),i=void 0;return e.some((function(e){return!(!e.fieldName||e.fieldName.toLowerCase()!==r&&e.fieldName.toLowerCase()!==r.replace(/ /g,\"_\"))&&(i=e,!0)})),i}},t.prototype._formatDelimitedString=function(e,t,r,i){var n=this;return e&&t&&r&&i?e.trim().split(t).map((function(e){return n._formatNumberFromString(e,i)})).join(r):e},t.prototype._formatNumberFromString=function(e,t){if(!e||!t)return e;var r=Number(e);return isNaN(r)?e:t.format(r)},t.prototype._processVisibleRastersResponse=function(e,t){t=t||{};var r,i,a,o=e.value,s=t.templateRRFunctionNames,l=t.showNoDataRecords,u=t.returnDomainValues,p=t.templateFields,d=e.processedValues,f=e.catalogItems&&e.catalogItems.features,h=e.properties&&e.properties.Values&&e.properties.Values.map((function(e){return e.replace(/ /gi,\", \")}))||[],m=this.objectIdField||\"ObjectId\",y=\"string\"==typeof o&&o.toLowerCase().indexOf(\"nodata\")>-1,g=[];if(o&&!f&&!y){var _={};_[m]=0,h=[o],f=[new n(this.fullExtent,null,_)]}if(!f)return[];this._updateResponseFieldNames(f,p);for(var v=0;v<f.length;v++){if(r=f[v],null!=o&&!y){if(i=h[v],a=this.renderingRule&&d&&d.length>0&&s&&s.length>0&&s.indexOf(this.renderingRule.functionName)>-1?d[s.indexOf(this.renderingRule.functionName)]:o,\"nodata\"===i.toLowerCase()&&!l)continue;r.attributes[\"Raster.ItemPixelValue\"]=this._formatAttributeValue(i,\"Raster.ItemPixelValue\"),r.attributes[\"Raster.ServicePixelValue\"]=this._formatAttributeValue(a,\"Raster.ServicePixelValue\"),this._updateFeatureWithMagDirValues(r,i);var R=this.fields&&this.fields.length>0,b=this.renderingRule&&c.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable?R?i:o:a;this.renderingRule||(b=R?i:o),this._updateFeatureWithRasterAttributeTableValues(r,b)}if(r.sourceLayer=this,u&&this._updateFeatureWithDomainValues(r),s&&d&&s.length===d.length)for(var x=0;x<s.length;x++){var I=\"Raster.ServicePixelValue.\"+s[x];r.attributes[I]=this._formatAttributeValue(d[x],I)}g.push(f[v])}return g},t.prototype._updateFeatureWithRasterAttributeTableValues=function(e,t){var r=this,i=this.rasterInfo&&this.rasterInfo.attributeTable||c.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable,n=i&&i.features;if(n){var a=i.fields,o=a.map((function(e){return e.name})).filter((function(e){return\"value\"===e.toLowerCase()})),s=o&&o[0];if(s){var l=n.filter((function(e){return e.attributes[s]===(null!=t?parseInt(t,10):null)}));l&&l[0]&&a.forEach((function(t){var i=r.rasterAttributeTableFieldPrefix+t.name;e.attributes[i]=r._formatAttributeValue(l[0].attributes[t.name],i)}))}}},t.prototype._updateFeatureWithMagDirValues=function(e,t){if(this.pixelFilter&&(\"esriImageServiceDataTypeVector-UV\"===this.serviceDataType||\"esriImageServiceDataTypeVector-MagDir\"===this.serviceDataType)){var r=t.replace(\" \",\",\").split(\",\").map((function(e){return parseFloat(e)})),n=r.map((function(e){return[e]})),a=r.map((function(e){return{minValue:e,maxValue:e,noDataValue:null}})),o=new I({height:1,width:1,pixelType:\"f32\",pixels:n,statistics:a});this.pixelFilter({pixelBlock:o,extent:new i.Extent(0,0,0,0,this.spatialReference)}),e.attributes[\"Raster.Magnitude\"]=o.pixels[0][0],e.attributes[\"Raster.Direction\"]=o.pixels[1][0]}},t.prototype._updateFeatureWithDomainValues=function(e){var t=this.fields&&this.fields.filter((function(e){return e.domain&&\"coded-value\"===e.domain.type}));null!=t&&t.forEach((function(t){var r=e.attributes[t.name];if(null!=r){var i=t.domain.codedValues.filter((function(e){return e.code===r}))[0];i&&(e.attributes[t.name]=i.name)}}))},t.prototype._updateResponseFieldNames=function(e,t){if(t&&!(t.length<1)){var r=this.fieldsIndex;r&&e.forEach((function(e){if(e&&e.attributes)for(var i=0,n=t;i<n.length;i++){var a=n[i];if(r.has(a)){var o=r.get(a).name;o!==a&&(e.attributes[a]=e.attributes[o],delete e.attributes[o])}}}))}},t.prototype._updateRenderingRulesFunctionName=function(e,t){if(e&&!(e.length<1)){if(\"Raw\"===e)return e.replace(\"Raw\",\"None\");var r=e.toLowerCase().replace(/ /gi,\"_\");return t.has(r)?t.get(r):e}},t.prototype._isRFTJson=function(e){return e.name&&e.arguments&&e.function&&e.hasOwnProperty(\"functionType\")},t.prototype._readCapabilities=function(e){var t=e.capabilities?e.capabilities.toLowerCase().split(\",\").map((function(e){return e.trim()})):[\"image\",\"catalog\"],r=e.currentVersion,i=e.advancedQueryCapabilities,n=e.maxRecordCount,a=t.indexOf(\"image\")>-1,o=\"esriImageServiceDataTypeElevation\"===e.serviceDataType,s=!!(e.spatialReference||e.extent&&e.extent.spatialReference);return{operations:{supportsComputeHistograms:a,supportsExportImage:a,supportsIdentify:a,supportsMeasure:t.indexOf(\"mensuration\")>-1&&s,supportsDownload:t.indexOf(\"download\")>-1,supportsQuery:t.indexOf(\"catalog\")>-1&&e.fields&&e.fields.length>0,supportsGetSamples:r>=10.2&&a,supportsProject:r>=10.3&&a,supportsComputeStatisticsHistograms:r>=10.4&&a,supportsQueryBoundary:r>=10.6&&a,supportsCalculateVolume:r>=10.7&&o,supportsComputePixelLocation:r>=10.7&&t.indexOf(\"catalog\")>-1},query:{supportsStatistics:!(!i||!i.supportsStatistics),supportsOrderBy:!(!i||!i.supportsOrderBy),supportsDistinct:!(!i||!i.supportsDistinct),supportsPagination:!(!i||!i.supportsPagination),supportsStandardizedQueriesOnly:!(!i||!i.useStandardizedQueries),maxRecordCount:n}}},r.__decorate([h.property()],t.prototype,\"_functionRasterInfos\",void 0),r.__decorate([h.property()],t.prototype,\"_rasterJobHandler\",void 0),r.__decorate([h.property()],t.prototype,\"_symbolizer\",void 0),r.__decorate([h.property()],t.prototype,\"_defaultServiceMosaicRule\",void 0),r.__decorate([h.reader(\"_defaultServiceMosaicRule\",[\"defaultMosaicMethod\"])],t.prototype,\"readDefaultServiceMosaicRule\",null),r.__decorate([h.property()],t.prototype,\"_cachedRendererJson\",void 0),r.__decorate([h.property()],t.prototype,\"rasterAttributeTableFieldPrefix\",void 0),r.__decorate([h.property({readOnly:!0,dependsOn:[\"rasterFunctionInfos\"]})],t.prototype,\"rasterFunctionNamesIndex\",null),r.__decorate([h.property({readOnly:!0,dependsOn:[\"url\"]})],t.prototype,\"queryTask\",null),r.__decorate([h.property()],t.prototype,\"adjustAspectRatio\",void 0),r.__decorate([h.property({readOnly:!0}),h.aliasOf(\"serviceRasterInfo.bandCount\")],t.prototype,\"bandCount\",void 0),r.__decorate([h.property({type:[m.Integer],json:{write:!0}})],t.prototype,\"bandIds\",void 0),r.__decorate([h.reader(\"bandIds\")],t.prototype,\"readBandIds\",null),r.__decorate([h.property({readOnly:!0,json:{read:!1}})],t.prototype,\"capabilities\",void 0),r.__decorate([h.reader(\"service\",\"capabilities\",[\"capabilities\",\"currentVersion\",\"serviceDataType\"])],t.prototype,\"readCapabilities\",null),r.__decorate([h.property({type:Number})],t.prototype,\"compressionQuality\",void 0),r.__decorate([h.writer(\"compressionQuality\")],t.prototype,\"writeCompressionQuality\",null),r.__decorate([h.property({type:Number})],t.prototype,\"compressionTolerance\",void 0),r.__decorate([h.writer(\"compressionTolerance\")],t.prototype,\"writeCompressionTolerance\",null),r.__decorate([h.property({json:{read:{source:\"copyrightText\"}}})],t.prototype,\"copyright\",void 0),r.__decorate([h.property({type:String,json:{read:{source:\"layerDefinition.definitionExpression\"},write:{target:\"layerDefinition.definitionExpression\"}}})],t.prototype,\"definitionExpression\",void 0),r.__decorate([h.property({readOnly:!0,constructOnly:!0})],t.prototype,\"exportImageServiceParameters\",void 0),r.__decorate([h.property()],t.prototype,\"rasterInfo\",void 0),r.__decorate([h.property({readOnly:!0,type:[v]})],t.prototype,\"fields\",void 0),r.__decorate([h.property({readOnly:!0,dependsOn:[\"fields\"]})],t.prototype,\"fieldsIndex\",null),r.__decorate([h.property({type:String,json:{write:!0}})],t.prototype,\"format\",null),r.__decorate([h.property({type:i.Extent})],t.prototype,\"fullExtent\",void 0),r.__decorate([h.property({readOnly:!0})],t.prototype,\"hasMultidimensions\",void 0),r.__decorate([h.property({json:{read:{source:\"maxImageHeight\"}}})],t.prototype,\"imageMaxHeight\",void 0),r.__decorate([h.property({json:{read:{source:\"maxImageWidth\"}}})],t.prototype,\"imageMaxWidth\",void 0),r.__decorate([h.property({type:String,json:{read:{reader:M.read},write:{writer:M.write}}})],t.prototype,\"interpolation\",void 0),r.__decorate([h.property({type:x})],t.prototype,\"mosaicRule\",null),r.__decorate([h.reader(\"mosaicRule\",[\"mosaicRule\",\"defaultMosaicMethod\"])],t.prototype,\"readMosaicRule\",null),r.__decorate([h.writer(\"mosaicRule\")],t.prototype,\"writeMosaicRule\",null),r.__decorate([h.property({readOnly:!0}),h.aliasOf(\"serviceRasterInfo.multidimensionalInfo\")],t.prototype,\"multidimensionalInfo\",void 0),r.__decorate([h.property()],t.prototype,\"noData\",void 0),r.__decorate([h.writer(\"noData\")],t.prototype,\"writeNoData\",null),r.__decorate([h.property({type:String,json:{read:{reader:j.read},write:{writer:j.write}}})],t.prototype,\"noDataInterpretation\",void 0),r.__decorate([h.property({type:String,readOnly:!0,json:{read:{source:[\"fields\"]}}})],t.prototype,\"objectIdField\",void 0),r.__decorate([h.reader(\"objectIdField\")],t.prototype,\"readObjectIdField\",null),r.__decorate([h.property({readOnly:!0,dependsOn:[\"url\"]})],t.prototype,\"parsedUrl\",null),r.__decorate([h.property({readOnly:!0}),h.aliasOf(\"serviceRasterInfo.pixelSize.x\")],t.prototype,\"pixelSizeX\",void 0),r.__decorate([h.property({readOnly:!0}),h.aliasOf(\"serviceRasterInfo.pixelSize.y\")],t.prototype,\"pixelSizeY\",void 0),r.__decorate([h.property({type:Function})],t.prototype,\"pixelFilter\",void 0),r.__decorate([h.property()],t.prototype,\"raster\",void 0),r.__decorate([h.property()],t.prototype,\"viewId\",void 0),r.__decorate([h.property({types:a.rasterRendererTypes,json:{read:{source:\"layerDefinition.drawingInfo.renderer\"},write:{target:\"layerDefinition.drawingInfo.renderer\"}}})],t.prototype,\"renderer\",void 0),r.__decorate([h.reader(\"renderer\")],t.prototype,\"readRenderer\",null),r.__decorate([h.property(y.opacityDrawingInfo)],t.prototype,\"opacity\",void 0),r.__decorate([h.property({readOnly:!0}),h.aliasOf(\"serviceRasterInfo.attributeTable\")],t.prototype,\"rasterAttributeTable\",void 0),r.__decorate([h.property({readOnly:!0,dependsOn:[\"fields\",\"rasterInfo\",\"capabilities\"]})],t.prototype,\"rasterFields\",null),r.__decorate([h.property({readOnly:!0})],t.prototype,\"rasterFunctionInfos\",void 0),r.__decorate([h.property({type:S})],t.prototype,\"renderingRule\",null),r.__decorate([h.reader(\"renderingRule\",[\"renderingRule\",\"rasterFunctionInfos\"])],t.prototype,\"readRenderingRule\",null),r.__decorate([h.writer(\"renderingRule\")],t.prototype,\"writeRenderingRule\",null),r.__decorate([h.property()],t.prototype,\"serviceDataType\",void 0),r.__decorate([h.property({readOnly:!0,type:i.SpatialReference})],t.prototype,\"spatialReference\",void 0),r.__decorate([h.reader(\"spatialReference\",[\"spatialReference\",\"extent\"])],t.prototype,\"readSpatialReference\",null),r.__decorate([h.property()],t.prototype,\"pixelType\",void 0),r.__decorate([h.reader(\"pixelType\")],t.prototype,\"readPixelType\",null),r.__decorate([h.writer(\"pixelType\")],t.prototype,\"writePixelType\",null),r.__decorate([h.property({constructOnly:!0,type:w})],t.prototype,\"serviceRasterInfo\",void 0),r.__decorate([h.property()],t.prototype,\"sourceJSON\",void 0),r.__decorate([h.property(y.url)],t.prototype,\"url\",void 0),r.__decorate([h.property({readOnly:!0})],t.prototype,\"version\",void 0),r.__decorate([h.reader(\"version\",[\"currentVersion\",\"fields\",\"timeInfo\"])],t.prototype,\"readVersion\",null),t=r.__decorate([h.subclass(\"esri.layers.mixins.ArcGISImageService\")],t)}(e)}}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/mixins/ArcGISImageService.js?')},\"./node_modules/arcgis-js-api/layers/support/ExportImageServiceParameters.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../core/jsonMap */ \"./node_modules/arcgis-js-api/core/jsonMap.js\"),__webpack_require__(/*! ../../core/JSONSupport */ \"./node_modules/arcgis-js-api/core/JSONSupport.js\"),__webpack_require__(/*! ../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ./imageryRendererUtils */ \"./node_modules/arcgis-js-api/layers/support/imageryRendererUtils.js\"),__webpack_require__(/*! ./MosaicRule */ \"./node_modules/arcgis-js-api/layers/support/MosaicRule.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,r,o,t,i,n,a,p){Object.defineProperty(r,\"__esModule\",{value:!0});var l=new t.default({RSP_NearestNeighbor:\"nearest\",RSP_BilinearInterpolation:\"bilinear\",RSP_CubicConvolution:\"cubic\",RSP_Majority:\"majority\"}),s=new t.default({esriNoDataMatchAny:\"any\",esriNoDataMatchAll:\"all\"}),d=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.layer=null,r.adjustAspectRatio=void 0,r.bandIds=void 0,r.compression=void 0,r.compressionQuality=void 0,r.compressionTolerance=.01,r.format=null,r.interpolation=null,r.noData=null,r.noDataInterpretation=void 0,r.pixelType=void 0,r.lercVersion=2,r}return o.__extends(r,e),r.prototype.writeAdjustAspectRatio=function(e,r,o){this.layer.version<10.3||(r[o]=e)},r.prototype.writeCompressionQuality=function(e,r,o){this.format&&this.format.toLowerCase().indexOf(\"jpg\")>-1&&null!=e&&(r[o]=e)},r.prototype.writeCompressionTolerance=function(e,r,o){\"lerc\"===this.format&&null!=e&&(r[o]=e)},r.prototype.writeLercVersion=function(e,r,o){\"lerc\"===this.format&&this.layer.version>=10.5&&(r[o]=e)},Object.defineProperty(r.prototype,\"version\",{get:function(){var e=this.layer;return e.bandIds,e.format,e.compressionQuality,e.compressionTolerance,e.interpolation,e.noData,e.noDataInterpretation,e.mosaicRule,e.renderingRule,e.adjustAspectRatio,e.pixelFilter,e.renderer,e.definitionExpression,(this._get(\"version\")||0)+1},set:function(e){this._set(\"version\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,\"mosaicRule\",{get:function(){var e=this.layer,r=e.mosaicRule,o=e.definitionExpression;return r?o&&o!==r.where&&((r=r.clone()).where=o):o&&(r=new p({where:o})),r},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,\"renderingRule\",{get:function(){var e=this.layer,r=e.renderingRule,o=e.pixelFilter;return(!e.format||e.format.indexOf(\"jpg\")>-1||e.format.indexOf(\"png\")>-1)&&!o&&(r=this.combineRendererWithRenderingRule()),r},enumerable:!0,configurable:!0}),r.prototype.combineRendererWithRenderingRule=function(){var e=this.layer,r=e.rasterInfo,o=e.renderingRule,t=e.renderer;return t&&a.isSupportedRendererType(t)?a.combineRenderingRules(a.convertRendererToRenderingRule(t,{rasterAttributeTable:r.attributeTable,pixelType:r.pixelType,convertColorRampToColormap:e.version<10.6,dataType:r.dataType}),o):o},o.__decorate([n.property()],r.prototype,\"layer\",void 0),o.__decorate([n.property({json:{write:!0}})],r.prototype,\"adjustAspectRatio\",void 0),o.__decorate([n.writer(\"adjustAspectRatio\")],r.prototype,\"writeAdjustAspectRatio\",null),o.__decorate([n.property({json:{write:!0}}),n.aliasOf(\"layer.bandIds\")],r.prototype,\"bandIds\",void 0),o.__decorate([n.property({json:{write:!0}})],r.prototype,\"compression\",void 0),o.__decorate([n.property({json:{write:!0}}),n.aliasOf(\"layer.compressionQuality\")],r.prototype,\"compressionQuality\",void 0),o.__decorate([n.writer(\"compressionQuality\")],r.prototype,\"writeCompressionQuality\",null),o.__decorate([n.property({json:{write:!0}}),n.aliasOf(\"layer.compressionTolerance\")],r.prototype,\"compressionTolerance\",void 0),o.__decorate([n.writer(\"compressionTolerance\")],r.prototype,\"writeCompressionTolerance\",null),o.__decorate([n.property({json:{write:!0}}),n.aliasOf(\"layer.format\")],r.prototype,\"format\",void 0),o.__decorate([n.property({type:String,json:{read:{reader:l.read},write:{writer:l.write}}}),n.aliasOf(\"layer.interpolation\")],r.prototype,\"interpolation\",void 0),o.__decorate([n.property({json:{write:!0}}),n.aliasOf(\"layer.noData\")],r.prototype,\"noData\",void 0),o.__decorate([n.property({type:String,json:{read:{reader:s.read},write:{writer:s.write}}}),n.aliasOf(\"layer.noDataInterpretation\")],r.prototype,\"noDataInterpretation\",void 0),o.__decorate([n.property({json:{write:!0}})],r.prototype,\"pixelType\",void 0),o.__decorate([n.property({json:{write:!0}})],r.prototype,\"lercVersion\",void 0),o.__decorate([n.writer(\"lercVersion\")],r.prototype,\"writeLercVersion\",null),o.__decorate([n.property({type:Number,dependsOn:[\"layer.adjustAspectRatio\",\"layer.bandIds\",\"layer.format\",\"layer.compressionQuality\",\"layer.compressionTolerance\",\"layer.definitionExpression\",\"layer.interpolation\",\"layer.noData\",\"layer.noDataInterpretation\",\"layer.mosaicRule\",\"layer.renderingRule\",\"layer.pixelFilter\",\"layer.renderer\",\"lercVersion\",\"pixelType\"]})],r.prototype,\"version\",null),o.__decorate([n.property({dependsOn:[\"layer.mosaicRule\",\"layer.definitionExpression\"],json:{write:!0}})],r.prototype,\"mosaicRule\",null),o.__decorate([n.property({dependsOn:[\"layer.renderingRule\",\"layer.renderer\",\"layer.rasterInfo\",\"layer.format\"],json:{write:!0}})],r.prototype,\"renderingRule\",null),r=o.__decorate([n.subclass(\"esri.layers.mixins.ExportImageServiceParameters\")],r)}(i.JSONSupport);r.ExportImageServiceParameters=d}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/ExportImageServiceParameters.js?')},\"./node_modules/arcgis-js-api/layers/support/MosaicRule.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../core/jsonMap */ \"./node_modules/arcgis-js-api/core/jsonMap.js\"),__webpack_require__(/*! ../../core/JSONSupport */ \"./node_modules/arcgis-js-api/core/JSONSupport.js\"),__webpack_require__(/*! ../../core/lang */ \"./node_modules/arcgis-js-api/core/lang.js\"),__webpack_require__(/*! ../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ../../geometry/Point */ \"./node_modules/arcgis-js-api/geometry/Point.js\"),__webpack_require__(/*! ./DimensionalDefinition */ \"./node_modules/arcgis-js-api/layers/support/DimensionalDefinition.js\"),__webpack_require__(/*! ./RasterFunction */ \"./node_modules/arcgis-js-api/layers/support/RasterFunction.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,o,r,i,n,s,a,c,p){var d=r.strict()({MT_FIRST:\"first\",MT_LAST:\"last\",MT_MIN:\"min\",MT_MAX:\"max\",MT_MEAN:\"mean\",MT_BLEND:\"blend\",MT_SUM:\"sum\"}),l=r.strict()({esriMosaicNone:\"none\",esriMosaicCenter:\"center\",esriMosaicNadir:\"nadir\",esriMosaicViewpoint:\"viewpoint\",esriMosaicAttribute:\"attribute\",esriMosaicLockRaster:\"lock-raster\",esriMosaicNorthwest:\"northwest\",esriMosaicSeamline:\"seamline\"});return function(e){function t(t){var o=e.call(this,t)||this;return o.ascending=!0,o.itemRenderingRule=null,o.lockRasterIds=null,o.method=null,o.multidimensionalDefinition=null,o.objectIds=null,o.operation=null,o.sortField=null,o.sortValue=null,o.viewpoint=null,o.where=null,o}var r;return o.__extends(t,e),r=t,t.prototype.readAscending=function(e,t){return null!=t.ascending?t.ascending:null==t.sortAscending||t.sortAscending},t.prototype.readMethod=function(e,t){return function(e){var t;switch(e?e.toLowerCase().replace(\"esrimosaic\",\"\"):\"\"){case\"byattribute\":case\"attribute\":t=\"esriMosaicAttribute\";break;case\"lockraster\":t=\"esriMosaicLockRaster\";break;case\"center\":t=\"esriMosaicCenter\";break;case\"northwest\":t=\"esriMosaicNorthwest\";break;case\"nadir\":t=\"esriMosaicNadir\";break;case\"viewpoint\":t=\"esriMosaicViewpoint\";break;case\"seamline\":t=\"esriMosaicSeamline\";break;case\"none\":default:t=\"esriMosaicNone\"}return l.fromJSON(t)}(t.mosaicMethod||t.defaultMosaicMethod)},t.prototype.readOperation=function(e,t){var o=t.mosaicOperation,r=t.mosaicOperator&&t.mosaicOperator.toLowerCase(),i=o||(r?d.toJSON(r):null);return d.fromJSON(i)||\"first\"},t.prototype.castSortValue=function(e){return null==e||\"string\"==typeof e||\"number\"==typeof e?e:\"\"+e},t.prototype.clone=function(){return new r({ascending:this.ascending,itemRenderingRule:n.clone(this.itemRenderingRule),lockRasterIds:n.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:n.clone(this.multidimensionalDefinition),objectIds:n.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:n.clone(this.viewpoint),where:this.where})},o.__decorate([s.property({type:Boolean,json:{write:!0}})],t.prototype,\"ascending\",void 0),o.__decorate([s.reader(\"ascending\",[\"ascending\",\"sortAscending\"])],t.prototype,\"readAscending\",null),o.__decorate([s.property({type:p,json:{write:!0}})],t.prototype,\"itemRenderingRule\",void 0),o.__decorate([s.property({type:[Number],json:{write:{overridePolicy:function(){return{enabled:\"lock-raster\"===this.method}}}}})],t.prototype,\"lockRasterIds\",void 0),o.__decorate([s.property({type:String,json:{type:l.jsonValues,write:{target:\"mosaicMethod\",writer:l.write}}})],t.prototype,\"method\",void 0),o.__decorate([s.reader(\"method\",[\"mosaicMethod\",\"defaultMosaicMethod\"])],t.prototype,\"readMethod\",null),o.__decorate([s.property({type:[c],json:{write:!0}})],t.prototype,\"multidimensionalDefinition\",void 0),o.__decorate([s.property({type:[Number],json:{read:{source:\"fids\"},write:{target:\"fids\"}}})],t.prototype,\"objectIds\",void 0),o.__decorate([s.property({json:{type:d.jsonValues,read:{reader:d.read},write:{target:\"mosaicOperation\",writer:d.write}}})],t.prototype,\"operation\",void 0),o.__decorate([s.reader(\"operation\",[\"mosaicOperation\",\"mosaicOperator\"])],t.prototype,\"readOperation\",null),o.__decorate([s.property({type:String,json:{write:{overridePolicy:function(){return{enabled:\"attribute\"===this.method}}}}})],t.prototype,\"sortField\",void 0),o.__decorate([s.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy:function(){return{enabled:\"attribute\"===this.method,allowNull:!0}}}}})],t.prototype,\"sortValue\",void 0),o.__decorate([s.cast(\"sortValue\")],t.prototype,\"castSortValue\",null),o.__decorate([s.property({type:a,json:{write:!0}})],t.prototype,\"viewpoint\",void 0),o.__decorate([s.property({type:String,json:{write:!0}})],t.prototype,\"where\",void 0),t=r=o.__decorate([s.subclass(\"esri.layers.support.MosaicRule\")],t)}(i.JSONSupport)}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/MosaicRule.js?')},\"./node_modules/arcgis-js-api/tasks/ImageServiceIdentifyTask.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../request */ \"./node_modules/arcgis-js-api/request.js\"),__webpack_require__(/*! ../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ../geometry/support/normalizeUtils */ \"./node_modules/arcgis-js-api/geometry/support/normalizeUtils.js\"),__webpack_require__(/*! ./Task */ \"./node_modules/arcgis-js-api/tasks/Task.js\"),__webpack_require__(/*! ./support/ImageServiceIdentifyResult */ \"./node_modules/arcgis-js-api/tasks/support/ImageServiceIdentifyResult.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,r,t,n,s,i,o,a,u){return function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(r,e),r.prototype.execute=function(e,r){var i=this,a=e.geometry?[e.geometry]:[];return o.normalizeCentralMeridian(a).then((function(o){var a=e.toJSON(),u=o&&o[0];s.isSome(u)&&(a.geometry=JSON.stringify(u.toJSON()));var c=i._encode(t.__assign(t.__assign({f:\"json\"},i.parsedUrl.query),a)),p=t.__assign(t.__assign({query:c},i.requestOptions),r);return n(i.parsedUrl.path+\"/identify\",p)})).then((function(e){return u.fromJSON(e.data)}))},r=t.__decorate([i.subclass(\"esri.tasks.ImageServiceIdentifyTask\")],r)}(a)}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/tasks/ImageServiceIdentifyTask.js?')},\"./node_modules/arcgis-js-api/tasks/support/ImageServiceIdentifyParameters.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../TimeExtent */ \"./node_modules/arcgis-js-api/TimeExtent.js\"),__webpack_require__(/*! ../../core/JSONSupport */ \"./node_modules/arcgis-js-api/core/JSONSupport.js\"),__webpack_require__(/*! ../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ../../geometry/Point */ \"./node_modules/arcgis-js-api/geometry/Point.js\"),__webpack_require__(/*! ../../geometry/support/jsonUtils */ \"./node_modules/arcgis-js-api/geometry/support/jsonUtils.js\"),__webpack_require__(/*! ../../layers/support/MosaicRule */ \"./node_modules/arcgis-js-api/layers/support/MosaicRule.js\"),__webpack_require__(/*! ../../layers/support/RasterFunction */ \"./node_modules/arcgis-js-api/layers/support/RasterFunction.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,r,o,n,i,p,l,u,s){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.geometry=null,t.renderingRules=null,t.pixelSize=null,t.returnGeometry=!0,t.returnCatalogItems=!0,t.returnPixelValues=!0,t.maxItemCount=null,t.timeExtent=null,t.raster=void 0,t.viewId=void 0,t}return r.__extends(t,e),t.prototype.writeGeometry=function(e,t,r){null!=e&&(t.geometryType=l.getJsonType(e),t[r]=JSON.stringify(e.toJSON()))},Object.defineProperty(t.prototype,\"mosaicRule\",{set:function(e){var t=e;t&&t.mosaicMethod&&(t=u.fromJSON(r.__assign(r.__assign({},t.toJSON()),{mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation}))),this._set(\"mosaicRule\",t)},enumerable:!0,configurable:!0}),t.prototype.writeMosaicRule=function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.toJSON()))},Object.defineProperty(t.prototype,\"renderingRule\",{set:function(e){var t=e;t&&t.rasterFunction&&(t=s.fromJSON(r.__assign(r.__assign({},t.toJSON()),{rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments}))),this._set(\"renderingRule\",t)},enumerable:!0,configurable:!0}),t.prototype.writeRenderingRule=function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.toJSON()))},t.prototype.writeRenderingRules=function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.map((function(e){return e.toJSON()}))))},t.prototype.writePixelSize=function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.toJSON()))},t.prototype.writeTimeExtent=function(e,t,r){if(null!=e){var o=e.start?e.start.getTime():null,n=e.end?e.end.getTime():null;t[r]=null!=o?null!=n?o+\",\"+n:\"\"+o:null}},r.__decorate([i.property({json:{write:!0}})],t.prototype,\"geometry\",void 0),r.__decorate([i.writer(\"geometry\")],t.prototype,\"writeGeometry\",null),r.__decorate([i.property({type:u,json:{write:!0}})],t.prototype,\"mosaicRule\",null),r.__decorate([i.writer(\"mosaicRule\")],t.prototype,\"writeMosaicRule\",null),r.__decorate([i.property({type:s,json:{write:!0}})],t.prototype,\"renderingRule\",null),r.__decorate([i.writer(\"renderingRule\")],t.prototype,\"writeRenderingRule\",null),r.__decorate([i.property({type:[s],json:{write:!0}})],t.prototype,\"renderingRules\",void 0),r.__decorate([i.writer(\"renderingRules\")],t.prototype,\"writeRenderingRules\",null),r.__decorate([i.property({type:p,json:{write:!0}})],t.prototype,\"pixelSize\",void 0),r.__decorate([i.writer(\"pixelSize\")],t.prototype,\"writePixelSize\",null),r.__decorate([i.property({type:Boolean,json:{write:!0}})],t.prototype,\"returnGeometry\",void 0),r.__decorate([i.property({type:Boolean,json:{write:!0}})],t.prototype,\"returnCatalogItems\",void 0),r.__decorate([i.property({type:Boolean,json:{write:!0}})],t.prototype,\"returnPixelValues\",void 0),r.__decorate([i.property({type:Number,json:{write:!0}})],t.prototype,\"maxItemCount\",void 0),r.__decorate([i.property({type:o,json:{write:{target:\"time\"}}})],t.prototype,\"timeExtent\",void 0),r.__decorate([i.writer(\"timeExtent\")],t.prototype,\"writeTimeExtent\",null),r.__decorate([i.property({json:{write:!0}})],t.prototype,\"raster\",void 0),r.__decorate([i.property({json:{write:!0}})],t.prototype,\"viewId\",void 0),t=r.__decorate([i.subclass(\"esri.tasks.support.ImageServiceIdentifyParameters\")],t)}(n.JSONSupport)}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/tasks/support/ImageServiceIdentifyParameters.js?')},\"./node_modules/arcgis-js-api/tasks/support/ImageServiceIdentifyResult.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../core/JSONSupport */ \"./node_modules/arcgis-js-api/core/JSONSupport.js\"),__webpack_require__(/*! ../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ../../geometry/Point */ \"./node_modules/arcgis-js-api/geometry/Point.js\"),__webpack_require__(/*! ./FeatureSet */ \"./node_modules/arcgis-js-api/tasks/support/FeatureSet.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,o,r,p,i,s){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.catalogItemVisibilities=null,t.catalogItems=null,t.location=null,t.name=null,t.objectId=null,t.processedValues=null,t.properties=null,t.value=null,t}return o.__extends(t,e),o.__decorate([p.property({json:{write:!0}})],t.prototype,\"catalogItemVisibilities\",void 0),o.__decorate([p.property({type:s,json:{write:!0}})],t.prototype,\"catalogItems\",void 0),o.__decorate([p.property({type:i,json:{write:!0}})],t.prototype,\"location\",void 0),o.__decorate([p.property({json:{write:!0}})],t.prototype,\"name\",void 0),o.__decorate([p.property({json:{write:!0}})],t.prototype,\"objectId\",void 0),o.__decorate([p.property({json:{write:!0}})],t.prototype,\"processedValues\",void 0),o.__decorate([p.property({json:{write:!0}})],t.prototype,\"properties\",void 0),o.__decorate([p.property({json:{write:!0}})],t.prototype,\"value\",void 0),t=o.__decorate([p.subclass(\"esri.tasks.support.ImageServiceIdentifyResult\")],t)}(r.JSONSupport)}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/tasks/support/ImageServiceIdentifyResult.js?')}}]);","extractedComments":[]}