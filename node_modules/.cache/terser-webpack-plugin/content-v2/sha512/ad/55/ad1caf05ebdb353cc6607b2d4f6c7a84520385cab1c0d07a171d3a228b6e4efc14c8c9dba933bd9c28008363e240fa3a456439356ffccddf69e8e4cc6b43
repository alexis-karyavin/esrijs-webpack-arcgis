{"code":"(function(){(this||window).webpackJsonp.registerAbsMids({\"esri/layers/support/ElevationQuery\":\"./node_modules/arcgis-js-api/layers/support/ElevationQuery.js\",\"esri/layers/support/ElevationSampler\":\"./node_modules/arcgis-js-api/layers/support/ElevationSampler.js\",\"esri/layers/support/ElevationTile\":\"./node_modules/arcgis-js-api/layers/support/ElevationTile.js\"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{\"./node_modules/arcgis-js-api/layers/support/ElevationQuery.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../core/arrayUtils */ \"./node_modules/arcgis-js-api/core/arrayUtils.js\"),__webpack_require__(/*! ../../core/asyncUtils */ \"./node_modules/arcgis-js-api/core/asyncUtils.js\"),__webpack_require__(/*! ../../core/Error */ \"./node_modules/arcgis-js-api/core/Error.js\"),__webpack_require__(/*! ../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../core/unitUtils */ \"./node_modules/arcgis-js-api/core/unitUtils.js\"),__webpack_require__(/*! ../../geometry/Multipoint */ \"./node_modules/arcgis-js-api/geometry/Multipoint.js\"),__webpack_require__(/*! ../../geometry/Point */ \"./node_modules/arcgis-js-api/geometry/Point.js\"),__webpack_require__(/*! ../../geometry/Polyline */ \"./node_modules/arcgis-js-api/geometry/Polyline.js\"),__webpack_require__(/*! ../../geometry/support/aaBoundingRect */ \"./node_modules/arcgis-js-api/geometry/support/aaBoundingRect.js\"),__webpack_require__(/*! ../../geometry/support/webMercatorUtils */ \"./node_modules/arcgis-js-api/geometry/support/webMercatorUtils.js\"),__webpack_require__(/*! ./ElevationSampler */ \"./node_modules/arcgis-js-api/layers/support/ElevationSampler.js\"),__webpack_require__(/*! ./ElevationTile */ \"./node_modules/arcgis-js-api/layers/support/ElevationTile.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,n,i,r,o,a,l,s,u,c,p,f,h,d){Object.defineProperty(t,\"__esModule\",{value:!0});var v=function(){function e(){}return e.prototype.queryAll=function(e,t,i){return n.__awaiter(this,void 0,void 0,(function(){var r,l,s,u,c;return n.__generator(this,(function(p){switch(p.label){case 0:return(e=i&&i.ignoreInvisibleLayers?e.filter((function(e){return e.visible})):e.slice()).length?(r=m.fromGeometry(t),l=!1,i&&i.returnSampleInfo||(l=!0),s=n.__assign(n.__assign({noDataValue:0,maximumAutoTileRequests:20},i),{returnSampleInfo:!0,demResolution:\"auto\"}),[4,this.query(e[e.length-1],r,s)]):[2,a.reject(new o(\"elevation-query:invalid-layer\",\"Elevation queries require at least one elevation layer to fetch tiles from\"))];case 1:return u=p.sent(),[4,this._queryAllContinue(e,u,s)];case 2:return(c=p.sent()).geometry=c.geometry.export(),l&&delete c.sampleInfo,[2,c]}}))}))},e.prototype.query=function(e,t,i){return n.__awaiter(this,void 0,void 0,(function(){var r;return n.__generator(this,(function(l){switch(l.label){case 0:return e?t&&(t instanceof m||\"point\"===t.type||\"multipoint\"===t.type||\"polyline\"===t.type)?(i=n.__assign({noDataValue:0,demResolution:\"auto\",minDemResolution:0,maximumAutoTileRequests:20,returnSampleInfo:!1},i),r=new _(e,t.spatialReference,i),[4,e.load(i)]):[2,a.reject(new o(\"elevation-query:invalid-geometry\",\"Only point, polyline and multipoint geometries can be used to query elevation\"))]:[2,a.reject(new o(\"elevation-query:invalid-layer\",\"Elevation queries require an elevation layer to fetch tiles from\"))];case 1:return l.sent(),this._createGeometryDescriptor(r,t),[4,this._selectTiles(r)];case 2:return l.sent(),[4,this._populateElevationTiles(r)];case 3:return l.sent(),this._sampleGeometryWithElevation(r),[2,this._createQueryResult(r)]}}))}))},e.prototype.createSampler=function(e,t,i){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(r){return e?t&&\"extent\"===t.type?(i=n.__assign({noDataValue:0,demResolution:\"auto\",maximumAutoTileRequests:20,returnSampleInfo:!1},i),[2,this._createSampler(e,t,i)]):[2,a.reject(new o(\"elevation-query:invalid-extent\",\"Invalid or undefined extent\"))]:[2,a.reject(new o(\"elevation-query:invalid-layer\",\"Elevation queries require an elevation layer to fetch tiles from\"))]}))}))},e.prototype.createSamplerAll=function(e,t,i){return n.__awaiter(this,void 0,void 0,(function(){var r,l;return n.__generator(this,(function(s){switch(s.label){case 0:return(e=i&&i.ignoreInvisibleLayers?e.filter((function(e){return e.visible})):e.slice()).length?t&&\"extent\"===t.type?(r=n.__assign(n.__assign({noDataValue:0,maximumAutoTileRequests:20},i),{returnSampleInfo:!0,demResolution:\"auto\"}),[4,this._createSampler(e[e.length-1],t,r)]):[2,a.reject(new o(\"elevation-query:invalid-extent\",\"Invalid or undefined extent\"))]:[2,a.reject(new o(\"elevation-query:invalid-layer\",\"Elevation queries require at least one elevation layer to fetch tiles from\"))];case 1:return l=s.sent(),[2,this._createSamplerAllContinue(e,t,l,r)]}}))}))},e.prototype._createSampler=function(e,t,i,r){return n.__awaiter(this,void 0,void 0,(function(){var l,s,u;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,e.load()];case 1:if(n.sent(),l=t.spatialReference,s=e.tileInfo.spatialReference,!l.equals(s)){if(!f.canProject(l,s))return[2,a.reject(new o(\"elevation-query:invalid-extent\",\"Extent spatial reference (\"+l.wkid+\") must be compatible with tile spatial reference (\"+s.wkid+\")\"))];t=f.project(t,s)}return u=new T(e,t,i,r),[4,this._selectTiles(u)];case 2:return n.sent(),[4,this._populateElevationTiles(u)];case 3:return n.sent(),[2,new h.MultiTileElevationSampler(u.elevationTiles,u.layer.tileInfo,u.options.noDataValue)]}}))}))},e.prototype._createSamplerAllContinue=function(e,t,i,r){return n.__awaiter(this,void 0,void 0,(function(){var o,a,l,s;return n.__generator(this,(function(n){switch(n.label){case 0:return e.pop(),e.length?(o=i.samplers.map((function(e){return p.fromExtent(e.extent)})),[4,this._createSampler(e[e.length-1],t,r,o)]):[2,i];case 1:return 0===(a=n.sent()).samplers.length?[2,i]:(l=i.samplers.concat(a.samplers),s=new h.MultiTileElevationSampler(l,r.noDataValue),[2,this._createSamplerAllContinue(e,t,s,r)])}}))}))},e.prototype._queryAllContinue=function(e,t,i){return n.__awaiter(this,void 0,void 0,(function(){var r,o,a,l,s,u,c;return n.__generator(this,(function(n){switch(n.label){case 0:if(r=e.pop(),t.geometry.coordinates.forEach((function(e,n){t.sampleInfo[n].demResolution>=0&&!t.sampleInfo[n].source&&(t.sampleInfo[n].source=r)})),!e.length)return[2,t];for(o=t.geometry.coordinates,a=[],l=[],s=0;s<o.length;s++)t.sampleInfo[s].demResolution<0&&(a.push(o[s]),l.push(s));return 0===a.length?[2,t]:(u=t.geometry.clone(a),[4,this.query(e[e.length-1],u,i)]);case 1:return c=n.sent(),l.forEach((function(e,n){o[e].z=c.geometry.coordinates[n].z,t.sampleInfo[e].demResolution=c.sampleInfo[n].demResolution})),[2,this._queryAllContinue(e,t,i)]}}))}))},e.prototype._createQueryResult=function(e){var t={geometry:(e.outSpatialReference.equals(e.geometry.spatialReference)?e.geometry:e.geometry.project(e.outSpatialReference)).export(),noDataValue:e.options.noDataValue};return e.options.returnSampleInfo&&(t.sampleInfo=this._extractSampleInfo(e)),e.geometry.coordinates.forEach((function(e){e.tile=null,e.elevationTile=null})),t},e.prototype._createGeometryDescriptor=function(e,t){var n,i=e.layer.tileInfo.spatialReference;if(!(n=t instanceof m?t.project(i):f.project(t,i)))throw new o(\"elevation-query:spatial-reference-mismatch\",\"Cannot query elevation in \\'\"+t.spatialReference.wkid+\"\\' on an elevation service in \\'\"+i.wkid+\"\\'\");e.geometry=m.fromGeometry(n)},e.prototype._selectTiles=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t;return n.__generator(this,(function(n){switch(n.label){case 0:return t=e.options.demResolution,\"geometry\"===e.type&&this._preselectOutsideLayerExtent(e),\"number\"!=typeof t?[3,1]:(this._selectTilesClosestResolution(e),[3,6]);case 1:return\"finest-contiguous\"!==t?[3,3]:[4,this._selectTilesFinestContiguous(e)];case 2:return n.sent(),[3,6];case 3:return\"auto\"!==t?[3,5]:[4,this._selectTilesAuto(e)];case 4:return n.sent(),[3,6];case 5:throw new o(\"elevation-query:invalid-dem-resolution\",\"Invalid dem resolution value \\'\"+t+\\'\\\\\\', expected a number, \"finest-contiguous\" or \"auto\"\\');case 6:return[2]}}))}))},e.prototype._preselectOutsideLayerExtent=function(e){var t=new d.ElevationTile(null);t.sample=function(){return e.options.noDataValue},e.outsideExtentTile=t;var n=e.layer.fullExtent;e.geometry.coordinates.forEach((function(e){var i=e.x,r=e.y;(i<n.xmin||i>n.xmax||r<n.ymin||r>n.ymax)&&(e.elevationTile=t)}))},e.prototype._selectTilesClosestResolution=function(e){var t=e.layer.tileInfo,n=this._findNearestDemResolutionLODIndex(t,e.options.demResolution);e.selectTilesAtLOD(n)},e.prototype._findNearestDemResolutionLODIndex=function(e,t){for(var n=t/l.getMetersPerUnitForSR(e.spatialReference),i=e.lods[0],r=0,o=1;o<e.lods.length;o++){var a=e.lods[o];Math.abs(a.resolution-n)<Math.abs(i.resolution-n)&&(i=a,r=o)}return r},e.prototype._selectTilesFinestContiguous=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t;return n.__generator(this,(function(n){switch(n.label){case 0:return t=g(e.layer.tileInfo,e.options.minDemResolution),[4,this._selectTilesFinestContiguousAt(e,t)];case 1:return n.sent(),[2]}}))}))},e.prototype._selectTilesFinestContiguousAt=function(e,t){return n.__awaiter(this,void 0,void 0,(function(){var i,r,l,s;return n.__generator(this,(function(n){switch(n.label){case 0:if(i=e.layer,e.selectTilesAtLOD(t),t<0)return[2];r=i.tilemapCache,l=e.getTilesToFetch(),n.label=1;case 1:return n.trys.push([1,6,,8]),r?[4,a.all(l.map((function(t){return r.fetchAvailability(t.level,t.row,t.col,{signal:e.options.signal})})))]:[3,3];case 2:return n.sent(),[3,5];case 3:return[4,this._populateElevationTiles(e)];case 4:if(n.sent(),!e.allElevationTilesFetched())throw e.clearElevationTiles(),new o(\"elevation-query:has-unavailable-tiles\");n.label=5;case 5:return[3,8];case 6:if(s=n.sent(),a.isAbortError(s))throw s;return[4,this._selectTilesFinestContiguousAt(e,t-1)];case 7:return n.sent(),[3,8];case 8:return[2]}}))}))},e.prototype._populateElevationTiles=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,i,r;return n.__generator(this,(function(n){switch(n.label){case 0:return t=e.getTilesToFetch(),i={},r=t.map((function(t){return e.layer.fetchTile(t.level,t.row,t.col,{noDataValue:e.options.noDataValue,signal:e.options.signal}).then((function(e){return i[t.id]=new d.ElevationTile(t,e)}))})),[4,a.eachAlways(r)];case 1:return n.sent(),a.throwIfAborted(e.options.signal),e.populateElevationTiles(i),[2]}}))}))},e.prototype._selectTilesAuto=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,i,o,l,s=this;return n.__generator(this,(function(u){switch(u.label){case 0:return this._selectTilesAutoFinest(e),this._reduceTilesForMaximumRequests(e),(t=e.layer.tilemapCache)?(i=e.getTilesToFetch(),o={},l=i.map((function(i){return n.__awaiter(s,void 0,void 0,(function(){var l,s;return n.__generator(this,(function(n){switch(n.label){case 0:return l={id:null,level:0,row:0,col:0,extent:p.create()},[4,r.result(t.fetchAvailabilityUpsample(i.level,i.row,i.col,l,{signal:e.options.signal}))];case 1:if(!1===(s=n.sent()).ok&&a.isAbortError(s.error))throw s.error;return!0===s.ok&&(o[i.id]=l),[2]}}))}))})),[4,a.all(l)]):[2,this._selectTilesAutoPrefetchUpsample(e)];case 1:return u.sent(),e.remapTiles(o),[2]}}))}))},e.prototype._reduceTilesForMaximumRequests=function(e){var t=e.layer.tileInfo,n=0,i={},r=function(e){e.id in i?i[e.id]++:(i[e.id]=1,n++)},o=function(e){var t=i[e.id];1===t?(delete i[e.id],n--):i[e.id]=t-1};e.forEachTileToFetch(r,o);for(var a=!0;a&&(a=!1,e.forEachTileToFetch((function(i){n<=e.options.maximumAutoTileRequests||(o(i),t.upsampleTile(i)&&(a=!0),r(i))}),o),a););},e.prototype._selectTilesAutoFinest=function(e){var t=g(e.layer.tileInfo,e.options.minDemResolution);e.selectTilesAtLOD(t,e.options.maximumAutoTileRequests)},e.prototype._selectTilesAutoPrefetchUpsample=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,i;return n.__generator(this,(function(n){switch(n.label){case 0:return t=e.layer.tileInfo,[4,this._populateElevationTiles(e)];case 1:return n.sent(),i=!1,e.forEachTileToFetch((function(e,n){t.upsampleTile(e)?i=!0:n()})),i?[4,this._selectTilesAutoPrefetchUpsample(e)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},e.prototype._sampleGeometryWithElevation=function(e){e.geometry.coordinates.forEach((function(t){var n=t.elevationTile,i=e.options.noDataValue;if(n){var r=n.sample(t.x,t.y);void 0!==r?i=r:t.elevationTile=null}t.z=i}))},e.prototype._extractSampleInfo=function(e){var t=e.layer.tileInfo,n=l.getMetersPerUnitForSR(t.spatialReference);return e.geometry.coordinates.map((function(i){var r=-1;i.elevationTile&&i.elevationTile!==e.outsideExtentTile&&(r=t.lodAt(i.elevationTile.tile.level).resolution*n);return{demResolution:r}}))},e}();t.ElevationQuery=v;var m=function(){function e(){}return e.prototype.export=function(){return this._exporter(this.coordinates,this.spatialReference)},e.prototype.clone=function(t){var n=this,i=new e;return i.geometry=this.geometry,i.spatialReference=this.spatialReference,i.coordinates=t||this.coordinates.map((function(e){return n._cloneCoordinate(e)})),i._exporter=this._exporter,i},e.prototype.project=function(e){var t=this;if(this.spatialReference.equals(e))return this.clone();if(f.canProject(this.spatialReference,e)){var n=e.isWGS84?f.xyToLngLat:f.lngLatToXY,i=[0,0],r=this.coordinates.map((function(e){var r=t._cloneCoordinate(e);return n(r.x,r.y,i),r.x=i[0],r.y=i[1],r})),o=this.clone(r);return o.spatialReference=e,o}return null},e.prototype._cloneCoordinate=function(e){return{x:e.x,y:e.y,z:e.z,m:e.m,tile:null,elevationTile:null}},e.fromGeometry=function(t){var n=new e;if(n.geometry=t,n.spatialReference=t.spatialReference,t instanceof e)n.coordinates=t.coordinates.map((function(e){return n._cloneCoordinate(e)})),n._exporter=function(e,n){var i=t.clone(e);return i.spatialReference=n,i};else switch(t.type){case\"point\":var i=t;t.hasM?n.coordinates=[{x:i.x,y:i.y,m:i.m}]:n.coordinates=[{x:i.x,y:i.y}],n._exporter=function(e,n){return t.hasM?new u(e[0].x,e[0].y,e[0].z,e[0].m,n):new u(e[0].x,e[0].y,e[0].z,n)};break;case\"multipoint\":var r=t;n.coordinates=r.points.map((function(e){if(t.hasM){var n=t.hasZ?3:2;return{x:e[0],y:e[1],m:e[n]}}return{x:e[0],y:e[1]}})),n._exporter=function(e,n){return t.hasM?new s({points:e.map((function(e){return[e.x,e.y,e.z,e.m]})),hasZ:!0,hasM:!0,spatiaReference:n}):new s(e.map((function(e){return[e.x,e.y,e.z]})),n)};break;case\"polyline\":var o=[],a=[],l=0;t.paths.forEach((function(e){a.push([l,l+e.length]),l+=e.length,o.push.apply(o,e.map((function(e){if(t.hasM){var n=t.hasZ?3:2;return{x:e[0],y:e[1],m:e[n]}}return{x:e[0],y:e[1]}})))})),n.coordinates=o,n._exporter=function(e,n){var i=t.hasM?e.map((function(e){return[e.x,e.y,e.z,e.m]})):e.map((function(e){return[e.x,e.y,e.z]})),r=a.map((function(e){return i.slice(e[0],e[1])}));return new c({paths:r,hasM:t.hasM,hasZ:!0,spatialReference:n})}}return n},e}();t.GeometryDescriptor=m;var y=function(e,t){this.layer=e,this.options=t},_=function(e){function t(t,n,i){var r=e.call(this,t,i)||this;return r.type=\"geometry\",r.outSpatialReference=n,r}return n.__extends(t,e),t.prototype.selectTilesAtLOD=function(e){if(e<0)this.geometry.coordinates.forEach((function(e){return e.tile=null}));else{var t=this.layer.tileInfo,n=t.lods[e].level;this.geometry.coordinates.forEach((function(e){e.tile=t.tileAt(n,e.x,e.y)}))}},t.prototype.allElevationTilesFetched=function(){return!this.geometry.coordinates.some((function(e){return!e.elevationTile}))},t.prototype.clearElevationTiles=function(){for(var e=0,t=this.geometry.coordinates;e<t.length;e++){var n=t[e];n.elevationTile!==this.outsideExtentTile&&(n.elevationTile=null)}},t.prototype.populateElevationTiles=function(e){for(var t=0,n=this.geometry.coordinates;t<n.length;t++){var i=n[t];!i.elevationTile&&i.tile&&(i.elevationTile=e[i.tile.id])}},t.prototype.remapTiles=function(e){for(var t=0,n=this.geometry.coordinates;t<n.length;t++){var i=n[t];i.tile=e[i.tile.id]}},t.prototype.getTilesToFetch=function(){for(var e={},t=[],n=0,i=this.geometry.coordinates;n<i.length;n++){var r=i[n],o=r.tile;r.elevationTile||!r.tile||e[o.id]||(e[o.id]=o,t.push(o))}return t},t.prototype.forEachTileToFetch=function(e){for(var t=function(t){t.tile&&!t.elevationTile&&e(t.tile,(function(){return t.tile=null}))},n=0,i=this.geometry.coordinates;n<i.length;n++){t(i[n])}},t}(y),T=function(e){function t(t,n,i,r){var o=e.call(this,t,i)||this;return o.type=\"extent\",o.elevationTiles=[],o.candidateTiles=[],o.fetchedCandidates=new Set,o.extent=n.intersection(t.fullExtent),o.maskExtents=r,o}return n.__extends(t,e),t.prototype.selectTilesAtLOD=function(e,t){var n=this._maximumLodForRequests(t),i=Math.min(n,e);i<0?this.candidateTiles.length=0:this._selectCandidateTilesCoveringExtentAt(i)},t.prototype._maximumLodForRequests=function(e){var t=this.layer.tileInfo;if(!e)return t.lods.length-1;for(var n=this.extent,i=t.lods.length-1;i>=0;i--){var r=t.lods[i],o=r.resolution*t.size[0],a=r.resolution*t.size[1];if(Math.ceil(n.width/o)*Math.ceil(n.height/a)<=e)return i}return-1},t.prototype.allElevationTilesFetched=function(){return this.candidateTiles.length===this.elevationTiles.length},t.prototype.clearElevationTiles=function(){this.elevationTiles.length=0,this.fetchedCandidates.clear()},t.prototype.populateElevationTiles=function(e){for(var t=0,n=this.candidateTiles;t<n.length;t++){var i=n[t],r=e[i.id];r&&(this.fetchedCandidates.add(i),this.elevationTiles.push(r))}},t.prototype.remapTiles=function(e){this.candidateTiles=this._uniqueNonOverlappingTiles(this.candidateTiles.map((function(t){return e[t.id]})))},t.prototype.getTilesToFetch=function(){return this.candidateTiles},t.prototype.forEachTileToFetch=function(e,t){var n=this,i=this.candidateTiles;this.candidateTiles=[],i.forEach((function(i){if(n.fetchedCandidates.has(i))t&&t(i);else{var r=!1;e(i,(function(){return r=!0})),r?t&&t(i):n.candidateTiles.push(i)}})),this.candidateTiles=this._uniqueNonOverlappingTiles(this.candidateTiles,t)},t.prototype._uniqueNonOverlappingTiles=function(e,t){for(var n={},i=[],r=0,o=e;r<o.length;r++){var a=o[r];n[a.id]?t&&t(a):(n[a.id]=a,i.push(a))}var l=i.sort((function(e,t){return e.level-t.level}));return l.filter((function(e,n){for(var i=0;i<n;i++)if(p.contains(l[i].extent,e.extent))return t&&t(e),!1;return!0}))},t.prototype._selectCandidateTilesCoveringExtentAt=function(e){this.candidateTiles.length=0;for(var t=this.layer.tileInfo,n=t.lods[e],i=this.extent,r=t.tileAt(n.level,i.xmin,i.ymin),o=n.resolution*t.size[0],a=n.resolution*t.size[1],l=Math.ceil((i.xmax-r.extent[0])/o),s=Math.ceil((i.ymax-r.extent[1])/a),u=0;u<s;u++)for(var c=0;c<l;c++){var p={id:null,level:r.level,row:r.row-u,col:r.col+c};t.updateTileInfo(p),this._tileIsMasked(p)||this.candidateTiles.push(p)}},t.prototype._tileIsMasked=function(e){return!!this.maskExtents&&this.maskExtents.some((function(t){return p.contains(t,e.extent)}))},t}(y);function g(e,t){var n=e.lods.length-1;if(t>0){var r=i.findIndex(e.lods,(function(e){return e.resolution<t}));0===r?n=0:r>0&&(n=r-1)}return n}t.getFinestLodIndex=g,t.default=v}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/ElevationQuery.js?')},\"./node_modules/arcgis-js-api/layers/support/ElevationSampler.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../geometry */ \"./node_modules/arcgis-js-api/geometry.js\"),__webpack_require__(/*! ../../core/compilerUtils */ \"./node_modules/arcgis-js-api/core/compilerUtils.js\"),__webpack_require__(/*! ../../core/Logger */ \"./node_modules/arcgis-js-api/core/Logger.js\"),__webpack_require__(/*! ../../core/unitUtils */ \"./node_modules/arcgis-js-api/core/unitUtils.js\"),__webpack_require__(/*! ../../geometry/support/aaBoundingRect */ \"./node_modules/arcgis-js-api/geometry/support/aaBoundingRect.js\"),__webpack_require__(/*! ../../geometry/support/contains */ \"./node_modules/arcgis-js-api/geometry/support/contains.js\"),__webpack_require__(/*! ../../geometry/support/webMercatorUtils */ \"./node_modules/arcgis-js-api/geometry/support/webMercatorUtils.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,n,r,a,i,o,l,s,u){Object.defineProperty(t,\"__esModule\",{value:!0});var p=i.getLogger(\"esri.layers.support.ElevationSampler\"),c=function(){function e(){}return e.prototype.queryElevation=function(e){return v(e.clone(),this)},e.prototype.on=function(){return d},e.prototype.projectIfRequired=function(e,t){return h(e,t)},e}();t.ElevationSamplerBase=c;var f=function(e){function t(t,n,r){var a=e.call(this)||this;a.tile=t,a.noDataValue=r,a.extent=l.toExtent(t.tile.extent,n.spatialReference);var i=o.getMetersPerUnitForSR(n.spatialReference),s=n.lodAt(t.tile.level).resolution*i;return a.demResolution={min:s,max:s},a}return n.__extends(t,e),Object.defineProperty(t.prototype,\"spatialReference\",{get:function(){return this.extent.spatialReference},enumerable:!0,configurable:!0}),t.prototype.contains=function(e){var t=this.projectIfRequired(e,this.spatialReference);return s.extentContainsPoint(this.extent,t)},t.prototype.elevationAt=function(e){var t=this.projectIfRequired(e,this.spatialReference);if(!t)return null;if(!this.contains(e)){var n=this.extent,r=n.xmin+\", \"+n.ymin+\", \"+n.xmax+\", \"+n.ymax;p.warn(\"#elevationAt()\",\"Point used to sample elevation (\"+e.x+\", \"+e.y+\") is outside of the sampler extent (\"+r+\")\")}return this.tile.sample(t.x,t.y)},t}(c);t.TileElevationSampler=f;var m=function(e){function t(t,n,r){var a,i=e.call(this)||this;\"number\"==typeof n?(i.noDataValue=n,a=null):(a=n,i.noDataValue=r),i.samplers=a?t.map((function(e){return new f(e,a,i.noDataValue)})):t;var o=i.samplers[0];if(o){i.extent=o.extent.clone();var s=o.demResolution,u=s.min,p=s.max;i.demResolution={min:u,max:p};for(var c=1;c<i.samplers.length;c++){var m=i.samplers[c];i.extent.union(m.extent),i.demResolution.min=Math.min(i.demResolution.min,m.demResolution.min),i.demResolution.max=Math.max(i.demResolution.max,m.demResolution.max)}}else i.extent=l.toExtent(l.create(),a.spatialReference),i.demResolution={min:0,max:0};return i}return n.__extends(t,e),Object.defineProperty(t.prototype,\"spatialReference\",{get:function(){return this.extent.spatialReference},enumerable:!0,configurable:!0}),t.prototype.elevationAt=function(e){var t=this.projectIfRequired(e,this.spatialReference);if(!t)return null;for(var n=0,r=this.samplers;n<r.length;n++){var a=r[n];if(a.contains(t))return a.elevationAt(t)}return p.warn(\"#elevationAt()\",\"Point used to sample elevation (\"+e.x+\", \"+e.y+\") is outside of the sampler\"),null},t}(c);function v(e,t){var n=h(e,t.spatialReference);if(!n)return null;switch(e.type){case\"point\":!function(e,t,n){e.z=n.elevationAt(t)||0}(e,n,t);break;case\"polyline\":!function(e,t,n){x.spatialReference=t.spatialReference;for(var r=e.hasM&&!e.hasZ,a=0;a<e.paths.length;a++)for(var i=e.paths[a],o=t.paths[a],l=0;l<i.length;l++){var s=i[l],u=o[l];x.x=u[0],x.y=u[1];var p=n.elevationAt(x)||0;r&&(s[3]=s[2]),s[2]=p}e.hasZ=!0}(e,n,t);break;case\"multipoint\":!function(e,t,n){x.spatialReference=t.spatialReference;for(var r=e.hasM&&!e.hasZ,a=0;a<e.points.length;a++){var i=e.points[a],o=t.points[a];x.x=o[0],x.y=o[1];var l=n.elevationAt(x)||0;r&&(i[3]=i[2]),i[2]=l}e.hasZ=!0}(e,n,t);break;default:a.neverReached(e)}return e}function h(e,t){var n=e.spatialReference;return n.equals(t)?e:u.canProject(n,t)?u.project(e,t):(p.error(\"Cannot project geometry spatial reference (wkid:\"+n.wkid+\") to elevation sampler spatial reference (wkid:\"+t.wkid+\")\"),null)}t.MultiTileElevationSampler=m,t.updateGeometryElevation=v;var x=new r.Point,d={remove:function(){}}}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/ElevationSampler.js?')},\"./node_modules/arcgis-js-api/layers/support/ElevationTile.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports], __WEBPACK_AMD_DEFINE_RESULT__ = (function(t,e){Object.defineProperty(e,\"__esModule\",{value:!0});var a=function(){function t(t,e){if(this.tile=t,e){var a=this.tile.extent;this.samplerData={pixelData:e.values,width:e.width,height:e.height,safeWidth:.99999999*(e.width-1),noDataValue:e.noDataValue,dx:(e.width-1)/(a[2]-a[0]),dy:(e.width-1)/(a[3]-a[1]),x0:a[0],y1:a[3]}}else this.samplerData=null}return t.prototype.sample=function(t,e){if(this.samplerData)return function(t,e,a){var r=t.safeWidth,n=t.width,l=t.pixelData,h=t.noDataValue,u=i(t.dy*(t.y1-a),0,r),o=i(t.dx*(e-t.x0),0,r),s=Math.floor(u),d=Math.floor(o),f=s*n+d,p=f+n,D=l[f],x=l[p],c=l[f+1],v=l[p+1];if(D!==h&&x!==h&&c!==h&&v!==h){var w=o-d,y=D+(c-D)*w;return y+(x+(v-x)*w-y)*(u-s)}return}(this.samplerData,t,e)},t}();function i(t,e,a){return t<e?e:t>a?a:t}e.ElevationTile=a,e.default=a}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/ElevationTile.js?')}}]);","extractedComments":[]}