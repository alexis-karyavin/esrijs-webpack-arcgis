{"code":"(function(){(this||window).webpackJsonp.registerAbsMids({\"esri/layers/graphics/data/AttributesBuilder\":\"./node_modules/arcgis-js-api/layers/graphics/data/AttributesBuilder.js\",\"esri/layers/graphics/data/BoundsStore\":\"./node_modules/arcgis-js-api/layers/graphics/data/BoundsStore.js\",\"esri/layers/graphics/data/FeatureStore\":\"./node_modules/arcgis-js-api/layers/graphics/data/FeatureStore.js\",\"esri/layers/graphics/data/QueryEngine\":\"./node_modules/arcgis-js-api/layers/graphics/data/QueryEngine.js\",\"esri/layers/graphics/data/QueryEngineCapabilities\":\"./node_modules/arcgis-js-api/layers/graphics/data/QueryEngineCapabilities.js\",\"esri/layers/graphics/data/QueryEngineResult\":\"./node_modules/arcgis-js-api/layers/graphics/data/QueryEngineResult.js\",\"esri/layers/graphics/data/executeTileQuery\":\"./node_modules/arcgis-js-api/layers/graphics/data/executeTileQuery.js\",\"esri/layers/support/PromiseQueue\":\"./node_modules/arcgis-js-api/layers/support/PromiseQueue.js\"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{\"./node_modules/arcgis-js-api/layers/graphics/data/AttributesBuilder.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! ../../../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ./attributeSupport */ \"./node_modules/arcgis-js-api/layers/graphics/data/attributeSupport.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,a,i){Object.defineProperty(t,\"__esModule\",{value:!0});var s=function(){function e(e,t,a){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=e.returnDistinctValues,this.fieldsIndex=a,this.featureAdapter=t;var s=e.outFields;if(s&&-1===s.indexOf(\"*\")){this.outFields=s;for(var r=0,u=0,l=s;u<l.length;u++){var n=l[u],h=i.getExpressionFromFieldName(n),c=this.fieldsIndex.get(h),o=c?null:i.getWhereClause(h,a),d=c?c.name:i.getAliasFromFieldName(n)||\"FIELD_EXP_\"+r++;this._fieldDataCache.set(n,{alias:d,clause:o})}}}return e.prototype.getAttributes=function(e){var t=this._processAttributesForOutFields(e);return this._processAttributesForDistinctValues(t)},e.prototype.getFieldValue=function(e,t,a){var s=a?a.name:t,r=null;return this._fieldDataCache.has(s)?r=this._fieldDataCache.get(s).clause:a||(r=i.getWhereClause(t,this.fieldsIndex),this._fieldDataCache.set(s,{alias:s,clause:r})),a?this.featureAdapter.getAttribute(e,s):r.calculateValue(e,this.featureAdapter)},e.prototype.validateItem=function(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:i.getWhereClause(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testFeature(e,this.featureAdapter)},e.prototype.validateItems=function(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:i.getWhereClause(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testSet(e,this.featureAdapter)},e.prototype._processAttributesForOutFields=function(e){var t=this.outFields;if(!t||!t.length)return this.featureAdapter.getAttributes(e);for(var a={},i=0,s=t;i<s.length;i++){var r=s[i],u=this._fieldDataCache.get(r),l=u.alias,n=u.clause;a[l]=n?n.calculateValue(e,this.featureAdapter):this.featureAdapter.getAttribute(e,l)}return a},e.prototype._processAttributesForDistinctValues=function(e){if(a.isNone(e)||!this.returnDistinctValues)return e;var t=this.outFields,i=[];if(t)for(var s=0,r=t;s<r.length;s++){var u=r[s],l=this._fieldDataCache.get(u).alias;i.push(e[l])}else for(var l in e)i.push(e[l]);var n=(t||[\"*\"]).join(\",\")+\"=\"+i.join(\",\"),h=this._returnDistinctMap.get(n)||0;return this._returnDistinctMap.set(n,++h),h>1?null:e},e}();t.default=s}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/graphics/data/AttributesBuilder.js?')},\"./node_modules/arcgis-js-api/layers/graphics/data/BoundsStore.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! ../../../core/has */ \"./node_modules/arcgis-js-api/core/has.js\"),__webpack_require__(/*! ../../../core/libs/rbush/rbush */ \"./node_modules/arcgis-js-api/core/libs/rbush/rbush.js\"),__webpack_require__(/*! @dojo/framework/shim/Promise */ \"./node_modules/@dojo/framework/shim/Promise.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(n,i,e,d){Object.defineProperty(i,\"__esModule\",{value:!0});var t={minX:0,minY:0,maxX:0,maxY:0};var o=function(){function n(){var n=this;this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=d(9,e(\"csp-restrictions\")?function(n){return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}}:[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=function(){if(n._indexInvalid){var i=new Array(n._idByBounds.size),e=0;n._idByBounds.forEach((function(n,d){i[e++]=d})),n._indexInvalid=!1,n._index.clear(),n._index.load(i)}else n._boundsToLoad.length&&(n._index.load(n._boundsToLoad.filter((function(i){return n._idByBounds.has(i)}))),n._boundsToLoad.length=0)}}return n.prototype.clear=function(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()},n.prototype.delete=function(n){var i=this._boundsById.get(n);this._boundsById.delete(n),i&&(this._idByBounds.delete(i),this._indexInvalid||this._index.remove(i))},n.prototype.forEachInBounds=function(n,i){this._loadIndex();for(var e=0,d=function(n,i){return t.minX=i[0],t.minY=i[1],t.maxX=i[2],t.maxY=i[3],n.search(t)}(this._index,n);e<d.length;e++){var o=d[e];i(this._idByBounds.get(o))}},n.prototype.get=function(n){return this._boundsById.get(n)},n.prototype.has=function(n){return this._boundsById.has(n)},n.prototype.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)},n.prototype.set=function(n,i){if(!this._indexInvalid){var e=this._boundsById.get(n);e&&(this._index.remove(e),this._idByBounds.delete(e))}this._boundsById.set(n,i),i&&(this._idByBounds.set(i,n),this._indexInvalid||(this._boundsToLoad.push(i),this._boundsToLoad.length>5e4&&this._loadIndex()))},n}();i.BoundsStore=o}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/graphics/data/BoundsStore.js?')},\"./node_modules/arcgis-js-api/layers/graphics/data/FeatureStore.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../../core/Error */ \"./node_modules/arcgis-js-api/core/Error.js\"),__webpack_require__(/*! ../../../core/Evented */ \"./node_modules/arcgis-js-api/core/Evented.js\"),__webpack_require__(/*! ../../../core/Logger */ \"./node_modules/arcgis-js-api/core/Logger.js\"),__webpack_require__(/*! ../../../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../../../geometry/support/aaBoundingBox */ \"./node_modules/arcgis-js-api/geometry/support/aaBoundingBox.js\"),__webpack_require__(/*! ../../../geometry/support/aaBoundingRect */ \"./node_modules/arcgis-js-api/geometry/support/aaBoundingRect.js\"),__webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils */ \"./node_modules/arcgis-js-api/geometry/support/spatialReferenceUtils.js\"),__webpack_require__(/*! ../featureConversionUtils */ \"./node_modules/arcgis-js-api/layers/graphics/featureConversionUtils.js\"),__webpack_require__(/*! ./BoundsStore */ \"./node_modules/arcgis-js-api/layers/graphics/data/BoundsStore.js\"),__webpack_require__(/*! ./executeTileQuery */ \"./node_modules/arcgis-js-api/layers/graphics/data/executeTileQuery.js\"),__webpack_require__(/*! ./optimizedFeatureQueryEngineAdapter */ \"./node_modules/arcgis-js-api/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,r,o,n,i,s,a,u,d,h,f,c,y){Object.defineProperty(t,\"__esModule\",{value:!0});var l=i.getLogger(\"esri.layers.graphics.data.FeatureStore\"),p=function(){function e(e){this.geometryInfo=e,this._boundsStore=new f.BoundsStore,this._featuresById=new Map,this._markedIds=new Set,this.events=new n,this.featureAdapter=y.optimizedFeatureQueryEngineAdapter}return Object.defineProperty(e.prototype,\"geometryType\",{get:function(){return this.geometryInfo.geometryType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"hasM\",{get:function(){return this.geometryInfo.hasM},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"hasZ\",{get:function(){return this.geometryInfo.hasZ},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"numFeatures\",{get:function(){return this._featuresById.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"fullBounds\",{get:function(){var e=this;if(!this.numFeatures)return null;var t=u.create(u.NEGATIVE_INFINITY);return this._featuresById.forEach((function(r){var o=e._boundsStore.get(r.objectId);o&&(t[0]=Math.min(o[0],t[0]),t[1]=Math.min(o[1],t[1]),t[2]=Math.max(o[2],t[2]),t[3]=Math.max(o[3],t[3]))})),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"storeStatistics\",{get:function(){var e=0;return this._featuresById.forEach((function(t){t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}},enumerable:!0,configurable:!0}),e.prototype.add=function(e){this._add(e),this._emitChanged()},e.prototype.addMany=function(e){for(var t=0,r=e;t<r.length;t++){var o=r[t];this._add(o)}this._emitChanged()},e.prototype.clear=function(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()},e.prototype.removeById=function(e){var t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null},e.prototype.removeManyById=function(e){this._boundsStore.invalidateIndex();for(var t=0,r=e;t<r.length;t++){var o=r[t],n=this._featuresById.get(o);n&&this._remove(n)}this._emitChanged()},e.prototype.forEachBounds=function(e,t,r){for(var o=0,n=e;o<n.length;o++){var i=n[o],s=this._boundsStore.get(i.objectId);s&&t(a.fromRect(r,s))}},e.prototype.getFeature=function(e){return this._featuresById.get(e)},e.prototype.has=function(e){return this._featuresById.has(e)},e.prototype.forEach=function(e){this._featuresById.forEach((function(t){return e(t)}))},e.prototype.forEachInBounds=function(e,t){var r=this;this._boundsStore.forEachInBounds(e,(function(e){t(r._featuresById.get(e))}))},e.prototype.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex(),this._markedIds.clear()},e.prototype.sweep=function(){var e=this,t=!1;this._featuresById.forEach((function(r,o){e._markedIds.has(o)||(t=!0,e._remove(r))})),this._markedIds.clear(),t&&this._emitChanged()},e.prototype.executeTileQuery=function(e,t,o){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s,a,h,f,y,l,p,g,m,_,I,b;return r.__generator(this,(function(r){return n=o.returnGeometry,i=o.returnCentroid,s=o.returnOutline,a=o.pixelBuffer,h=new Set,f=[],y=a*e.resolution,l=u.pad(e.bounds,y,u.create()),c.createTileFeatures(f,h,this.geometryInfo,this,l,n,i,s,{originPosition:\"upperLeft\",scale:[e.resolution,e.resolution],translate:[e.bounds[0],e.bounds[3]]}),(\"esriGeometryPoint\"===this.geometryType||i)&&(p=d.getInfo(t))&&(g=p.valid,m=g[0],_=g[1],l[0]<m&&(I=u.fromValues(_-y,l[1],_,l[3]),c.createTileFeatures(f,h,this.geometryInfo,this,I,n,i,s,{originPosition:\"upperLeft\",scale:[e.resolution,e.resolution],translate:[_,e.bounds[3]]})),l[2]>_&&(b=u.fromValues(m,l[1],m+y,l[3]),c.createTileFeatures(f,h,this.geometryInfo,this,b,n,i,s,{originPosition:\"upperLeft\",scale:[e.resolution,e.resolution],translate:[m-_+e.bounds[0],e.bounds[3]]}))),f.sort((function(e,t){return e.localId-t.localId})),[2,{features:f,objectIds:h}]}))}))},e.prototype._emitChanged=function(){this.events.emit(\"changed\",void 0)},e.prototype._add=function(e){if(e){var t=e.objectId;if(null!=t){var r,n=this._featuresById.get(t);if(this._markedIds.add(t),n?(e.localId=n.localId,r=this._boundsStore.get(t),this._boundsStore.delete(t)):s.isSome(this.onFeatureAdd)&&this.onFeatureAdd(e),!e.geometry||!e.geometry.coords||!e.geometry.coords.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);r=h.getBoundsOptimizedGeometry(r||u.create(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(t,r),this._featuresById.set(t,e)}else l.error(new o(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:e}))}},e.prototype._remove=function(e){return s.isSome(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e},e}();t.default=p}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/graphics/data/FeatureStore.js?')},\"./node_modules/arcgis-js-api/layers/graphics/data/QueryEngine.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../../core/Error */ \"./node_modules/arcgis-js-api/core/Error.js\"),__webpack_require__(/*! ../../../core/lang */ \"./node_modules/arcgis-js-api/core/lang.js\"),__webpack_require__(/*! ../../../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../../../core/MemCache */ \"./node_modules/arcgis-js-api/core/MemCache.js\"),__webpack_require__(/*! ../../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../../core/SetUtils */ \"./node_modules/arcgis-js-api/core/SetUtils.js\"),__webpack_require__(/*! ../../../core/unitUtils */ \"./node_modules/arcgis-js-api/core/unitUtils.js\"),__webpack_require__(/*! ../../../geometry/support/aaBoundingBox */ \"./node_modules/arcgis-js-api/geometry/support/aaBoundingBox.js\"),__webpack_require__(/*! ../../../geometry/support/aaBoundingRect */ \"./node_modules/arcgis-js-api/geometry/support/aaBoundingRect.js\"),__webpack_require__(/*! ../../../geometry/support/boundsUtils */ \"./node_modules/arcgis-js-api/geometry/support/boundsUtils.js\"),__webpack_require__(/*! ../../../geometry/support/jsonUtils */ \"./node_modules/arcgis-js-api/geometry/support/jsonUtils.js\"),__webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils */ \"./node_modules/arcgis-js-api/geometry/support/spatialReferenceUtils.js\"),__webpack_require__(/*! ./attributeSupport */ \"./node_modules/arcgis-js-api/layers/graphics/data/attributeSupport.js\"),__webpack_require__(/*! ./projectionSupport */ \"./node_modules/arcgis-js-api/layers/graphics/data/projectionSupport.js\"),__webpack_require__(/*! ./QueryEngineCapabilities */ \"./node_modules/arcgis-js-api/layers/graphics/data/QueryEngineCapabilities.js\"),__webpack_require__(/*! ./QueryEngineResult */ \"./node_modules/arcgis-js-api/layers/graphics/data/QueryEngineResult.js\"),__webpack_require__(/*! ./spatialQuerySupport */ \"./node_modules/arcgis-js-api/layers/graphics/data/spatialQuerySupport.js\"),__webpack_require__(/*! ./timeSupport */ \"./node_modules/arcgis-js-api/layers/graphics/data/timeSupport.js\"),__webpack_require__(/*! ./utils */ \"./node_modules/arcgis-js-api/layers/graphics/data/utils.js\"),__webpack_require__(/*! ../../support/FieldsIndex */ \"./node_modules/arcgis-js-api/layers/support/FieldsIndex.js\"),__webpack_require__(/*! ../../support/PromiseQueue */ \"./node_modules/arcgis-js-api/layers/support/PromiseQueue.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,r,n,i,s,u,a,o,c,h,l,f,d,p,y,_,m,g,x,v,Q,S,w){Object.defineProperty(t,\"__esModule\",{value:!0});var b=function(e,t,r,n,i){void 0===t&&(t=null),this.attributes=e,this.geometry=r,this.centroid=n,this.filterFlags=i,this.groupId=-1,this.localId=t};t.Feature=b;var E=new Set,R=new u.MemCacheStorage(2e6),I=0,F=function(){function e(e){var t=this;this.capabilities={query:m.queryCapabilities},this.geometryType=e.geometryType,this.hasM=e.hasM,this.hasZ=e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.featureStore=e.featureStore,this._changeHandle=this.featureStore.events.on(\"changed\",(function(){return t.clearCache()})),this.timeInfo=e.timeInfo,e.cacheSpatialQueries&&(this._geometryQueryCache=new u.MemCache(I+++\"$$\",R)),this.fieldsIndex=new S(e.fields),e.scheduler&&e.task&&(this._frameQueue=new w.default,this._frameTask=e.scheduler.registerTask(e.task,(function(e){return t._update(e)}),(function(){return t._frameQueue.length>0})))}return e.prototype.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null),this.clearCache(),this._geometryQueryCache&&this._geometryQueryCache.destroy(),this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null),this.fieldsIndex.destroy()},Object.defineProperty(e.prototype,\"featureAdapter\",{get:function(){return this.featureStore.featureAdapter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"fullExtent\",{get:function(){var e=this.featureStore.fullBounds;return e?{xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:Q.cleanFromGeometryEngine(this.spatialReference)}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"timeExtent\",{get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:(this._timeExtent=v.getTimeExtent(this.timeInfo,this.featureStore),this._timeExtent):null},enumerable:!0,configurable:!0}),e.prototype.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear(),this._allItems=null,this._timeExtent=null},e.prototype.executeQuery=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var t,n,s,u=this;return r.__generator(this,(function(r){switch(r.label){case 0:t=i.clone(e),r.label=1;case 1:return r.trys.push([1,8,,9]),[4,this._schedule((function(){return Q.normalizeQuery(t,u.definitionExpression,u.spatialReference)}))];case 2:return t=r.sent(),[4,this._reschedule((function(){return u._checkQuerySupport(t)}))];case 3:return t=r.sent(),[4,this._reschedule((function(){return u._executeGeometryQuery(t)}))];case 4:return n=r.sent(),[4,this._reschedule((function(){return n.executeObjectIdsQuery(t)}))];case 5:return n=r.sent(),[4,this._reschedule((function(){return n.executeTimeQuery(t)}))];case 6:return n=r.sent(),[4,this._reschedule((function(){return n.executeAttributesQuery(t)}))];case 7:return n=r.sent(),[3,9];case 8:if((s=r.sent())!==Q.QUERY_ENGINE_EMPTY_RESULT)throw s;return n=new g.default([],null,this),[3,9];case 9:return[2,n.createQueryResponse(t)]}}))}))},e.prototype.executeQueryForCount=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var t,n,s,u=this;return r.__generator(this,(function(r){switch(r.label){case 0:(t=i.clone(e)).returnGeometry=!1,t.returnCentroid=!1,t.outSR=null,r.label=1;case 1:return r.trys.push([1,8,,9]),[4,this._schedule((function(){return Q.normalizeQuery(t,u.definitionExpression,u.spatialReference)}))];case 2:return t=r.sent(),[4,this._reschedule((function(){return u._checkQuerySupport(t)}))];case 3:return t=r.sent(),[4,this._reschedule((function(){return u._executeGeometryQuery(t)}))];case 4:return n=r.sent(),[4,this._reschedule((function(){return n.executeObjectIdsQuery(t)}))];case 5:return n=r.sent(),[4,this._reschedule((function(){return n.executeTimeQuery(t)}))];case 6:return n=r.sent(),[4,this._reschedule((function(){return n.executeAttributesQuery(t)}))];case 7:return[2,(n=r.sent()).size];case 8:if((s=r.sent())!==Q.QUERY_ENGINE_EMPTY_RESULT)throw s;return[2,0];case 9:return[2]}}))}))},e.prototype.executeQueryForExtent=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var t,n,s,u,a,o,l,f,d=this;return r.__generator(this,(function(r){switch(r.label){case 0:t=i.clone(e),s=t.outSR,r.label=1;case 1:return r.trys.push([1,8,,9]),[4,this._schedule((function(){return Q.normalizeQuery(t,d.definitionExpression,d.spatialReference)}))];case 2:return t=r.sent(),[4,this._reschedule((function(){return d._checkQuerySupport(t)}))];case 3:return(t=r.sent()).returnGeometry=!0,t.returnCentroid=!1,t.outSR=null,[4,this._reschedule((function(){return d._executeGeometryQuery(t)}))];case 4:return n=r.sent(),[4,this._reschedule((function(){return n.executeObjectIdsQuery(t)}))];case 5:return n=r.sent(),[4,this._reschedule((function(){return n.executeTimeQuery(t)}))];case 6:return n=r.sent(),[4,this._reschedule((function(){return n.executeAttributesQuery(t)}))];case 7:return n=r.sent(),(u=n.size)?(h.set(C,h.NEGATIVE_INFINITY),this.featureStore.forEachBounds(n.items,(function(e){return h.expand(C,e)}),T),a={xmin:C[0],ymin:C[1],xmax:C[3],ymax:C[4],spatialReference:Q.cleanFromGeometryEngine(this.spatialReference)},this.hasZ&&isFinite(C[2])&&isFinite(C[5])&&(a.zmin=C[2],a.zmax=C[5]),(o=_.project(a,n.spatialReference,s)).spatialReference=Q.cleanFromGeometryEngine(s||this.spatialReference),o.xmax-o.xmin==0&&(l=c.getMetersPerUnitForSR(o.spatialReference),o.xmin-=l,o.xmax+=l),o.ymax-o.ymin==0&&(l=c.getMetersPerUnitForSR(o.spatialReference),o.ymin-=l,o.ymax+=l),this.hasZ&&null!=o.zmin&&null!=o.zmax&&o.zmax-o.zmin==0&&(l=c.getMetersPerUnitForSR(o.spatialReference),o.zmin-=l,o.zmax+=l),[2,{count:u,extent:o}]):[2,{count:u,extent:null}];case 8:if((f=r.sent())===Q.QUERY_ENGINE_EMPTY_RESULT)return[2,{count:0,extent:null}];throw f;case 9:return[2]}}))}))},e.prototype.executeQueryForIds=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){return[2,this.executeQueryForIdSet(e,t).then((function(e){return o.valuesOfSet(e)}))]}))}))},e.prototype.executeQueryForIdSet=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var t,n,s,u,a,o=this;return r.__generator(this,(function(r){switch(r.label){case 0:(t=i.clone(e)).returnGeometry=!1,t.returnCentroid=!1,t.outSR=null,r.label=1;case 1:return r.trys.push([1,9,,10]),[4,this._schedule((function(){return Q.normalizeQuery(t,o.definitionExpression,o.spatialReference)}))];case 2:return t=r.sent(),[4,this._reschedule((function(){return o._checkQuerySupport(t)}))];case 3:return t=r.sent(),[4,this._reschedule((function(){return o._executeGeometryQuery(t)}))];case 4:return n=r.sent(),[4,this._reschedule((function(){return n.executeObjectIdsQuery(t)}))];case 5:return n=r.sent(),[4,this._reschedule((function(){return n.executeTimeQuery(t)}))];case 6:return n=r.sent(),[4,this._reschedule((function(){return n.executeAttributesQuery(t)}))];case 7:return n=r.sent(),s=n.items,u=new Set,[4,this._reschedule((function(){for(var e=0,t=s;e<t.length;e++){var r=t[e];u.add(n.featureAdapter.getObjectId(r))}}))];case 8:return r.sent(),[2,u];case 9:if((a=r.sent())===Q.QUERY_ENGINE_EMPTY_RESULT)return[2,new Set];throw a;case 10:return[2]}}))}))},e.prototype.executeQueryForLatestObservations=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var t,s,u,a=this;return r.__generator(this,(function(r){switch(r.label){case 0:if(!this.timeInfo||!this.timeInfo.trackIdField)throw new n(\"feature-store:unsupported-query\",\"Missing timeInfo or timeInfo.trackIdField\",{query:e,timeInfo:this.timeInfo});t=i.clone(e),r.label=1;case 1:return r.trys.push([1,9,,10]),[4,this._schedule((function(){return Q.normalizeQuery(t,a.definitionExpression,a.spatialReference)}))];case 2:return t=r.sent(),[4,this._reschedule((function(){return a._checkQuerySupport(t)}))];case 3:return t=r.sent(),[4,this._reschedule((function(){return a._executeGeometryQuery(t)}))];case 4:return s=r.sent(),[4,this._reschedule((function(){return s.executeObjectIdsQuery(t)}))];case 5:return s=r.sent(),[4,this._reschedule((function(){return s.executeTimeQuery(t)}))];case 6:return s=r.sent(),[4,this._reschedule((function(){return s.executeAttributesQuery(t)}))];case 7:return s=r.sent(),[4,this._reschedule((function(){return s.filterLatest()}))];case 8:return s=r.sent(),[3,10];case 9:if((u=r.sent())!==Q.QUERY_ENGINE_EMPTY_RESULT)throw u;return s=new g.default([],null,this),[3,10];case 10:return[2,s.createQueryResponse(t)]}}))}))},e.prototype._schedule=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this._frameQueue?[2,this._frameQueue.push(e)]:[2,e()]}))}))},e.prototype._reschedule=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this._frameQueue?[2,this._frameQueue.unshift(e)]:[2,e()]}))}))},e.prototype._update=function(e){for(this._budget=e;!e.done&&this._frameQueue&&this._frameQueue.process();)e.madeProgress();this._budget=null},e.prototype._getAll=function(){if(!this._allItems){var e=[];this.featureStore.forEach((function(t){return e.push(t)})),this._allItems=new g.default(e,null,this)}return this._allItems},e.prototype._executeGeometryQuery=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,u,a,o,c,h,l,f,d,y,_,m,v,Q,S,w,b,E=this;return r.__generator(this,(function(R){switch(R.label){case 0:if(t=e.geometry,n=e.outSR,i=e.spatialRel,u=p.isValid(n)&&!p.equals(this.spatialReference,n),(a=this._geometryQueryCache?u?JSON.stringify({geometry:t,spatialRelationship:i,outSpatialReference:n}):JSON.stringify({geometry:t,spatialRelationship:i}):null)&&(o=this._geometryQueryCache.get(a),!s.isUndefined(o)))return[2,o];if(c=function(t){return r.__awaiter(E,void 0,void 0,(function(){var i;return r.__generator(this,(function(r){switch(r.label){case 0:return u&&(e.returnGeometry||e.returnCentroid)?[4,t.project(n)]:[3,2];case 1:return i=r.sent(),a&&this._geometryQueryCache.put(a,i,i.size||1),[2,i];case 2:return a&&this._geometryQueryCache.put(a,t,t.size||1),[2,t]}}))}))},!t)return[2,c(this._getAll())];if(h=this.featureAdapter,\"esriSpatialRelDisjoint\"!==i)return[3,3];if(!(l=this._searchFeatures(this._getQueryBBoxes(t))).length)return[2,c(this._getAll())];for(y=new Set,_=0,m=l;_<m.length;_++)v=m[_],y.add(h.getObjectId(v));return[4,this._reschedule((function(){var e=0;f=new Array(y.size),E.featureStore.forEach((function(t){return f[e++]=t})),d=y}))];case 1:return R.sent(),[4,this._reschedule((function(){return r.__awaiter(E,void 0,void 0,(function(){var e,n,s;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,x.getSpatialQueryOperator(i,t,this.geometryType,this.hasZ,this.hasM)];case 1:return e=r.sent(),n=function(t){return!d.has(h.getObjectId(t))||e(h.getGeometry(t))},s=g.default.bind,[4,this._runSpatialFilter(f,n)];case 2:return[2,new(s.apply(g.default,[void 0,r.sent(),t,this]))]}}))}))}))];case 2:return S=R.sent(),[2,c(S)];case 3:return(Q=this._searchFeatures(this._getQueryBBoxes(t))).length?this._canExecuteSoloPass(t,e)?[2,c(new g.default(Q,t,this))]:[4,x.getSpatialQueryOperator(i,t,this.geometryType,this.hasZ,this.hasM)]:(S=new g.default([],t,this),a&&this._geometryQueryCache.put(a,S,S.size||1),[2,S]);case 4:return w=R.sent(),[4,this._runSpatialFilter(Q,(function(e){return w(h.getGeometry(e))}))];case 5:return b=R.sent(),[2,c(new g.default(b,t,this))]}}))}))},e.prototype._runSpatialFilter=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,s,u=this;return r.__generator(this,(function(a){return t?this._budget?(n=0,i=new Array,s=function(){return r.__awaiter(u,void 0,void 0,(function(){var u;return r.__generator(this,(function(r){switch(r.label){case 0:return n<e.length?(u=e[n],t(u)&&i.push(u),this._budget.done?[4,this._reschedule((function(){return s()}))]:[3,2]):[3,3];case 1:r.sent(),r.label=2;case 2:return++n,[3,0];case 3:return[2]}}))}))},[2,this._reschedule((function(){return s()})).then((function(){return i}))]):[2,e.filter((function(e){return t(e)}))]:[2,e]}))}))},e.prototype._canExecuteSoloPass=function(e,t){var r=this.geometryType,n=t.spatialRel;return x.canQueryWithRBush(e)&&(\"esriSpatialRelEnvelopeIntersects\"===n||\"esriGeometryPoint\"===r&&(\"esriSpatialRelIntersects\"===n||\"esriSpatialRelContains\"===n||\"esriSpatialRelWithin\"===n))},e.prototype._getQueryBBoxes=function(e){if(x.canQueryWithRBush(e)){if(d.isExtent(e))return[l.fromValues(e.xmin,e.ymin,e.xmax,e.ymax)];if(d.isPolygon(e))return e.rings.map((function(e){return l.fromValues(Math.min(e[0][0],e[2][0]),Math.min(e[0][1],e[2][1]),Math.max(e[0][0],e[2][0]),Math.max(e[0][1],e[2][1]))}))}return[f.getBoundsXY(l.create(),e)]},e.prototype._searchFeatures=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this.featureStore.forEachInBounds(n,(function(e){E.add(e)}))}var i=new Array(E.size),s=0;return E.forEach((function(e){return i[s++]=e})),E.clear(),i},e.prototype._checkQuerySupport=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){if(e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text)throw new n(\"feature-store:unsupported-query\",\"Unsupported query options\",{query:e});return[2,a.all([this._checkAttributesQuerySupport(e),this._checkStatisticsQuerySupport(e),x.checkSpatialQuerySupport(e,this.geometryType,this.spatialReference),_.checkProjectionSupport(this.spatialReference,e.outSR)]).then((function(){return e}))]}))}))},e.prototype._checkAttributesQuerySupport=function(e){var t=e.outFields,r=e.orderByFields,i=e.returnDistinctValues,s=e.outStatistics,u=s?s.map((function(e){return e.outStatisticFieldName&&e.outStatisticFieldName.toLowerCase()})):[];if(r&&r.length>0){var a=r.map((function(e){var t=e.toLowerCase();return t.indexOf(\" asc\")>-1?t.split(\" asc\")[0]:t.indexOf(\" desc\")>-1?t.split(\" desc\")[0]:e})).filter((function(e){return-1===u.indexOf(e)}));y.validateFields(this.fieldsIndex,a,\"orderByFields contains missing fields\")}if(t&&t.length>0)y.validateFields(this.fieldsIndex,t,\"outFields contains missing fields\");else if(i)throw new n(\"feature-store:unsupported-query\",\"outFields should be specified for returnDistinctValues\",{query:e});y.validateWhere(this.fieldsIndex,e.where)},e.prototype._checkStatisticsQuerySupport=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,i,s,u,a,o,c,h,l,f,d;return r.__generator(this,(function(r){if(t=e.outStatistics,i=e.groupByFieldsForStatistics,s=e.having,u=i&&i.length,a=t&&t.length,s){if(!u||!a)throw new n(\"feature-store:unsupported-query\",\"outStatistics and groupByFieldsForStatistics should be specified with having\",{query:e});y.validateHaving(this.fieldsIndex,s,t)}if(a){if(!function(e){return e.every((function(e){return\"exceedslimit\"!==e.statisticType}))}(t))return[2];for(o=t.map((function(e){return e.onStatisticField})),y.validateFields(this.fieldsIndex,o,\"onStatisticFields contains missing fields\"),u&&y.validateFields(this.fieldsIndex,i,\"groupByFieldsForStatistics contains missing fields\"),c=0,h=t;c<h.length;c++)if(l=h[c],f=l.onStatisticField,d=l.statisticType,(\"percentile_disc\"===d||\"percentile_cont\"===d)&&\"statisticParameters\"in l){if(!l.statisticParameters)throw new n(\"feature-store:unsupported-query\",\"statisticParamters should be set for percentile type\",{definition:l,query:e})}else if(\"count\"!==d&&f&&y.hasInvalidFieldType(f,this.fieldsIndex))throw new n(\"feature-store:unsupported-query\",\"outStatistics contains non-numeric fields\",{definition:l,query:e})}return[2]}))}))},e}();t.default=F;var T=h.create(),C=h.create()}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/graphics/data/QueryEngine.js?')},\"./node_modules/arcgis-js-api/layers/graphics/data/QueryEngineCapabilities.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports], __WEBPACK_AMD_DEFINE_RESULT__ = (function(t,s){Object.defineProperty(s,\"__esModule\",{value:!0}),s.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/graphics/data/QueryEngineCapabilities.js?')},\"./node_modules/arcgis-js-api/layers/graphics/data/QueryEngineResult.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../../core/MapUtils */ \"./node_modules/arcgis-js-api/core/MapUtils.js\"),__webpack_require__(/*! ../../../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../../core/SetUtils */ \"./node_modules/arcgis-js-api/core/SetUtils.js\"),__webpack_require__(/*! ../../../geometry/support/quantizationUtils */ \"./node_modules/arcgis-js-api/geometry/support/quantizationUtils.js\"),__webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils */ \"./node_modules/arcgis-js-api/geometry/support/spatialReferenceUtils.js\"),__webpack_require__(/*! ../featureConversionUtils */ \"./node_modules/arcgis-js-api/layers/graphics/featureConversionUtils.js\"),__webpack_require__(/*! ./AttributesBuilder */ \"./node_modules/arcgis-js-api/layers/graphics/data/AttributesBuilder.js\"),__webpack_require__(/*! ./attributeSupport */ \"./node_modules/arcgis-js-api/layers/graphics/data/attributeSupport.js\"),__webpack_require__(/*! ./projectionSupport */ \"./node_modules/arcgis-js-api/layers/graphics/data/projectionSupport.js\"),__webpack_require__(/*! ./timeSupport */ \"./node_modules/arcgis-js-api/layers/graphics/data/timeSupport.js\"),__webpack_require__(/*! ./utils */ \"./node_modules/arcgis-js-api/layers/graphics/data/utils.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,r,i,s,n,a,o,u,l,h,f,c,p,d){function m(e){return e.substr(24,12)+e.substr(19,4)+e.substr(16,2)+e.substr(14,2)+e.substr(11,2)+e.substr(9,2)+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2)}function y(e,t,r){return(r?e>t:e<t)?-1:(r?e<t:e>t)?1:0}function g(e,t,r){return r?t-e:e-t}function v(e,t,r,i){if(r&&\"esriFieldTypeDate\"===r.type){var s=new Date(e).getTime(),n=new Date(t).getTime();if(!isNaN(s)&&!isNaN(n))return g(s,n,i)}if(\"number\"==typeof e&&\"number\"==typeof t)return g(e,t,i);if(\"string\"==typeof e&&\"string\"==typeof t){s=e.toUpperCase(),n=t.toUpperCase();return!r||\"esriFieldTypeGUID\"!==r.type&&\"esriFieldTypeGlobalID\"!==r.type?y(s,n,i):y(m(s),m(n),i)}return i?1:-1}Object.defineProperty(t,\"__esModule\",{value:!0});var I=function(){function e(e,t,r){this.items=e,this.queryGeometry=t,this.definitionExpression=r.definitionExpression,this.geometryType=r.geometryType,this.hasM=r.hasM,this.hasZ=r.hasZ,this.objectIdField=r.objectIdField,this.spatialReference=r.spatialReference,this.fieldsIndex=r.fieldsIndex,this.timeInfo=r.timeInfo,this.featureAdapter=r.featureAdapter}return Object.defineProperty(e.prototype,\"size\",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),e.prototype.createQueryResponse=function(e){var t;e.outStatistics?t=e.outStatistics.some((function(e){return\"exceedslimit\"===e.statisticType}))?this._createExceedsLimitQueryResponse(e):this._createStatisticsQueryResponse(e):t=this._createFeatureQueryResponse(e);return e.returnQueryGeometry&&(u.isValid(e.outSR)&&!u.equals(this.queryGeometry.spatialReference,e.outSR)?t.queryGeometry=d.cleanFromGeometryEngine(r.__assign({spatialReference:e.outSR},c.project(this.queryGeometry,this.queryGeometry.spatialReference,e.outSR))):t.queryGeometry=d.cleanFromGeometryEngine(r.__assign({spatialReference:e.outSR},this.queryGeometry))),t},e.prototype.executeAttributesQuery=function(t){var r=f.getWhereClause(t.where,this.fieldsIndex);if(!r)return n.resolve(this);if(r.isStandardized){for(var i=0,s=[],a=0,o=this.items;a<o.length;a++){var u=o[a];r.testFeature(u,this.featureAdapter)&&(s[i++]=u)}var l=new e(s,this.queryGeometry,this);return l.definitionExpression=t.where,n.resolve(l)}return n.reject(new TypeError(\"Where clause is not standardized\"))},e.prototype.executeObjectIdsQuery=function(t){if(!t.objectIds||!t.objectIds.length)return n.resolve(this);var r=a.SetFromValues(t.objectIds),i=this.featureAdapter.getObjectId;return n.resolve(new e(this.items.filter((function(e){return r.has(i(e))})),this.queryGeometry,this))},e.prototype.executeTimeQuery=function(t){var r=p.getTimeOperator(this.timeInfo,t.timeExtent,this.featureAdapter);if(!s.isSome(r))return n.resolve(this);var i=this.items.filter(r);return n.resolve(new e(i,this.queryGeometry,this))},e.prototype.filterLatest=function(){for(var t=this.timeInfo,r=t.trackIdField,s=t.startTimeField,a=t.endTimeField||s,o=new Map,u=this.featureAdapter.getAttribute,l=0,h=this.items;l<h.length;l++){var f=h[l],c=u(f,r),p=u(f,a),d=o.get(c);(!d||p>u(d,a))&&o.set(c,f)}var m=i.valuesOfMap(o);return n.resolve(new e(m,this.queryGeometry,this))},e.prototype.project=function(t){return r.__awaiter(this,void 0,void 0,(function(){var i,s,n=this;return r.__generator(this,(function(r){switch(r.label){case 0:return!t||u.equals(this.spatialReference,t)?[2,this]:(i=this.featureAdapter,[4,c.projectMany(this.items.map((function(e){return d.getGeometry(n.geometryType,n.hasZ,n.hasM,i.getGeometry(e))})),this.spatialReference,t)]);case 1:return s=r.sent(),[2,new e(s.map((function(e,t){return i.cloneWithGeometry(n.items[t],l.convertFromGeometry(e,n.hasZ,n.hasM))})),this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:t,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})]}}))}))},e.prototype._sortFeatures=function(e,t,r){if(e.length>1&&t&&t.length)for(var i=function(t){var i=t.split(\" \"),n=i[0],a=s.fieldsIndex.get(n),o=i[1]&&\"desc\"===i[1].toLowerCase();e.sort((function(e,t){return v(r(e,n,a),r(t,n,a),a,o)}))},s=this,n=0,a=t.reverse();n<a.length;n++){i(a[n])}},e.prototype._createFeatureQueryResponse=function(e){var t=this,i=this.items,s=this,n=s.geometryType,a=s.hasM,u=s.hasZ,l=s.objectIdField,h=s.spatialReference,f=e.outFields,c=e.outSR,p=e.quantizationParameters,m=e.resultRecordCount,y=e.resultOffset,g=e.returnZ,v=e.returnM,I=!1;if(null!=m&&null!=y){var b=y+m;I=i.length>b,i=i.slice(y,Math.min(i.length,b))}var _=f&&(f.indexOf(\"*\")>-1?r.__spreadArrays(this.fieldsIndex.fields):f.map((function(e){return t.fieldsIndex.get(e)})));return{exceededTransferLimit:I,features:this._createFeatures(e,i),fields:_,geometryType:n,hasM:a&&v,hasZ:u&&g,objectIdFieldName:l,spatialReference:d.cleanFromGeometryEngine(c||h),transform:p&&o.toQuantizationTransform(p)||null}},e.prototype._createFeatures=function(e,t){var r=new h.default(e,this.featureAdapter,this.fieldsIndex),i=this.hasM,s=this.hasZ,n=e.orderByFields,a=e.quantizationParameters,u=e.returnGeometry,l=e.returnCentroid,f=e.maxAllowableOffset,c=e.returnZ,p=void 0!==c&&c,m=e.returnM,y=s&&p,g=i&&(void 0!==m&&m),v=[],I=0;if(u||l){var b=o.toQuantizationTransform(a);if(u&&!l)for(var _=0,T=t;_<T.length;_++){G=T[_];v[I++]={attributes:r.getAttributes(G),geometry:d.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(G),f,b,y,g)}}else if(!u&&l)for(var F=0,x=t;F<x.length;F++){G=x[F];v[I++]={attributes:r.getAttributes(G),centroid:d.transformCentroid(this,this.featureAdapter.getCentroid(G,this),b)}}else for(var S=0,N=t;S<N.length;S++){G=N[S];v[I++]={attributes:r.getAttributes(G),centroid:d.transformCentroid(this,this.featureAdapter.getCentroid(G,this),b),geometry:d.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(G),f,b,y,g)}}}else for(var A=0,M=t;A<M.length;A++){var G=M[A],R=r.getAttributes(G);R&&(v[I++]={attributes:R})}return this._sortFeatures(v,n,(function(e,t,i){return r.getFieldValue(e,t,i)})),v},e.prototype._createExceedsLimitQueryResponse=function(e){for(var t=!1,r=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,n=0,a=e.outStatistics;n<a.length;n++){var o=a[n];if(\"exceedslimit\"===o.statisticType){r=null!=o.maxPointCount?o.maxPointCount:Number.POSITIVE_INFINITY,i=null!=o.maxRecordCount?o.maxRecordCount:Number.POSITIVE_INFINITY,s=null!=o.maxVertexCount?o.maxVertexCount:Number.POSITIVE_INFINITY;break}}if(\"esriGeometryPoint\"===this.geometryType)t=this.items.length>r;else if(this.items.length>i)t=!0;else{var u=this.hasZ?this.hasM?4:3:this.hasM?3:2,l=this.featureAdapter;t=this.items.reduce((function(e,t){var r=l.getGeometry(t);return e+(r&&r.coords.length||0)}),0)/u>s}return{fields:[{name:\"exceedslimit\",type:\"esriFieldTypeInteger\",alias:\"exceedslimit\",sqlType:\"sqlTypeInteger\",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(t)}}]}},e.prototype._createStatisticsQueryResponse=function(e){for(var t=this,r={attributes:{}},s=[],n=new Map,a=new Map,o=new Map,u=new Map,l=new h.default(e,this.featureAdapter,this.fieldsIndex),f=e.outStatistics,c=e.groupByFieldsForStatistics,p=e.having,d=e.orderByFields,m=c&&c.length,y=!!m,g=y&&c[0],v=y&&!this.fieldsIndex.get(g),I=0,b=f;I<b.length;I++){var _=b[I],T=_.outStatisticFieldName,F=_.statisticType,x=_,S=\"exceedslimit\"!==F?_.onStatisticField:void 0,N=\"percentile_disc\"===F||\"percentile_cont\"===F,A=y&&1===m&&(S===g||v)&&\"count\"===F;if(y){if(!o.has(S)){for(var M=[],G=0,R=c;G<R.length;G++){var V=R[G],P=this._getAttributeValues(l,V,n);M.push(P)}o.set(S,this._calculateUniqueValues(M))}var q=o.get(S),E=function(e){var r=q[e],i=r.count,s=r.data,a=r.items,o=r.itemPositions,h=s.join(\",\");if(!p||l.validateItems(a,p)){var f=u.get(h)||{attributes:{}},d=null;if(A)d=i;else{var m=w._getAttributeValues(l,S,n),y=o.map((function(e){return m[e]}));d=N&&\"statisticParameters\"in x?w._getPercentileValue(x,y):w._getStatisticValue(x,y)}f.attributes[T]=d,c.forEach((function(e,r){return f.attributes[t.fieldsIndex.get(e)?e:\"EXPR_\"+(r+1)]=s[r]})),u.set(h,f)}},w=this;for(var j in q)E(j)}else{P=this._getAttributeValues(l,S,n);r.attributes[T]=N&&\"statisticParameters\"in x?this._getPercentileValue(x,P):this._getStatisticValue(x,P,a)}s.push({name:T,alias:T,type:\"esriFieldTypeDouble\"})}var C=y?i.valuesOfMap(u):[r];return this._sortFeatures(C,d,(function(e,t){return e.attributes[t]})),{fields:s,features:C}},e.prototype._getStatisticValue=function(e,t,r){var i=e.onStatisticField,s=e.statisticType,n=r&&r.has(i)?r.get(i):this._calculateStatistics(t);return r&&r.set(i,n),n[\"var\"===s?\"variance\":s]},e.prototype._getPercentileValue=function(e,t){var i=e.onStatisticField,s=e.statisticParameters,n=e.statisticType,a=s.value,o=\"desc\"===s.orderBy,u=this.fieldsIndex.get(i),l=r.__spreadArrays(t).sort((function(e,t){return v(e,t,u,o)}));return this._calculatePercentile(l,a,\"percentile_disc\"===n)},e.prototype._getAttributeValues=function(e,t,r){if(r.has(t))return r.get(t);var i=this.fieldsIndex.get(t),s=this.items.map((function(r){return e.getFieldValue(r,t,i)}));return r.set(t,s),s},e.prototype._calculateStatistics=function(e){for(var t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,i=null,s=null,n=null,a=null,o=[],u=0,l=0,h=e;l<h.length;l++){\"string\"==typeof(d=h[l])?u++:null==d||isNaN(d)||(i+=d,t=Math.min(t,d),r=Math.max(r,d),o.push(d),u++)}if(u){s=i/u;for(var f=0,c=0,p=o;c<p.length;c++){var d=p[c];f+=Math.pow(d-s,2)}a=u>1?f/(u-1):0,n=Math.sqrt(a)}else t=null,r=null;return{avg:s,count:u,max:r,min:t,stddev:n,sum:i,variance:a}},e.prototype._calculateUniqueValues=function(e){for(var t={},r=this.items,i=r.length,s=0;s<i;s++){for(var n=r[s],a=[],o=0,u=e;o<u.length;o++){var l=u[o];a.push(l[s])}var h=a.join(\",\");null==t[h]?t[h]={count:1,data:a,items:[n],itemPositions:[s]}:(t[h].count++,t[h].items.push(n),t[h].itemPositions.push(s))}return t},e.prototype._calculatePercentile=function(e,t,r){if(0===e.length)return null;if(t<=0)return e[0];if(t>=1)return e[e.length-1];var i=(e.length-1)*t,s=Math.floor(i),n=s+1,a=i%1,o=e[s],u=e[n];return n>=e.length||r||\"string\"==typeof o||\"string\"==typeof u?o:o*(1-a)+u*a},e}();t.default=I}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/graphics/data/QueryEngineResult.js?')},\"./node_modules/arcgis-js-api/layers/graphics/data/executeTileQuery.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! ../../../geometry/support/aaBoundingRect */ \"./node_modules/arcgis-js-api/geometry/support/aaBoundingRect.js\"),__webpack_require__(/*! ../featureConversionUtils */ \"./node_modules/arcgis-js-api/layers/graphics/featureConversionUtils.js\"),__webpack_require__(/*! ../OptimizedGeometry */ \"./node_modules/arcgis-js-api/layers/graphics/OptimizedGeometry.js\"),__webpack_require__(/*! ./QueryEngine */ \"./node_modules/arcgis-js-api/layers/graphics/data/QueryEngine.js\"),__webpack_require__(/*! ./utils */ \"./node_modules/arcgis-js-api/layers/graphics/data/utils.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,o,r,n,i,u){Object.defineProperty(t,\"__esModule\",{value:!0});var s=new n.default,a={esriGeometryPoint:r.convertToPoint,esriGeometryPolyline:r.convertToPolyline,esriGeometryPolygon:r.convertToPolygon,esriGeometryMultipoint:r.convertToMultipoint};t.executeTileQueryForIds=function(e,t,r){var n=r.pixelBuffer*t.resolution,i=o.pad(t.bounds,n,o.create()),u=[];return e.featureStore.forEachInBounds(i,(function(t){return u.push(e.featureAdapter.getObjectId(t))})),u},t.createTileFeatures=function(e,t,o,r,n,d,f,h,g){var y=a[o.geometryType],p=l[o.geometryType],v=\"esriGeometryPolygon\"===o.geometryType&&!h,m=o.hasZ?o.hasM?4:3:o.hasM?3:2;f&&!d?r.forEachInBounds(n,(function(r){return function(e,t,o,r,n){if(t.has(o.objectId))return;var s=u.getCentroid(r,o,n),a=o.attributes;s&&(t.add(o.objectId),e.push(new i.Feature(a,o.localId,null,s)))}(e,t,r,o,g)})):d&&!f?r.forEachInBounds(n,(function(o){return function(e,t,o,r,n,u,a,l){if(t.has(o.objectId))return;var d=o.attributes,f=r(c(s,o.geometry,n,u,l,a),!1,!1);f&&(t.add(o.objectId),e.push(new i.Feature(d,o.localId,f,null)))}(e,t,o,y,m,p,g,v)})):r.forEachInBounds(n,(function(r){return function(e,t,o,r,n,a,l,d,f){if(t.has(o.objectId))return;var h=u.getCentroid(r,o,n),g=o.attributes,y=a(c(s,o.geometry,l,d,f,n),!1,!1);y&&h&&(t.add(o.objectId),e.push(new i.Feature(g,o.localId,y,h)))}(e,t,r,o,g,y,m,p,v)}))};var l={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0};function c(e,t,o,n,i,u){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var s,a,l,c,d=t.coords,f=t.lengths;if(!f.length)return e.coords[0]=r.quantizeX(u,d[0]),e.coords[1]=r.quantizeY(u,d[1]),e.coords.length=o,e;for(var h=0,g=0,y=g,p=0,v=f;p<v.length;p++){var m=v[p];if(!(m<n))if(g=y,l=s=r.quantizeX(u,d[h]),c=a=r.quantizeY(u,d[h+1]),e.coords[g]=l,e.coords[g+1]=c,h+=o,1!==m){var I=(l=r.quantizeX(u,d[h]))-s,b=(c=r.quantizeY(u,d[h+1]))-a,z=b/I;g+=2,e.coords[g]=I,e.coords[g+1]=b,s=l,a=c,h+=o;for(var G=2;G<m;G++){if(l=r.quantizeX(u,d[h]),c=r.quantizeY(u,d[h+1]),l!==s||c!==a){var P=l-s,q=c-a,T=q/P;(z===T||!isFinite(z)&&!isFinite(T))&&(i||(b>=0&&q>=0||b<=0&&q<=0)&&(I>=0&&P>=0||I<=0&&P<=0))?(I+=P,b+=q):(I=P,b=q,g+=2),e.coords[g]=I,e.coords[g+1]=b,z=T,s=l,a=c}h+=o}var j=(g+2-y)/2;j>=n&&(e.lengths.push(j),y=g+2)}else e.lengths.push(1),y=g+2}return e.coords.length>y&&(e.coords.length=y),e.coords.length?e:null}t.quantizeOptimizedGeometryForDisplay=c}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/graphics/data/executeTileQuery.js?')},\"./node_modules/arcgis-js-api/layers/support/PromiseQueue.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! ../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(t,e,r){Object.defineProperty(e,\"__esModule\",{value:!0});var n=function(){function t(){this._tasks=new Array}return Object.defineProperty(t.prototype,\"length\",{get:function(){return this._tasks.length},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var e=this;return r.create((function(r,n){return e._tasks.push(new s(r,n,t))}))},t.prototype.unshift=function(t){var e=this;return r.create((function(r,n){return e._tasks.unshift(new s(r,n,t))}))},t.prototype.process=function(){if(0===this._tasks.length)return!1;var t=this._tasks.shift();try{var e=t.callback();e&&\"then\"in e&&\"function\"==typeof e.then?e.then(t.resolve,t.reject):t.resolve(e)}catch(e){t.reject(e)}return!0},t.prototype.cancelAll=function(){for(var t=r.createAbortError(),e=0,n=this._tasks;e<n.length;e++){n[e].reject(t)}this._tasks.length=0},t}();e.default=n;var s=function(t,e,r){this.resolve=t,this.reject=e,this.callback=r}}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/PromiseQueue.js?')}}]);","extractedComments":[]}