{"code":"(function(){(this||window).webpackJsonp.registerAbsMids({\"esri/core/MapPool\":\"./node_modules/arcgis-js-api/core/MapPool.js\",\"esri/views/2d/engine/FeatureContainer\":\"./node_modules/arcgis-js-api/views/2d/engine/FeatureContainer.js\",\"esri/views/2d/layers/graphics/GraphicContainer\":\"./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicContainer.js\",\"esri/views/2d/layers/graphics/GraphicProcessingQueue\":\"./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicProcessingQueue.js\",\"esri/views/2d/layers/graphics/GraphicStore\":\"./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicStore.js\",\"esri/views/2d/layers/graphics/GraphicStoreItem\":\"./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicStoreItem.js\",\"esri/views/2d/layers/graphics/GraphicsView2D\":\"./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicsView2D.js\",\"esri/views/layers/GraphicsView\":\"./node_modules/arcgis-js-api/views/layers/GraphicsView.js\"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{\"./node_modules/arcgis-js-api/core/MapPool.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! ./ObjectPool */ \"./node_modules/arcgis-js-api/core/ObjectPool.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,r,n){var o=function(){function e(e,r){void 0===e&&(e=50),void 0===r&&(r=50),this._pool=new n(Map,null,(function(e){return e.clear()}),r,e)}return e.prototype.acquire=function(){return this._pool.acquire()},e.prototype.release=function(e){this._pool.release(e)},e.acquire=function(){return t.acquire()},e.release=function(e){return t.release(e)},e}(),t=new o(100);return o}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/core/MapPool.js?')},\"./node_modules/arcgis-js-api/views/2d/engine/FeatureContainer.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../../geometry/support/aaBoundingRect */ \"./node_modules/arcgis-js-api/geometry/support/aaBoundingRect.js\"),__webpack_require__(/*! ../engine */ \"./node_modules/arcgis-js-api/views/2d/engine.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,r,i,n,a,o){Object.defineProperty(t,\"__esModule\",{value:!0});var s=function(e){function t(t){var r=e.call(this,t)||this;return r._rendererInfo=new o.WGLRendererInfo,r._attachedResolver=i.createResolver(),r.attributeView=new o.AttributeStoreView,r}return r.__extends(t,e),t.prototype.destroy=function(){this.removeAllChildren(),this.children.forEach((function(e){return e.destroy()})),this.attributeView.destroy()},t.prototype.whenAttached=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this._attachedResolver.promise];case 1:return e.sent(),[2]}}))}))},t.prototype.setRendererInfo=function(e,t,r){this._rendererInfo.setInfo(e,t,r),this.requestRender()},t.prototype.getMaterialItems=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i,a,o;return r.__generator(this,(function(r){switch(r.label){case 0:return e&&0!==e.length?[4,this.whenAttached()]:[2,null];case 1:return r.sent(),i=this.stage.painter.textureManager,a=e.map((function(e){return i.rasterizeItem(e.symbol,e.glyphIds,t)})),[4,n.all(a)];case 2:return o=r.sent(),[2,o.map((function(t,r){return{id:e[r].id,mosaicItem:t}}))]}}))}))},t.prototype.onTileData=function(e,t){if(t.addOrUpdate&&\"tileDisplayData\"in t.addOrUpdate)e.setData(t,this.hasLabels,this.labelsVisible);else{var i=t.addOrUpdate&&o.TileData.decode(t.addOrUpdate),n=r.__assign(r.__assign({},t),{addOrUpdate:i});e.setData(n,this.hasLabels,this.labelsVisible)}this.contains(e)||this.addChild(e),this.requestRender()},t.prototype.onTileError=function(e){e.clear(),this.contains(e)||this.addChild(e)},t.prototype.renderChildren=function(t){this._rendererInfo.update(t.state),this.attributeView.bindTextures(this.stage.context),e.prototype.renderChildren.call(this,t)},t.prototype.createTile=function(e){var t=this._tileInfoView.getTileBounds(a.create(),e);return new o.WGLTile(e,t)},t.prototype.destroyTile=function(e){this.removeChild(e),e.destroy()},t.prototype.createRenderParams=function(t){return r.__assign(r.__assign({},e.prototype.createRenderParams.call(this,t)),{rendererInfo:this._rendererInfo,attributeView:this.attributeView})},t.prototype.onAttach=function(){e.prototype.onAttach.call(this);var t=this.stage.context.capabilities;t.textureFloat,t.vao,this._attachedResolver()},t.prototype.onDetach=function(){e.prototype.onDetach.call(this),this._attachedResolver=i.createResolver()},t}(o.TileContainer);t.FeatureContainer=s}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/views/2d/engine/FeatureContainer.js?')},\"./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicContainer.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../engine/FeatureContainer */ \"./node_modules/arcgis-js-api/views/2d/engine/FeatureContainer.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,n,r){Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),Object.defineProperty(t.prototype,\"hasLabels\",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"labelsVisible\",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype._renderGraphics=function(e,t){for(var n=0,r=this.children;n<r.length;n++){var i=r[n];i.isReady&&i.hasData&&(i.commitChanges(),e.context.setStencilFunction(514,i.stencilRef,255),i._displayList.replay(e,i,t))}},t.prototype.renderChildren=function(t){var n=t.painter;if(this.children.some((function(e){return e.hasData}))){e.prototype.renderChildren.call(this,t),this._renderGraphics(t);var r=n.effects.highlight;r.bind(t),this._renderGraphics(t,r.defines),r.draw(t),r.unbind()}},t}(r.FeatureContainer);t.default=i}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicContainer.js?')},\"./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicProcessingQueue.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../../../core/Accessor */ \"./node_modules/arcgis-js-api/core/Accessor.js\"),__webpack_require__(/*! ../../../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../../../core/scheduling */ \"./node_modules/arcgis-js-api/core/scheduling.js\"),__webpack_require__(/*! ../../../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,i,n,o,r,s){Object.defineProperty(t,\"__esModule\",{value:!0});var h=function(e){function t(t){var i=e.call(this,t)||this;return i._queue=new Map,i._queueArray=[],i._onGoingGraphic=null,i._onGoingPromise=null,i._scheduledNextHandle=null,i._next=i._next.bind(i),i._finalize=i._finalize.bind(i),i}return i.__extends(t,e),Object.defineProperty(t.prototype,\"length\",{get:function(){return this._queueArray.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"updating\",{get:function(){return this._queueArray.length>0||null!==this._onGoingPromise},enumerable:!0,configurable:!0}),t.prototype.cancel=function(e){if(this._onGoingGraphic&&this._onGoingGraphic.graphic===e&&(this._ongoingAbortController.abort(),this._onGoingGraphic=this._onGoingPromise=null),this._queue.has(e)){var t=this._queue.get(e);this._queue.delete(e);var i=this._queueArray.indexOf(t);this._queueArray.slice(i,1)}this._scheduleNext(),this.notifyChange(\"updating\")},t.prototype.clear=function(){this._queue.clear(),this._queueArray.length=0,this._onGoingPromise&&(this._ongoingAbortController.abort(),this._onGoingGraphic=this._onGoingPromise=null),this._cancelNext(),this.notifyChange(\"updating\")},t.prototype.has=function(e){return this._queue.has(e)},t.prototype.isOngoing=function(e){return this._onGoingGraphic&&this._onGoingGraphic.graphic===e},t.prototype.push=function(e,t){if(!this._queue.has(e)){var i={graphic:e,addOrUpdate:t};this._queueArray.push(i),this._queue.set(e,i),this._scheduleNext(),this.notifyChange(\"updating\")}},t.prototype.refresh=function(){this.reset()},t.prototype.reset=function(){var e=this._onGoingGraphic;if(e){var t=e.graphic,i=e.addOrUpdate;this.push(t,i)}},t.prototype._finalize=function(){this._onGoingGraphic=null,this._ongoingAbortController=null,this._onGoingPromise=null,this.notifyChange(\"updating\"),this._scheduleNext()},t.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=null)},t.prototype._scheduleNext=function(){this._scheduledNextHandle||0===this._queue.size||null!=this._onGoingGraphic||(this._scheduledNextHandle=r.schedule(this._next))},t.prototype._next=function(){if(null==this._scheduledNextHandle||0===this._queue.size||this._onGoingGraphic)this._scheduledNextHandle=null;else{this._scheduledNextHandle=null;var e=this._peek(),t=e.graphic,i=e.addOrUpdate,n=o.createAbortController();this._queue.delete(t),this._onGoingGraphic=e,this._onGoingPromise=this.process(t,i,{signal:n.signal}),this._ongoingAbortController=n,this._onGoingPromise.then(this._finalize,this._finalize),this.notifyChange(\"updating\")}},t.prototype._peek=function(){return 0===this._queueArray.length?null:this._queueArray.pop()},i.__decorate([s.property({readOnly:!0})],t.prototype,\"length\",null),i.__decorate([s.property({readOnly:!0})],t.prototype,\"updating\",null),i.__decorate([s.property({constructOnly:!0})],t.prototype,\"process\",void 0),t=i.__decorate([s.subclass(\"esri.views.2d.layers.graphics.GraphicProcessingQueue\")],t)}(n);t.default=h}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicProcessingQueue.js?')},\"./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicStore.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../../../core/has */ \"./node_modules/arcgis-js-api/core/has.js\"),__webpack_require__(/*! ../../../../core/screenUtils */ \"./node_modules/arcgis-js-api/core/screenUtils.js\"),__webpack_require__(/*! ../../../../core/unitUtils */ \"./node_modules/arcgis-js-api/core/unitUtils.js\"),__webpack_require__(/*! ../../../../core/libs/rbush/rbush */ \"./node_modules/arcgis-js-api/core/libs/rbush/rbush.js\"),__webpack_require__(/*! ../../../../geometry/support/aaBoundingRect */ \"./node_modules/arcgis-js-api/geometry/support/aaBoundingRect.js\"),__webpack_require__(/*! ../../../../geometry/support/contains */ \"./node_modules/arcgis-js-api/geometry/support/contains.js\"),__webpack_require__(/*! ../../../../geometry/support/extentUtils */ \"./node_modules/arcgis-js-api/geometry/support/extentUtils.js\"),__webpack_require__(/*! ../../../../geometry/support/jsonUtils */ \"./node_modules/arcgis-js-api/geometry/support/jsonUtils.js\"),__webpack_require__(/*! ../../../../geometry/support/normalizeUtils */ \"./node_modules/arcgis-js-api/geometry/support/normalizeUtils.js\"),__webpack_require__(/*! ./GraphicStoreItem */ \"./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicStoreItem.js\"),__webpack_require__(/*! ./graphicsUtils */ \"./node_modules/arcgis-js-api/views/2d/layers/graphics/graphicsUtils.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,i,r,o,n,s,a,u,l,p,d,h,c){Object.defineProperty(t,\"__esModule\",{value:!0});var m={minX:0,minY:0,maxX:0,maxY:0},g=a.create(),y=[];function f(e,t,i,r,o){return m.minX=t,m.minY=i,m.maxX=r,m.maxY=o,e.search(m)}var _=function(){function e(e,t,i,o,a,u){this._graphics=o,this._onAdd=a,this._onRemove=u,this._index=s(9,r(\"csp-restrictions\")?function(e){return{minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}}:[\".bounds[0]\",\".bounds[1]\",\".bounds[2]\",\".bounds[3]\"]),this._itemByGraphic=new Map,this._currentLevel=-1/0,this._tileInfoView=e,this._uidFieldName=i;var l=e.getClosestInfoForScale(t);l&&(this._currentLevel=l.level,this._resolution=this._tileInfoView.getTileResolution(l.level)),this._metersPerUnit=n.getMetersPerUnit(e.spatialReference)}return e.prototype.hitTest=function(e,t,i,r,n){e=d.normalizeMapX(e,this._tileInfoView.spatialReference);var s=.5*r*i;g[0]=e-s,g[1]=t-s,g[2]=e+s,g[3]=t+s;var h=.5*r*(i+50),m=f(this._index,e-h,t-h,e+h,t+h);if(!m||0===m.length)return[];for(var y,_={x:e,y:t},b=[],v=0,x=m;v<x.length;v++){var G=x[v];if(G.graphic.visible)switch(p.getJsonType(G.geometry)){case\"esriGeometryPoint\":var B=G.symbol;if(!B)continue;var I=G.geometry,P=void 0;switch(B.type){case\"text\":P=c.getTextSymbolBounds(I.x,I.y,B,G.size,r,n);break;case\"cim\":case\"expanded-cim\":P=c.getCIMMarkerBounds(I.x,I.y,B,r,r*this._metersPerUnit,n);break;default:P=c.getMarkerSymbolBounds(I.x,I.y,B,r,r*this._metersPerUnit,n)}u.polygonContainsPoint(P,_)&&b.push(G);break;case\"esriGeometryPolyline\":var z=G.symbol;if(!z)continue;y=1.5*r*window.devicePixelRatio*o.pt2px(z.width),c.isPointOnPolyline(G.geometry,e,t,y)&&b.push(G);break;case\"esriGeometryEnvelope\":var w=G.geometry,T=a.fromValues(w.xmin,w.ymin,w.xmax,w.ymax);a.intersects(T,g)&&b.push(G);break;case\"esriGeometryPolygon\":if(u.polygonContainsPoint(G.geometry,_)){b.push(G);break}var U=l.getPolygonExtent(G.geometry);if(Math.abs(U.ymax-U.ymin)<5*r||Math.abs(U.xmax-U.xmin)<5*r){var k=a.fromValues(U.xmin,U.ymin,U.xmax,U.ymax);a.intersects(k,g)&&b.push(G)}break;case\"esriGeometryMultipoint\":var M=G.symbol;if(!M)continue;for(var R=G.geometry.points,V=void 0,A=0;A<R.length;A++){if(\"text\"===M.type){var C=M;V=c.getTextSymbolBounds(R[A][0],R[A][1],C,G.size,r,n)}else V=c.getMarkerSymbolBounds(R[A][0],R[A][1],M,r,r*this._metersPerUnit,n);if(u.polygonContainsPoint(V,_)){b.push(G);break}}}}return b.sort((function(e,t){var i=c.graphicGeometryToNumber(e.graphic),r=c.graphicGeometryToNumber(t.graphic);return i===r?t.zorder-e.zorder:i-r})),b.map((function(e){return e.graphic}))},e.prototype.getGraphicsData=function(e,t,r){var o=f(this._index,t.bounds[0],t.bounds[1],t.bounds[2],t.bounds[3]);if(0===o.length||0===r.length)return[];o.sort((function(e,t){return e.zorder-t.zorder})),o[0].insertAfter=-1;for(var n=1;n<o.length;n++)o[n].insertAfter=o[n-1].graphic.uid;o.sort((function(e,t){return e.graphic.uid-t.graphic.uid})),r.sort((function(e,t){return e.uid-t.uid}));for(var s,a=0,u=0,l=[],p={originPosition:\"upperLeft\",scale:[t.resolution,t.resolution],translate:[t.bounds[0],t.bounds[3]]},d=0,c=r;d<c.length;d++){var m=c[d];for(u=-2;a<o.length;)if(s=o[a],a++,m.uid===s.graphic.uid){u=s.insertAfter;break}if(s.geometry&&-2!==u){var g=s.getGeometryQuantized(p),y=i.__assign({},s.graphic.attributes);y[this._uidFieldName]=m.uid,null==s.groupId&&(s.groupId=e.createTemplateGroup(s.symbol,null,null)),l.push({centroid:h.default.getCentroidQuantized(s,p),geometry:g,attributes:y,symbol:s.symbol,groupId:s.groupId,insertAfter:u})}}return l},e.prototype.getGraphicData=function(e,t,r){var o=this._itemByGraphic.get(r);if(!o)return null;var n=f(this._index,t.bounds[0],t.bounds[1],t.bounds[2],t.bounds[3]);n.sort((function(e,t){return e.zorder-t.zorder}));var s=n.indexOf(o),a=0===s||-1===s?-1:n[s-1].graphic.uid,u={originPosition:\"upperLeft\",scale:[t.resolution,t.resolution],translate:[t.bounds[0],t.bounds[3]]},l=o.getGeometryQuantized(u),p=i.__assign({},o.graphic.attributes);return p[this._uidFieldName]=r.uid,null==o.groupId&&(o.groupId=e.createTemplateGroup(o.symbol,null,null)),{centroid:h.default.getCentroidQuantized(o,u),geometry:l,attributes:p,symbol:o.symbol,groupId:o.groupId,insertAfter:a}},e.prototype.queryTileData=function(e,t){var i=50*t.resolution,r=a.pad(t.bounds,i,a.create()),o=f(this._index,r[0],r[1],r[2],r[3]),n=[];return this._createTileGraphics(n,e,o,{originPosition:\"upperLeft\",scale:[t.resolution,t.resolution],translate:[t.bounds[0],t.bounds[3]]}),n},e.prototype.has=function(e){return this._itemByGraphic.has(e)},e.prototype.getBounds=function(e){return this._itemByGraphic.has(e)?this._itemByGraphic.get(e).bounds:null},e.prototype.add=function(e,t,i){if(e){this._onAdd(e);var r=h.default.acquire(e,t,i,this._resolution,this._resolution*this._metersPerUnit,this._tileInfoView.spatialReference);return this._itemByGraphic.set(e,r),i&&this._index.insert(r),r.bounds}},e.prototype.remove=function(e){if(this._itemByGraphic.has(e)){this._onRemove(e);var t=this._itemByGraphic.get(e);this._index.remove(t),this._itemByGraphic.delete(e)}},e.prototype.updateZ=function(){for(var e,t,i=this._graphics.items,r=0;r<i.length;r++)t=i[r],(e=this._itemByGraphic.get(t))&&(e.zorder=r)},e.prototype.update=function(e,t,i){var r=this._itemByGraphic.get(e);r.groupId=null;var o=a.clone(r.bounds);return r.size[0]=r.size[1]=0,this._index.remove(r),r.set(e,t,i,this._resolution,this._resolution*this._metersPerUnit,this._tileInfoView.spatialReference),i&&this._index.insert(r),{oldBounds:o,newBounds:r.bounds}},e.prototype.updateLevel=function(e){var t=this;if(this._currentLevel!==e){this._currentLevel=e;var i=this._tileInfoView.getTileResolution(e);this._resolution=i,this._index.clear(),y.length=0,this._itemByGraphic.forEach((function(e){e.updateBounds(t._resolution,t._resolution*t._metersPerUnit,t._tileInfoView.spatialReference),e.geometry&&y.push(e)})),this._index.load(y)}},e.prototype.clear=function(){this._itemByGraphic.clear(),this._index.clear()},e.prototype._createTileGraphics=function(e,t,r,o){var n,s,a,u,l=this._uidFieldName;r.sort((function(e,t){return e.zorder-t.zorder}));for(var p=0;p<r.length;p++){n=(a=r[p]).graphic,s=a.getGeometryQuantized(o),u=0===p?-1:r[p-1].graphic.uid;var d=i.__assign({},a.graphic.attributes);d[l]=n.uid,null==a.groupId&&(a.groupId=t.createTemplateGroup(a.symbol,null,null)),e.push({centroid:h.default.getCentroidQuantized(a,o),geometry:s,attributes:d,symbol:a.symbol,groupId:a.groupId,insertAfter:u})}},e}();t.default=_}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicStore.js?')},\"./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicStoreItem.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! ../../../../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../../../../geometry/support/aaBoundingRect */ \"./node_modules/arcgis-js-api/geometry/support/aaBoundingRect.js\"),__webpack_require__(/*! ../../../../geometry/support/centroid */ \"./node_modules/arcgis-js-api/geometry/support/centroid.js\"),__webpack_require__(/*! ../../../../geometry/support/jsonUtils */ \"./node_modules/arcgis-js-api/geometry/support/jsonUtils.js\"),__webpack_require__(/*! ../../../../geometry/support/quantizationUtils */ \"./node_modules/arcgis-js-api/geometry/support/quantizationUtils.js\"),__webpack_require__(/*! ../../../../layers/graphics/featureConversionUtils */ \"./node_modules/arcgis-js-api/layers/graphics/featureConversionUtils.js\"),__webpack_require__(/*! ../../../../layers/graphics/OptimizedGeometry */ \"./node_modules/arcgis-js-api/layers/graphics/OptimizedGeometry.js\"),__webpack_require__(/*! ./graphicsUtils */ \"./node_modules/arcgis-js-api/views/2d/layers/graphics/graphicsUtils.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,o,i,r,s,n,l,u,y){Object.defineProperty(t,\"__esModule\",{value:!0});var a=new u.default,h=new u.default;function p(e){e.coords.length=0,e.lengths.length=0}var g=function(){function e(){this.bounds=i.create(),this.graphic=null,this.size=[0,0,0,0]}return e.acquire=function(t,o,i,r,s,n){var l;return void 0===t&&(t=null),0===e._pool.length?l=new e:(l=e._pool.pop(),this._set.delete(l)),l.acquire(t,o,i,r,s,n),l},e.release=function(e){e&&!this._set.has(e)&&(e.release(),this._pool.push(e),this._set.add(e))},e.getCentroidQuantized=function(e,t){if(s.isPolygon(e.geometry)){var i=e.symbol;if(o.isNone(i))return null;if(y.isMarkerSymbol(i.type)){var l=r.polygonCentroid(e.geometry);return n.quantizePoint(t,{},{x:l[0],y:l[1]},!1,!1)}}return null},e.prototype.acquire=function(e,t,o,i,r,s){void 0===e&&(e=null),e&&this.set(e,t,o,i,r,s)},e.prototype.release=function(){this.graphic=null,this.symbolResource=null,this.geometry=null},Object.defineProperty(e.prototype,\"symbol\",{get:function(){return this.symbolResource.symbol},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t,o,i,r,s){this.graphic=e,this.geometry=o,this.symbolResource=t,this.updateBounds(i,r,s)},e.prototype.updateBounds=function(e,t,o){y.getBounds(this.bounds,this.size,this.symbolResource,this.geometry,e,t,o)},e.prototype.getGeometryQuantized=function(e){if(s.isPolygon(this.geometry)){var t=this.geometry.rings;if(1===t.length&&2===t[0].length)return n.quantizeGeometry(e,{paths:[[t[0][0],t[0][1]]]})}else if(s.isPolyline(this.geometry))return p(a),p(h),l.convertFromPolyline(a,this.geometry),l.generalizeOptimizedGeometry(h,a,this.geometry.hasZ,this.geometry.hasM,\"esriGeometryPolyline\",e.scale[0]),l.quantizeOptimizedGeometry(a,h,this.geometry.hasZ,this.geometry.hasM,\"esriGeometryPolyline\",e),l.convertToPolyline(a,this.geometry.hasZ,this.geometry.hasM);return n.quantizeGeometry(e,this.geometry)},e._pool=[],e._set=new Set,e}();t.default=g}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicStoreItem.js?')},\"./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicsView2D.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../../../core/Accessor */ \"./node_modules/arcgis-js-api/core/Accessor.js\"),__webpack_require__(/*! ../../../../core/HandleOwner */ \"./node_modules/arcgis-js-api/core/HandleOwner.js\"),__webpack_require__(/*! ../../../../core/Identifiable */ \"./node_modules/arcgis-js-api/core/Identifiable.js\"),__webpack_require__(/*! ../../../../core/MapPool */ \"./node_modules/arcgis-js-api/core/MapPool.js\"),__webpack_require__(/*! ../../../../core/MapUtils */ \"./node_modules/arcgis-js-api/core/MapUtils.js\"),__webpack_require__(/*! ../../../../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../../../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../../../core/screenUtils */ \"./node_modules/arcgis-js-api/core/screenUtils.js\"),__webpack_require__(/*! ../../../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ../../../../geometry/Polygon */ \"./node_modules/arcgis-js-api/geometry/Polygon.js\"),__webpack_require__(/*! ../../../../geometry/SpatialReference */ \"./node_modules/arcgis-js-api/geometry/SpatialReference.js\"),__webpack_require__(/*! ../../../../geometry/support/aaBoundingRect */ \"./node_modules/arcgis-js-api/geometry/support/aaBoundingRect.js\"),__webpack_require__(/*! ../../../../geometry/support/coordsUtils */ \"./node_modules/arcgis-js-api/geometry/support/coordsUtils.js\"),__webpack_require__(/*! ../../../../geometry/support/jsonUtils */ \"./node_modules/arcgis-js-api/geometry/support/jsonUtils.js\"),__webpack_require__(/*! ../../../../geometry/support/spatialReferenceUtils */ \"./node_modules/arcgis-js-api/geometry/support/spatialReferenceUtils.js\"),__webpack_require__(/*! ../../../../layers/graphics/data/projectionSupport */ \"./node_modules/arcgis-js-api/layers/graphics/data/projectionSupport.js\"),__webpack_require__(/*! ../../../../symbols/cim/cimSymbolUtils */ \"./node_modules/arcgis-js-api/symbols/cim/cimSymbolUtils.js\"),__webpack_require__(/*! ../../../../symbols/support/defaults */ \"./node_modules/arcgis-js-api/symbols/support/defaults.js\"),__webpack_require__(/*! ../../engine */ \"./node_modules/arcgis-js-api/views/2d/engine.js\"),__webpack_require__(/*! ../../engine/webgl/definitions */ \"./node_modules/arcgis-js-api/views/2d/engine/webgl/definitions.js\"),__webpack_require__(/*! ../features/support/AttributeStore */ \"./node_modules/arcgis-js-api/views/2d/layers/features/support/AttributeStore.js\"),__webpack_require__(/*! ../features/support/TileStore */ \"./node_modules/arcgis-js-api/views/2d/layers/features/support/TileStore.js\"),__webpack_require__(/*! ./GraphicContainer */ \"./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicContainer.js\"),__webpack_require__(/*! ./GraphicProcessingQueue */ \"./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicProcessingQueue.js\"),__webpack_require__(/*! ./GraphicStore */ \"./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicStore.js\"),__webpack_require__(/*! ./graphicsUtils */ \"./node_modules/arcgis-js-api/views/2d/layers/graphics/graphicsUtils.js\"),__webpack_require__(/*! ../../../layers/GraphicsView */ \"./node_modules/arcgis-js-api/views/layers/GraphicsView.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,r,i,a,o,n,s,h,p,c,l,d,u,g,_,f,y,v,m,S,b,w,T,G,U,I,P,C,A,O){Object.defineProperty(t,\"__esModule\",{value:!0});function M(e,t,r){if(r.has(e))return r.get(e);var i={tile:t,addedOrModified:[],removed:[]};return r.set(e,i),i}var R=function(e){function t(t){var r=e.call(this,t)||this;return r._tiles=new Map,r._graphicStoreUpdate=!1,r._graphicsSet=new Set,r._matcher=p.resolve(null),r._tileUpdateSet=new Set,r._tilesToUpdate=new Map,r._graphicIdToAbortController=new Map,r._attached=!1,r._highlightIds=new Map,r._updatingGraphicsTimer=null,r.lastUpdateId=-1,r.updateRequested=!1,r.graphicUpdateHandler=r.graphicUpdateHandler.bind(r),r.addOrUpdateGraphic=r.addOrUpdateGraphic.bind(r),r._processAnalyzedGraphics=r._processAnalyzedGraphics.bind(r),r._graphicsChangeHandler=r._graphicsChangeHandler.bind(r),r}return r.__extends(t,e),t.prototype.initialize=function(){var e=this;this._tileStore=new U.default(this.view.featuresTilingScheme),this.container=new I.default(this.view.featuresTilingScheme),this._attributeStore=new G.default({type:\"local\",initialize:function(t){return p.resolve(e.container.attributeView.initialize(t))},update:function(t){return e.container.attributeView.requestUpdate(t)},render:function(){return e.container.requestRender()}});this._graphicStore=new C.default(this.view.featuresTilingScheme,this.view.state.scale,this.uid,this.graphics,(function(t){e._attributeStore.createLocalId(t.uid),e._setFilterState(t.uid,t.visible)}),(function(t){e._attributeStore.freeLocalId(t.uid)})),this._graphicProcessingQueue=new P.default({process:this.addOrUpdateGraphic});var t=new w.WGLTemplateStore(this.container.getMaterialItems.bind(this.container),!0);this._matcher=h.isSome(this.renderer)?w.createMatcher(t,null,this.renderer):w.createMatcher(t,null),this._meshFactory=new w.WGLMeshFactory(null,this.uid,null,t),this._templateStore=t,this.watch(\"renderer\",(function(r){r&&(e._matcher=h.isSome(e.renderer)?w.createMatcher(t,null,e.renderer):w.createMatcher(t,null))})),this._tileStore.on(\"update\",this._onTileUpdate.bind(this)),this.container.on(\"attach\",(function(){e.graphics.items.length>0&&e._graphicsChangeHandler({target:e.graphics,added:e.graphics.items,removed:[],moved:[]}),e.handles.add(e.graphics.on(\"change\",e._graphicsChangeHandler),\"graphics\"),e._attached=!0,e.notifyChange(\"updating\")})),this.container.on(\"detach\",(function(){e._graphicProcessingQueue&&e._graphicProcessingQueue.clear()}))},t.prototype.destroy=function(){this._updatingGraphicsTimer&&(clearTimeout(this._updatingGraphicsTimer),this._updatingGraphicsTimer=null,this.notifyChange(\"updating\")),this.container.destroy(),this._set(\"graphics\",null),this._graphicProcessingQueue&&(this._graphicProcessingQueue.destroy(),this._graphicProcessingQueue=null),this._graphicStore.clear(),this._tileStore.destroy(),this._attributeStore=null},Object.defineProperty(t.prototype,\"updating\",{get:function(){return!this._attached||null!==this._updatingGraphicsTimer||this._graphicProcessingQueue.updating||this._tileUpdateSet.size>0||this._tilesToUpdate.size>0},enumerable:!0,configurable:!0}),t.prototype.hitTest=function(e,t){if(!this.view||!this.view.position)return p.resolve();var r=this.view.toMap(l.createScreenPoint(e,t));return this.searchFeatures(r).then((function(e){return e&&e.length?e[0]:null}))},t.prototype.searchFeatures=function(e,t){var r=this;return void 0===t&&(t=2),p.create((function(i){i(r._graphicStore.hitTest(e.x,e.y,t,r.view.state.resolution,r.view.state.rotation))}))},t.prototype.update=function(e){var t=e.state,r=this.view.featuresTilingScheme.getClosestInfoForScale(t.scale).level;this._graphicStore.updateLevel(r),this._tileStore.setViewState(t),this._graphicStoreUpdate=!0,this.updateRequested=!1},t.prototype.viewChange=function(){this.requestUpdate()},t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.requestUpdateCallback())},t.prototype.processUpdate=function(e){this.updateRequested&&(this.updateRequested=!1,this.update(e))},t.prototype.graphicUpdateHandler=function(e){var t=e.graphic,r=e.property,i=e.newValue,a=t;switch(r){case\"attributes\":break;case\"geometry\":case\"symbol\":this._graphicProcessingQueue.push(a,\"update\");break;case\"visible\":this._setFilterState(a.uid,i),this._attributeStore.sendUpdates()}},t.prototype.addHighlight=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];if(this._highlightIds.has(i)){var a=this._highlightIds.get(i);this._highlightIds.set(i,a+1)}else this._highlightIds.set(i,1)}this._updateHighlight()},t.prototype.removeHighlight=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];if(this._highlightIds.has(i)){var a=this._highlightIds.get(i)-1;0===a?this._highlightIds.delete(i):this._highlightIds.set(i,a)}}this._updateHighlight()},t.prototype._updateHighlight=function(){this._attributeStore.setHighlight(s.keysOfMap(this._highlightIds))},t.prototype._getIntersectingTiles=function(e){var t=this._graphicStore.getBounds(e);return!t||0===_.width(t)||0===_.height(t)?[]:this._tileStore.boundsIntersections(t)},t.prototype._updateTile=function(e){var t=this,r=e.tile,i=this._getGraphicsData(this._templateStore,r,e.addedOrModified);return this._processGraphics(r.key,i).then((function(i){return t._patchTile(r.key,{addOrUpdate:i,remove:e.removed}),i}))},t.prototype._patchTile=function(e,t){if(this._tiles.has(e)){var r=this._tiles.get(e);this.container.onTileData(r,t),this.container.requestRender()}},t.prototype._graphicsChangeHandler=function(e){var t=this;if(!this._graphicStoreUpdate){var r=this.view.state,i=this.view.featuresTilingScheme.getClosestInfoForScale(r.scale).level;this._graphicStore.updateLevel(i),this._tileStore.setViewState(r)}for(var a=e.added,o=e.removed,n=e.moved,s=this._tilesToUpdate,h=[],c=new Array(a.length),l=0;l<a.length;l++){var d=a[l];c[l]=d,this._graphicsSet.add(d),h.push(this.addGraphic(d))}for(var u=0,g=o;u<g.length;u++){var _=g[u];this._abortProcessingGraphic(_.uid);for(var f=0,y=this._getIntersectingTiles(_);f<y.length;f++){var v=y[f];M(v.key.id,v,s).removed.push(this._attributeStore.getLocalId(_.uid))}this._graphicsSet.delete(_),this._graphicStore.remove(_)}for(var m=0,S=n;m<S.length;m++)for(var b=S[m],w=0,T=this._getIntersectingTiles(b);w<T.length;w++){v=T[w];M(v.key.id,v,s).addedOrModified.push(b)}this._flipUpdatingGraphics(),p.all(h).then((function(){for(var e,r=0;r<c.length;r++){e=c[r];for(var i=0,a=t._getIntersectingTiles(e);i<a.length;i++){var o=a[i];M(o.key.id,o,s).addedOrModified.push(e)}}t._graphicStore.updateZ();var n=[];return s.forEach((function(e){return n.push(t._updateTile(e))})),p.all(n).then((function(){s.clear(),t.notifyChange(\"updating\")}))})).catch((function(){s.clear(),t.notifyChange(\"updating\")}))},t.prototype._getArcadeInfo=function(e){var t=(e.attributes?Object.keys(e.attributes):[]).map((function(t){return{name:t,alias:t,type:\"string\"==typeof e.attributes[t]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"}}));return h.isNone(e.geometry)?null:{geometryType:y.getJsonType(e.geometry),spatialReference:g.fromJSON(e.geometry.spatialReference),fields:t}},t.prototype._getSymbolForGraphic=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){return h.isSome(e.symbol)?[2,e.symbol]:h.isSome(this.renderer)?[2,this.renderer.getSymbolAsync(e,{scale:this.view.scale,abortOptions:t})]:[2,this._getNullSymbol(e)]}))}))},t.prototype._getSymbolResources=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i,a,o,n,s,h,c,l,d;return r.__generator(this,(function(r){switch(r.label){case 0:return this.container.stage?(i=this._getArcadeInfo(e),o=S.expandSymbol,[4,this._getSymbolForGraphic(e,t)]):[2,p.resolve(null)];case 1:return[4,o.apply(void 0,[r.sent(),i,t])];case 2:if(\"text\"!==(a=r.sent()).type)return[3,4];for(n=[],s=a,h=w.bidiText(s.text)[0],c=0;c<h.length;c++)n.push(h.charCodeAt(c));return l={symbol:a.toJSON(),id:0,glyphIds:n},[4,this.container.getMaterialItems([l])];case 3:return d=r.sent()[0].mosaicItem,[2,{symbol:a,mosaicItem:d}];case 4:return[2,{symbol:a,mosaicItem:null}]}}))}))},t.prototype._projectAndNormalizeGeometry=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,i,a,o=this;return r.__generator(this,(function(r){return h.isNone(e.geometry)?[2,p.resolve(null)]:(t=e.geometry,y.isPolygon(t)?(i=t.rings,t.rings=i):y.isPolyline(t)?(a=t.paths,t.paths=a):y.isExtent(t)&&(t=u.fromExtent(t)),[2,m.checkProjectionSupport(t.spatialReference,this.view.spatialReference).then((function(){var e=A.normalizeCentralMeridian(t),r=m.project(e,t.spatialReference,o.view.spatialReference);return f.closeRingsAndFixWinding(r),r}))])}))}))},t.prototype._onTileUpdate=function(e){var t=v.getInfo(this.view.spatialReference);if(e.added&&e.added.length>0)for(var r=0,i=e.added;r<i.length;r++){var a=i[r];this._addNewTile(a,t)}if(e.removed&&e.removed.length>0)for(var o=0,n=e.removed;o<n.length;o++){var s=n[o];this._removeTile(s.key)}},t.prototype.addOrUpdateGraphic=function(e,t,r){return this._addOrUpdateGraphic(e,t,r)},t.prototype.addGraphic=function(e){var t=this;this._abortProcessingGraphic(e.uid);var r=c.createAbortController();this._graphicIdToAbortController.set(e.uid,r);var i={signal:r.signal};return this._addOrUpdateGraphic(e,\"add\",i).then((function(){t._graphicIdToAbortController.delete(e.uid)})).catch((function(r){if(t._graphicIdToAbortController.delete(e.uid),!p.isAbortError(r))throw r}))},t.prototype._addOrUpdateGraphic=function(e,t,r){var i=this,a=this._projectAndNormalizeGeometry(e),o=this._getSymbolResources(e,r);return p.all([a,o]).then((function(a){var o=a[0],n=a[1];return\"add\"===t?i._addProjectedGraphic(e,n,o):i._updateGraphic(e,n,o,r)}))},t.prototype._addProjectedGraphic=function(e,t,r){this._graphicsSet.has(e)&&this._graphicStore.add(e,t,r)},t.prototype._updateGraphic=function(e,t,r,i){var a=this;if(!this._graphicStore.has(e)||p.isAborted(i))return p.resolve();for(var o=this._graphicStore.update(e,t,r),s=o.oldBounds,h=o.newBounds,c=0===_.width(s)&&0===_.height(s),l=0===_.width(h)&&0===_.height(h),d=c?[]:this._tileStore.boundsIntersections(s),u=l?[]:this._tileStore.boundsIntersections(h),g=n.acquire(),f=0,y=d;f<y.length;f++){var v=y[f];g.set(v.key,{addOrUpdate:null,remove:[this._attributeStore.getLocalId(e.uid)]})}for(var m=0,S=u;m<S.length;m++){v=S[m];var b=this._getGraphicData(this._templateStore,v,e);if(g.has(v.key)){var w=g.get(v.key);w.remove.length=0,w.addOrUpdate=b}else g.set(v.key,{addOrUpdate:b,remove:null})}var T=[];return g.forEach((function(e,t){var r=a._processGraphics(t,e.addOrUpdate,i).then((function(r){a._patchTile(t,{addOrUpdate:r,remove:e.remove})}));T.push(r)})),n.release(g),p.all(T).then((function(){}))},t.prototype._addTile=function(e,t){var r=_.create();this.view.featuresTilingScheme.getTileBounds(r,e);var i=new w.WGLTile(e,r,!0),a={clear:!0,addOrUpdate:t,remove:[]};this._tiles.set(e,i),this.container.addChild(i),i.setData(a,!1,!1)},t.prototype._addNewTile=function(e,t){var r=this,i=this._graphicStore.queryTileData(this._templateStore,e);if(t)for(var a=Math.round((t.valid[1]-t.valid[0])/e.resolution),o=0,n=i;o<n.length;o++){var s=n[o];s.geometry&&y.isPoint(s.geometry)&&this._wrapPoints(s,a)}var h=e.key;this._tileUpdateSet.add(e.key),this.notifyChange(\"updating\"),this._processGraphics(h,i).then((function(e){r._addTile(h,e),r._tileUpdateSet.delete(h),r.notifyChange(\"updating\")})).catch((function(e){if(r._tileUpdateSet.delete(h),r.notifyChange(\"updating\"),!p.isAbortError(e))throw e}))},t.prototype._removeTile=function(e){if(this._tiles.has(e)){var t=this._tiles.get(e);this.container.removeChild(t),t.destroy(),this._tiles.delete(e)}},t.prototype._setFilterState=function(e,t){var r=this._attributeStore.getLocalId(e),i=this._attributeStore.getHighlightFlag(e);this._attributeStore.setData(r,0,0,i|(t?T.FILTER_FLAG_0:0))},t.prototype._getGraphicsData=function(e,t,r){var i=v.getInfo(this.view.spatialReference),a=this._graphicStore.getGraphicsData(e,t,r);if(i)for(var o=Math.round((i.valid[1]-i.valid[0])/t.resolution),n=0,s=a;n<s.length;n++){var h=s[n];h.geometry&&y.isPoint(h.geometry)&&this._wrapPoints(h,o)}return a.sort((function(e,t){return e.insertAfter-t.insertAfter})),a},t.prototype._getGraphicData=function(e,t,r){var i=this._graphicStore.getGraphicData(e,t,r),a=[i],o=v.getInfo(this.view.spatialReference);if(o){var n=Math.round((o.valid[1]-o.valid[0])/t.resolution);i.geometry&&y.isPoint(i.geometry)&&this._wrapPoints(i,n)}return a},t.prototype._wrapPoints=function(e,t){var r=e.geometry;512===t?r.x<20?e.geometry={points:[[r.x,r.y],[t,0]]}:r.x>492&&(e.geometry={points:[[r.x,r.y],[-t,0]]}):r.x<-20?e.geometry={points:[[r.x,r.y],[t,0]]}:r.x>532&&(e.geometry={points:[[r.x,r.y],[-t,0]]})},t.prototype._processGraphics=function(e,t,i){return r.__awaiter(this,void 0,void 0,(function(){var a,o;return r.__generator(this,(function(r){switch(r.label){case 0:return t&&t.length&&this._meshFactory?(a=this._meshFactory,[4,this._matcher.then((function(e){return a.analyze(t,e,null,null,i)}))]):[2,null];case 1:return o=r.sent(),this._attributeStore.sendUpdates(),[2,this._processAnalyzedGraphics(e,o)]}}))}))},t.prototype._processAnalyzedGraphics=function(e,t){for(var r=this._meshFactory,i=r.createMeshData(t.length),a=this._attributeStore,o=0,n=t;o<n.length;o++){var s=n[o];s.insertAfter=-1===s.insertAfter?-1:a.getLocalId(s.insertAfter),s.localId=a.getLocalId(s.attributes[this.uid]),r.write(i,s,null,null,e.level,null)}return w.TileData.fromMeshData(i)},t.prototype._abortProcessingGraphic=function(e){this._graphicIdToAbortController.has(e)&&this._graphicIdToAbortController.get(e).abort()},t.prototype._getNullSymbol=function(e){var t=e.geometry;return y.isPolyline(t)?b.errorPolylineSymbol2D:y.isPolygon(t)||y.isExtent(t)?b.errorPolygonSymbol2D:b.errorPointSymbol2D},t.prototype._flipUpdatingGraphics=function(){var e=this;this._updatingGraphicsTimer&&clearTimeout(this._updatingGraphicsTimer),this._updatingGraphicsTimer=setTimeout((function(){e._updatingGraphicsTimer=null,e.notifyChange(\"updating\")}),160),this.notifyChange(\"updating\")},r.__decorate([d.property()],t.prototype,\"_graphicProcessingQueue\",void 0),r.__decorate([d.property({constructOnly:!0})],t.prototype,\"requestUpdateCallback\",void 0),r.__decorate([d.property({constructOnly:!0})],t.prototype,\"graphics\",void 0),r.__decorate([d.property({dependsOn:[\"_graphicProcessingQueue.updating\"]})],t.prototype,\"updating\",null),r.__decorate([d.property()],t.prototype,\"view\",void 0),r.__decorate([d.property()],t.prototype,\"updateRequested\",void 0),t=r.__decorate([d.subclass(\"esri.views.2d.layers.support.GraphicsView2D\")],t)}(O.GraphicsView(a.HandleOwnerMixin(o.IdentifiableMixin(i))));t.default=R}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/views/2d/layers/graphics/GraphicsView2D.js?')},\"./node_modules/arcgis-js-api/views/layers/GraphicsView.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,r,t,o){Object.defineProperty(r,\"__esModule\",{value:!0}),r.GraphicsView=function(e){return function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.graphics=null,r.renderer=null,r.view=null,r}return t.__extends(r,e),t.__decorate([o.property()],r.prototype,\"graphics\",void 0),t.__decorate([o.property()],r.prototype,\"renderer\",void 0),t.__decorate([o.property()],r.prototype,\"updating\",void 0),t.__decorate([o.property()],r.prototype,\"view\",void 0),r=t.__decorate([o.subclass(\"esri.views.layers.GraphicsView\")],r)}(e)}}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/views/layers/GraphicsView.js?')}}]);","extractedComments":[]}