{"code":"(function(){(this||window).webpackJsonp.registerAbsMids({\"esri/layers/support/rasterDatasets/EphemeralBlockCache\":\"./node_modules/arcgis-js-api/layers/support/rasterDatasets/EphemeralBlockCache.js\",\"esri/layers/support/rasterDatasets/RawBlockCache\":\"./node_modules/arcgis-js-api/layers/support/rasterDatasets/RawBlockCache.js\",\"esri/layers/support/rasterFunctions/rasterProjectionHelper\":\"./node_modules/arcgis-js-api/layers/support/rasterFunctions/rasterProjectionHelper.js\"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{\"./node_modules/arcgis-js-api/layers/support/rasterDatasets/EphemeralBlockCache.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! ../../../core/MapUtils */ \"./node_modules/arcgis-js-api/core/MapUtils.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(t,e,r){return function(){function t(t,e){void 0===t&&(t=15e3),void 0===e&&(e=5e3),this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=t,this._interval=Math.min(t,e)}return t.prototype.decreaseRefCount=function(t,e){var r=t+\"/\"+e,i=this._cachedBlocks;if(i.has(r)){var o=i.get(r);return o.refCount--,o.refCount<=0&&(i.delete(r),o.controller&&o.controller.abort()),o.refCount}return 0},t.prototype.getBlock=function(t,e){var r=t+\"/\"+e,i=this._cachedBlocks;if(i.has(r)){var o=i.get(r);return o.ts=Date.now(),o.refCount++,i.delete(r),i.set(r,o),o.block}return null},t.prototype.putBlock=function(t,e,r,i){void 0===i&&(i=null);var o=this._cachedBlocks,n=t+\"/\"+e;if(o.has(n)){var s=o.get(n);s.ts=Date.now(),s.refCount++}else o.set(n,{block:r,ts:Date.now(),refCount:1,controller:i});this.trim(),this.updateTimer()},t.prototype.deleteBlock=function(t,e){var r=this._cachedBlocks,i=t+\"/\"+e;r.has(i)&&r.delete(i)},t.prototype.updateMaxSize=function(t){this._size=t,this.trim()},t.prototype.empty=function(){this._cachedBlocks.clear(),this.clearTimer()},t.prototype.getCurrentSize=function(){return this._cachedBlocks.size},t.prototype.updateTimer=function(){var t=this;if(null==this._timer){var e=this._cachedBlocks;this._timer=setInterval((function(){for(var i=r.pairsOfMap(e),o=Date.now(),n=0;n<i.length&&i[n][1].ts<=o-t._duration;n++)e.delete(i[n][0]);0===e.size&&t.clearTimer()}),this._interval)}},t.prototype.trim=function(){var t=this._cachedBlocks;if(!(-1===this._size||this._size>=t.size))for(var e=r.pairsOfMap(t),i=0;i<e.length-this._size;i++)t.delete(e[i][0])},t.prototype.clearTimer=function(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)},t}()}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/rasterDatasets/EphemeralBlockCache.js?')},\"./node_modules/arcgis-js-api/layers/support/rasterDatasets/RawBlockCache.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! ../../../geometry */ \"./node_modules/arcgis-js-api/geometry.js\"),__webpack_require__(/*! ./EphemeralBlockCache */ \"./node_modules/arcgis-js-api/layers/support/rasterDatasets/EphemeralBlockCache.js\"),__webpack_require__(/*! ../rasterFunctions/rasterProjectionHelper */ \"./node_modules/arcgis-js-api/layers/support/rasterFunctions/rasterProjectionHelper.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,n,r,a){Object.defineProperty(t,\"__esModule\",{value:!0});var o=new Map,l=new r;t.register=function(e,t){var n={extent:null,rasterInfo:t,cache:new Map};if(o.has(e)){var r=o.get(e);return r.push(n),r.length-1}return o.set(e,[n]),0},t.unregister=function(e,t){o.has(e)&&(o.get(e)[t]=null)},t.deleteRaster=function(e){o.delete(e)},t.decreaseRefCount=function(e,t,n){if(!o.has(e))return null==t?l.decreaseRefCount(e,n):0;var r=o.get(e);if(null==r[t])return l.decreaseRefCount(e,n);var a=r[t].cache;if(a.has(n)){var c=a.get(n);if(c.refCount--,0===c.refCount){a.delete(n);for(var i=0;i<r.length;i++)r[i]&&r[i].cache.has(n)&&r[i].cache.delete(n);c.controller&&c.controller.abort()}return c.refCount}return 0},t.getBlock=function(e,t,n){if(!o.has(e))return null==t?l.getBlock(e,n):null;var r=o.get(e);if(null==r[t]){for(var a=0;a<r.length;a++){if(r[a]&&r[a].cache.has(n))return(c=r[a].cache.get(n)).refCount++,c.block}return l.getBlock(e,n)}var c,i=r[t].cache;if(i.has(n))return(c=i.get(n)).refCount++,c.block;for(a=0;a<r.length;a++)if(a!==t&&r[a]&&r[a]&&r[a].cache.has(n)){var u=r[a].cache.get(n);return u.refCount++,i.set(n,u),u.block}return null},t.putBlock=function(e,t,n,r,a){if(void 0===a&&(a=null),o.has(e)){var c=o.get(e);null!=c[t]?c[t].cache.set(n,{refCount:1,block:r,controller:a}):l.putBlock(e,n,r,a)}else null==t&&l.putBlock(e,n,r,a)},t.deleteBlock=function(e,t,n){if(o.has(e)){var r=o.get(e);null!=r[t]?r[t].cache.delete(n):l.deleteBlock(e,n)}else null==t&&l.deleteBlock(e,n)},t.update=function(e,t,r,l,c,i,u){void 0===u&&(u=null);var f=function(e,t){if(!o.has(e))return null;var n=o.get(e);return null==n[t]?null:n[t]}(e,t),s=f.extent,h=f.cache,g=f.rasterInfo,x=r.clone().normalize();if(r=x[0],!s||s.xmin!==r.xmin||s.xmax!==r.xmax||s.ymin!==r.ymin||s.ymax!==r.ymax){var m=g.spatialReference,d=a.projectExtent(r,m,u),v=new n.Point({x:l,y:l,spatialReference:r.spatialReference});if(null!==c||(c=a.projectResolution(v,m,r,u))){var y=a.snapPyramid(c,g,i||\"closest\"),p=y.pyramidLevel,k=y.pyramidResolution;if(!y.excessiveReading){for(var B=Math.floor((d.xmin-g.storageInfo.origin.x)/k.x),C=Math.floor((g.storageInfo.origin.y-d.ymax)/k.y),M=Math.ceil((d.xmax-d.xmin)/k.x-.1),R=Math.ceil((d.ymax-d.ymin)/k.y-.1),b=p>0?g.storageInfo.pyramidBlockWidth:g.storageInfo.blockWidth,I=p>0?g.storageInfo.pyramidBlockHeight:g.storageInfo.blockHeight,w=Math.floor(B/b),j=Math.floor(C/I),P=Math.floor((B+M-1)/b),E=Math.floor((C+R-1)/I),H=new Set,W=j-1;W<=E+1;W++)for(var _=w-1;_<=P+1;_++)H.add(p+\"/\"+W+\"/\"+_);h.forEach((function(e,t){H.has(t)||h.delete(t)})),f.extent={xmin:r.xmin,ymin:r.ymin,xmax:r.xmax,ymax:r.ymax}}}}}}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/rasterDatasets/RawBlockCache.js?')},\"./node_modules/arcgis-js-api/layers/support/rasterFunctions/rasterProjectionHelper.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../../geometry */ \"./node_modules/arcgis-js-api/geometry.js\"),__webpack_require__(/*! ../../../core/Error */ \"./node_modules/arcgis-js-api/core/Error.js\"),__webpack_require__(/*! ../../../geometry/projection */ \"./node_modules/arcgis-js-api/geometry/projection.js\"),__webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils */ \"./node_modules/arcgis-js-api/geometry/support/spatialReferenceUtils.js\"),__webpack_require__(/*! ../../../geometry/support/webMercatorUtils */ \"./node_modules/arcgis-js-api/geometry/support/webMercatorUtils.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,r,o,t,i,n,a,s){Object.defineProperty(r,\"__esModule\",{value:!0});var l=function(e,r){var o=(e.isWGS84||e.isWebMercator)&&(r.isWGS84||r.isWebMercator);return!(e.equals(r)||o)};r.defaultGridSpacing=32,r.load=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return n.isLoaded()||!n.isSupported()?[2,null]:[4,n.load()];case 1:return e.sent(),[2]}}))}))},r.projectResolution=function(e,r,o,a){if(void 0===a&&(a=null),e.spatialReference.equals(r))return e;var c=l(e.spatialReference,r);if(c&&!n.isLoaded())throw new i(\"rasterprojectionhelper-projectResolution\",\"projection engine is not loaded\");var p=o.center,f=new t.Extent({xmin:p.x-e.x/2,xmax:p.x+e.x/2,ymin:p.y-e.y/2,ymax:p.y+e.y/2,spatialReference:e.spatialReference}),u=c?n.project(f,r,a):s.project(f,r);return null==u?null:new t.Point(u.xmax-u.xmin,u.ymax-u.ymin,r)},r.projectPoint=function(e,r,o){if(void 0===o&&(o=null),e.spatialReference.equals(r))return e;var t=l(e.spatialReference,r);if(t&&!n.isLoaded())throw new i(\"rasterprojectionhelper-projectResolution\",\"projection engine is not loaded\");return t?n.project(e,r,o):s.project(e,r)},r.projectExtent=function(e,r,o){if(void 0===o&&(o=null),e.spatialReference.equals(r))return e;var t=l(e.spatialReference,r);if(t&&!n.isLoaded())throw new i(\"rasterprojectionhelper-projectExtent\",\"projection engine is not loaded\");return t?n.project(e,r,o):s.project(e,r)},r.getProjectionOffsetGrid=function(e,o,c,p,f,u){void 0===p&&(p=null),void 0===f&&(f=!1),void 0===u&&(u=[r.defaultGridSpacing,r.defaultGridSpacing]);var d=o.spatialReference.equals(e.spatialReference),x=l(e.spatialReference,o.spatialReference);if(x&&!n.isLoaded())throw new i(\"rasterprojectionhelper-projectResolution\",\"projection engine is not loaded\");if(!(e&&o&&c))return null;for(var y,h,m,w=e.xmin,v=e.ymin,j=e.xmax,R=e.ymax,g=e.spatialReference,M=o.spatialReference,S=a.getInfo(g),L=S&&S.valid[0],b=S&&S.valid[1],N={x:u[0]*c.x,y:u[1]*c.y},P={cols:Math.ceil((j-w)/N.x-.1)+1,rows:Math.ceil((R-v)/N.y-.1)+1},q=N.x,G=N.y,_=[],z=!1,E=0;E<P.cols;E++){for(var W=[],A=0;A<P.rows;A++)y=new t.Point({x:w+q*E,y:R-G*A,spatialReference:g}),h=d?y:x?n.project(y,M,p):s.project(y,M),W.push(h),E>0&&f&&h&&m[A]&&S&&h.x<m[A].x&&(h.x+=b-L),h?(_.push((h.x-o.xmin)/(o.xmax-o.xmin)),_.push((o.ymax-h.y)/(o.ymax-o.ymin))):(_.push(NaN),_.push(NaN),z=!0);m=W}var F=function(e,r){var o=(e[0]+e[4]+e[4*r.cols]+e[4*r.cols+4])/4,t=(e[1]+e[5]+e[4*r.rows+1]+e[4*r.rows+5])/4;return[Math.abs(o-e[2*r.rows+2]),Math.abs(t-e[2*r.rows+3])]}(_,P),I=new Float32Array((P.cols-1)*(P.rows-1)*2*6),O=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),U=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(E=0;E<P.cols-1;E++){for(A=0;A<P.rows-1;A++){for(var k=E*P.rows*2+2*A,B=_[k],C=_[k+1],D=_[k+2],H=_[k+3],J=_[k+=2*P.rows],K=_[k+1],Q=_[k+2],T=_[k+3],V=0,X=12*(A*(P.cols-1)+E),Y=0;Y<3;Y++)I[X++]=O[V++]*B+O[V++]*D+O[V++]*Q;V=0;for(Y=0;Y<3;Y++)I[X++]=O[V++]*C+O[V++]*H+O[V++]*T;V=0;for(Y=0;Y<3;Y++)I[X++]=U[V++]*B+U[V++]*J+U[V++]*Q;V=0;for(Y=0;Y<3;Y++)I[X++]=U[V++]*C+U[V++]*K+U[V++]*T}if(z)for(var Z=0;Z<I.length;Z++)isNaN(I[Z])&&(I[Z]=-1)}return{offsets:_,error:F,coefficients:I,spacing:u,size:[P.cols-1,P.rows-1]}},r.snapPyramid=function(e,r,o){var i=Math.log(e.x/r.pixelSize.x)/Math.LN2,n=Math.log(e.y/r.pixelSize.y)/Math.LN2,a=r.storageInfo.maximumPyramidLevel||0,s=\"down\"===o?Math.floor(Math.min(i,n)):\"up\"===o?Math.ceil(Math.max(i,n)):Math.round((i+n)/2),l=!1;s<0?s=0:s>a&&(l=s>a+3,s=a);var c=Math.pow(2,s);return{pyramidLevel:s,pyramidResolution:new t.Point({x:c*r.pixelSize.x,y:c*r.pixelSize.y,spatialReference:r.spatialReference}),excessiveReading:l}}}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/rasterFunctions/rasterProjectionHelper.js?')}}]);","extractedComments":[]}