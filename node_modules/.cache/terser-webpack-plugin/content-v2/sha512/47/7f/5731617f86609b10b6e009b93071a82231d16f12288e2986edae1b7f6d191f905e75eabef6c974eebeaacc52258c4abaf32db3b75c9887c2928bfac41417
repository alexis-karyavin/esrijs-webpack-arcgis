{"code":"(function(){(this||window).webpackJsonp.registerAbsMids({\"esri/geometry/geometryAdapters/json\":\"./node_modules/arcgis-js-api/geometry/geometryAdapters/json.js\",\"esri/layers/graphics/data/projectionSupport\":\"./node_modules/arcgis-js-api/layers/graphics/data/projectionSupport.js\",\"esri/renderers/support/clickToleranceUtils\":\"./node_modules/arcgis-js-api/renderers/support/clickToleranceUtils.js\",\"esri/views/2d/layers/ImageryTileLayerView2D\":\"./node_modules/arcgis-js-api/views/2d/layers/ImageryTileLayerView2D.js\",\"esri/views/layers/ImageryTileLayerView\":\"./node_modules/arcgis-js-api/views/layers/ImageryTileLayerView.js\",\"esri/views/layers/support/popupUtils\":\"./node_modules/arcgis-js-api/views/layers/support/popupUtils.js\",\"esri/views/support/drapedUtils\":\"./node_modules/arcgis-js-api/views/support/drapedUtils.js\"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{\"./node_modules/arcgis-js-api/geometry/geometryAdapters/json.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports], __WEBPACK_AMD_DEFINE_RESULT__ = (function(t,i){Object.defineProperty(i,\"__esModule\",{value:!0}),i.jsonAdapter={convertToGEGeometry:function(t,i){if(null==i)return null;return t.convertJSONToGeometry(i)},exportPoint:function(t,i,n){var s=new e(t.getPointX(i),t.getPointY(i),n),h=t.hasZ(i),a=t.hasM(i);h&&(s.z=t.getPointZ(i));a&&(s.m=t.getPointM(i));return s},exportPolygon:function(t,i,e){return new n(t.exportPaths(i),e,t.hasZ(i),t.hasM(i))},exportPolyline:function(t,i,e){return new s(t.exportPaths(i),e,t.hasZ(i),t.hasM(i))},exportMultipoint:function(t,i,e){return new h(t.exportPoints(i),e,t.hasZ(i),t.hasM(i))},exportExtent:function(t,i,e){var n=t.hasZ(i),s=t.hasM(i),h=new a(t.getXMin(i),t.getYMin(i),t.getXMax(i),t.getYMax(i),e);if(n){var o=t.getZExtent(i);h.zmin=o.vmin,h.zmax=o.vmax}if(s){var r=t.getMExtent(i);h.mmin=r.vmin,h.mmax=r.vmax}return h}};var e=function(t,i,e){this.x=t,this.y=i,this.spatialReference=e,this.z=void 0,this.m=void 0};var n=function(t,i,e,n){this.rings=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,e&&(this.hasZ=e),n&&(this.hasM=n)};var s=function(t,i,e,n){this.paths=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,e&&(this.hasZ=e),n&&(this.hasM=n)};var h=function(t,i,e,n){this.points=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,e&&(this.hasZ=e),n&&(this.hasM=n)};var a=function(t,i,e,n,s){this.xmin=t,this.ymin=i,this.xmax=e,this.ymax=n,this.spatialReference=s,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/geometry/geometryAdapters/json.js?')},\"./node_modules/arcgis-js-api/layers/graphics/data/projectionSupport.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../../core/Error */ \"./node_modules/arcgis-js-api/core/Error.js\"),__webpack_require__(/*! ../../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../../geometry/projection */ \"./node_modules/arcgis-js-api/geometry/projection.js\"),__webpack_require__(/*! ../../../geometry/geometryAdapters/json */ \"./node_modules/arcgis-js-api/geometry/geometryAdapters/json.js\"),__webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils */ \"./node_modules/arcgis-js-api/geometry/support/spatialReferenceUtils.js\"),__webpack_require__(/*! ../../../geometry/support/webMercatorUtils */ \"./node_modules/arcgis-js-api/geometry/support/webMercatorUtils.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,r,t,n,i,o,s,a,u){Object.defineProperty(r,\"__esModule\",{value:!0});var p=[0,0];function c(e,r){var t,n,i;if(!r)return null;if(\"x\"in r){var o={x:0,y:0};return t=e(r.x,r.y,p),o.x=t[0],o.y=t[1],null!=r.z&&(o.z=r.z),null!=r.m&&(o.m=r.m),o}if(\"xmin\"in r){o={xmin:0,ymin:0,xmax:0,ymax:0};return n=e(r.xmin,r.ymin,p),o.xmin=n[0],o.ymin=n[1],i=e(r.xmax,r.ymax,p),o.xmax=i[0],o.ymax=i[1],r.hasZ&&(o.zmin=r.zmin,o.zmax=r.zmax,o.hasZ=!0),r.hasM&&(o.mmin=r.mmin,o.mmax=r.mmax,o.hasM=!0),o}return\"rings\"in r?{rings:l(r.rings,e),hasM:r.hasM,hasZ:r.hasZ}:\"paths\"in r?{paths:l(r.paths,e),hasM:r.hasM,hasZ:r.hasZ}:\"points\"in r?{points:h(r.points,e),hasM:r.hasM,hasZ:r.hasZ}:void 0}function l(e,r){for(var t=[],n=0,i=e;n<i.length;n++){var o=i[n];t.push(h(o,r))}return t}function h(e,r){for(var t=[],n=0,i=e;n<i.length;n++){var o=i[n],s=r(o[0],o[1],[0,0]);t.push(s),o.length>2&&s.push(o[2]),o.length>3&&s.push(o[3])}return t}function f(e,r){return!(!a.isValid(e)||!a.isValid(r)||a.equals(e,r)||u.canProject(e,r))}r.doesBrowserSupportProjection=function(e,r){return!f(e,r)||o.isSupported()},r.checkProjectionSupport=function(e,r){return t.__awaiter(this,void 0,void 0,(function(){var i,s,a;return t.__generator(this,(function(t){if(!r)return[2];if(Array.isArray(e)){for(i=0,s=e;i<s.length;i++)if(f((a=s[i]).geometry&&a.geometry.spatialReference,r)){if(o.isSupported())return[2,o.load()];throw new n(\"feature-store:unsupported-query\",\"projection not supported\",{inSpatialReference:e,outSpatialReference:r})}return[2]}if(!f(e,r))return[2];if(o.isSupported())return[2,o.load()];throw new n(\"feature-store:unsupported-query\",\"projection not supported\",{inSpatialReference:e,outSpatialReference:r})}))}))};var m=c.bind(null,u.lngLatToXY),d=c.bind(null,u.xyToLngLat);r.project=function(e,r,t){return e?(t||(t=r,r=e.spatialReference),a.isValid(r)&&a.isValid(t)&&!a.equals(r,t)?u.canProject(r,t)?a.isWebMercator(t)?m(e):d(e):o.projectMany(s.jsonAdapter,[e],r,t,null)[0]:e):e};var _=new(function(){function e(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}return e.prototype.push=function(e,r,n){return t.__awaiter(this,void 0,void 0,(function(){var o,s=this;return t.__generator(this,(function(t){return e&&e.length&&r&&n&&!a.equals(r,n)||i.resolve(e),o={geometries:e,inSpatialReference:r,outSpatialReference:n,resolve:null},this._jobs.push(o),[2,i.create((function(e){o.resolve=e,null===s._timer&&(s._timer=setTimeout(s._process,10))}))]}))}))},e.prototype._process=function(){this._timer=null;var e=this._jobs.shift();if(e){var r=e.geometries,t=e.inSpatialReference,n=e.outSpatialReference,i=e.resolve;u.canProject(t,n)?a.isWebMercator(n)?i(r.map(m)):i(r.map(d)):i(o.projectMany(s.jsonAdapter,r,t,n,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}},e}());r.projectMany=function(e,r,n){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){return[2,_.push(e,r,n)]}))}))}}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/graphics/data/projectionSupport.js?')},\"./node_modules/arcgis-js-api/renderers/support/clickToleranceUtils.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,r){function t(e,r){return r?\"xoffset\"in r&&r.xoffset?Math.max(e,Math.abs(r.xoffset)):\"yoffset\"in r&&r.yoffset?Math.max(e,Math.abs(r.yoffset||0)):e:e}function n(e,r){return\"number\"==typeof e?e:e&&e.stops&&e.stops.length?function(e){for(var r=0,t=0,n=0;n<e.length;n++){var a=e[n].size;\"number\"==typeof a&&(r+=a,t++)}return r/t}(e.stops):r}Object.defineProperty(r,\"__esModule\",{value:!0}),r.calculateTolerance=function(e){var r=e&&e.renderer,a=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!r)return a;var f=\"visualVariables\"in r?function(e,r){if(!r)return e;var t=r.filter((function(e){return\"size\"===e.type})).map((function(r){var t=r.maxSize,a=r.minSize;return(n(t,e)+n(a,e))/2})),a=0,f=t.length;if(0===f)return e;for(var o=0;o<f;o++)a+=t[o];var u=Math.floor(a/f);return Math.max(u,e)}(a,r.visualVariables):a;if(\"simple\"===r.type)return t(f,r.symbol);if(\"unique-value\"===r.type){var o=f;return r.uniqueValueInfos.forEach((function(e){o=t(o,e.symbol)})),o}if(\"class-breaks\"===r.type){var u=f;return r.classBreakInfos.forEach((function(e){u=t(u,e.symbol)})),u}return r.type,f}}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/renderers/support/clickToleranceUtils.js?')},\"./node_modules/arcgis-js-api/views/2d/layers/ImageryTileLayerView2D.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../../geometry */ \"./node_modules/arcgis-js-api/geometry.js\"),__webpack_require__(/*! ../../../Graphic */ \"./node_modules/arcgis-js-api/Graphic.js\"),__webpack_require__(/*! ../../../core/has */ \"./node_modules/arcgis-js-api/core/has.js\"),__webpack_require__(/*! ../../../core/Logger */ \"./node_modules/arcgis-js-api/core/Logger.js\"),__webpack_require__(/*! ../../../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../../core/screenUtils */ \"./node_modules/arcgis-js-api/core/screenUtils.js\"),__webpack_require__(/*! ../../../core/watchUtils */ \"./node_modules/arcgis-js-api/core/watchUtils.js\"),__webpack_require__(/*! ../../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ../../../layers/support/PixelBlock */ \"./node_modules/arcgis-js-api/layers/support/PixelBlock.js\"),__webpack_require__(/*! ../../../layers/support/TileInfo */ \"./node_modules/arcgis-js-api/layers/support/TileInfo.js\"),__webpack_require__(/*! ../../../layers/support/rasterDatasets/RawBlockCache */ \"./node_modules/arcgis-js-api/layers/support/rasterDatasets/RawBlockCache.js\"),__webpack_require__(/*! ../../../layers/support/rasterFunctions/pixelUtils */ \"./node_modules/arcgis-js-api/layers/support/rasterFunctions/pixelUtils.js\"),__webpack_require__(/*! ../../../layers/support/rasterFunctions/rasterProjectionHelper */ \"./node_modules/arcgis-js-api/layers/support/rasterFunctions/rasterProjectionHelper.js\"),__webpack_require__(/*! ../engine */ \"./node_modules/arcgis-js-api/views/2d/engine.js\"),__webpack_require__(/*! ./LayerView2D */ \"./node_modules/arcgis-js-api/views/2d/layers/LayerView2D.js\"),__webpack_require__(/*! ../tiling/TileInfoView */ \"./node_modules/arcgis-js-api/views/2d/tiling/TileInfoView.js\"),__webpack_require__(/*! ../tiling/TileQueue */ \"./node_modules/arcgis-js-api/views/2d/tiling/TileQueue.js\"),__webpack_require__(/*! ../tiling/TileStrategy */ \"./node_modules/arcgis-js-api/views/2d/tiling/TileStrategy.js\"),__webpack_require__(/*! ../../layers/ImageryTileLayerView */ \"./node_modules/arcgis-js-api/views/layers/ImageryTileLayerView.js\"),__webpack_require__(/*! ../../layers/LayerView */ \"./node_modules/arcgis-js-api/views/layers/LayerView.js\"),__webpack_require__(/*! ../../layers/RefreshableLayerView */ \"./node_modules/arcgis-js-api/views/layers/RefreshableLayerView.js\"),__webpack_require__(/*! ../../support/drapedUtils */ \"./node_modules/arcgis-js-api/views/support/drapedUtils.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,i,r,s,a,o,l,n,h,u,c,p,y,d,_,b,f,g,m,w,v,P,I,R,x){var T=o.getLogger(\"esri.views.2d.layers.ImageryTileLayerView2D\"),U=[0,0];return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._tileStrategy=null,t._tileInfoView=null,t._fetchQueue=null,t._blockCacheRegistryUrl=null,t._blockCacheRegistryId=null,t._bitmapView=null,t._emptyTilePixelBlock=null,t._previousSrcResolution=null,t._needBlockCacheUpdate=!1,t._globalSymbolizerParams=null,t._symbolizerParams=null,t._abortController=null,t._globalUpdateRequested=!1,t.useWebGLForProcessing=null,t.datumTransformation=null,t.layer=null,t._redrawDebounced=n.debounce((function(e){return t._redrawImage(e)}),2e3),t}return i.__extends(t,e),t.prototype.initialize=function(){var e=this.updateFullExtent();this.addResolvingPromise(e)},Object.defineProperty(t.prototype,\"useProgressiveUpdate\",{get:function(){return null==this._get(\"useProgressiveUpdate\")||this._get(\"useProgressiveUpdate\")},set:function(e){var t=this;this._tileStrategy&&this.useProgressiveUpdate!==e&&(this._tileStrategy.destroy(),this._bitmapView.removeAllChildren(),this._tileStrategy=new v({cachePolicy:e?\"keep\":\"purge\",resampling:!1,acquireTile:function(e){return t.acquireTile(e)},releaseTile:function(e){return t.releaseTile(e)},cacheSize:e?40:0,tileInfoView:this._tileInfoView}),this._set(\"useProgressiveUpdate\",e),this.requestUpdate())},enumerable:!0,configurable:!0}),t.prototype.hitTest=function(e,t){if(this.suspended)return n.resolve(null);var i=this.view.toMap(h.createScreenPoint(e,t));return n.resolve(new s({attributes:{},geometry:i}))},t.prototype.update=function(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume();var t=!this.useProgressiveUpdate||this._needBlockCacheUpdate;if(this.layer.raster&&t){var i=e.state,s=i.extent,a=i.resolution,o=this._previousViewResolution===a?this._previousSrcResolution:b.projectResolution(new r.Point({x:a,y:a,spatialReference:this.view.spatialReference}),this.layer.spatialReference,this.fullExtent,this.datumTransformation),l=s.toJSON?s:r.Extent.fromJSON(s);d.update(this._blockCacheRegistryUrl,this._blockCacheRegistryId,l,a,o,this.layer.raster.ioConfig.sampling),this._previousViewResolution!==a&&(this._previousViewResolution=a,null!=this._symbolizerParams&&this._updateSymbolizerParams()),this._previousSrcResolution=o,this._needBlockCacheUpdate=!1}this.notifyChange(\"updating\")},t.prototype.attach=function(){var e=this;this.layer.increaseRasterJobHandlerUsage(),null==this.useWebGLForProcessing&&(this.useWebGLForProcessing=this.layer.symbolizer.canRenderInWebGL),a(\"esri-webgl-texture-float\")&&a(\"esri-webgl-color-buffer-float\")||(this.useWebGLForProcessing=!1),this.layer.raster&&(this.layer.raster.ioConfig.allowPartialFill=!0);var t=this._createTileInfo();this._set(\"tileInfo\",t),this._tileInfoView=new m(t,this.fullExtent),this._fetchQueue=new w({tileInfoView:this._tileInfoView,concurrency:10,process:function(t,i){return e.fetchTile(t,i)}}),this._tileStrategy=new v({cachePolicy:this.useProgressiveUpdate?\"keep\":\"purge\",resampling:!1,acquireTile:function(t){return e.acquireTile(t)},releaseTile:function(t){return e.releaseTile(t)},cacheSize:this.useProgressiveUpdate?40:0,tileInfoView:this._tileInfoView}),this._bitmapView=new f.RasterTileContainer(this._tileInfoView),this.container.addChild(this._bitmapView),this.handles.add([u.watch(this,[\"layer.interpolation\",\"layer.bandIds\",\"layer.renderer\"],(function(){return e._redrawDebounced().catch((function(e){n.isAbortError(e)||T.error(e)}))})),u.watch(this,[\"layer.multidimensionalDefinition\"],this.refreshDebounced)],\"attach\"),this._updateBlockCacheRegistry()},t.prototype.detach=function(){this.handles.remove(\"attach\"),this.layer.decreaseRasterJobHandlerUsage(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null,d.unregister(this._blockCacheRegistryUrl,this._blockCacheRegistryId)},t.prototype.moveStart=function(){this.requestUpdate()},t.prototype.viewChange=function(){this.requestUpdate()},t.prototype.moveEnd=function(){var e=this;!this.hasTilingEffects&&this.useProgressiveUpdate||(this._abortController&&this._abortController.abort(),this._abortController=n.createAbortController(),0===this._fetchQueue.length&&this._redrawImage(this._abortController.signal).then((function(){e._globalUpdateRequested=!1,e.requestUpdate()}))),this.requestUpdate()},t.prototype.createFetchPopupFeaturesQueryGeometry=function(e,t){return x.createQueryGeometry(e,t,this.view)},t.prototype.doRefresh=function(){return i.__awaiter(this,void 0,void 0,(function(){var e=this;return i.__generator(this,(function(t){return this.updateRequested||this.suspended?[2]:(this._updateSymbolizerParams(),this._updateBlockCacheRegistry(),this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((function(t){return e._enqueueTileFetch(t)})),this.notifyChange(\"updating\"),[2])}))}))},t.prototype.isUpdating=function(){return this._fetchQueue.length>0||this._globalUpdateRequested},t.prototype.acquireTile=function(e){var t,i,r=this._bitmapView.createTile(e),s=r.bitmap;return t=this._tileInfoView.getTileCoords(U,r.key),s.x=t[0],s.y=t[1],s.resolution=this._tileInfoView.getTileResolution(r.key),i=this._tileInfoView.tileInfo.size,s.width=i[0],s.height=i[1],this._enqueueTileFetch(r),this.requestUpdate(),this._needBlockCacheUpdate=!0,this._globalUpdateRequested=this.hasTilingEffects||!this.useProgressiveUpdate,r},t.prototype.releaseTile=function(e){var t=this;this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(function(){e.destroy(),t.requestUpdate()})),this.requestUpdate()},t.prototype.fetchTile=function(e,t){var i=!l.isNone(t)&&t.signal,r={tileInfo:this.tileInfo,signal:l.unwrap(i),registryId:this._blockCacheRegistryId,requestRawData:this.useWebGLForProcessing,srcResolution:this._previousSrcResolution,datumTransformation:this.datumTransformation};return this.layer.fetchTile(e.level,e.row,e.col,r)},t.prototype._createTileInfo=function(){var e=this.view.spatialReference,t=new r.Point({x:this.fullExtent.xmin,y:this.fullExtent.ymax,spatialReference:e}),i=y.create({spatialReference:e,size:512});return(0===i.origin.x||i.origin.x>t.x)&&(i.origin=t),i},t.prototype._enqueueTileFetch=function(e,t){return i.__awaiter(this,void 0,void 0,(function(){var t,r,s,a,o,l,h,u,c=this;return i.__generator(this,(function(i){switch(i.label){case 0:if(this._fetchQueue.has(e.key.id))return[2];i.label=1;case 1:return i.trys.push([1,13,,14]),[4,this._fetchQueue.push(e.key)];case 2:if(t=i.sent(),r=this.layer.bandIds,s=!this.useProgressiveUpdate||this.hasTilingEffects&&!this._globalSymbolizerParams,!this._globalUpdateRequested||this.moving||0!==this._fetchQueue.length)return[3,7];s=!1,i.label=3;case 3:return i.trys.push([3,5,,6]),[4,this._redrawImage(this._abortController&&this._abortController.signal)];case 4:return i.sent(),[3,6];case 5:return a=i.sent(),n.isAbortError(a)&&T.error(a),[3,6];case 6:this._globalUpdateRequested=!1,i.label=7;case 7:return this.useWebGLForProcessing&&!this.hasTilingEffects&&null==this._symbolizerParams&&this._updateSymbolizerParams(),t&&t.pixelBlock?this.useWebGLForProcessing?[3,9]:(o={extent:t.extent,pixelBlock:t.pixelBlock},[4,this.layer.applyRenderer(o,this.hasTilingEffects&&this._globalSymbolizerParams&&\"stretch\"===this._globalSymbolizerParams.type?this._globalSymbolizerParams:null)]):[3,11];case 8:return l=i.sent(),e.bitmap.rawPixelData=o,e.bitmap.source=l,[3,10];case 9:e.bitmap.source=t.pixelBlock,i.label=10;case 10:return e.bitmap.symbolizerParameters=this.useWebGLForProcessing?this._globalSymbolizerParams||this._symbolizerParams:null,!e.bitmap.transformGrid&&this.useWebGLForProcessing&&(e.bitmap.transformGrid=t.transformGrid),[3,12];case 11:h=this._createEmptyTilePixelBlock(),e.bitmap.source=h,e.bitmap.symbolizerParameters=this.useWebGLForProcessing?this._symbolizerParams:null,e.bitmap.transformGrid=null,i.label=12;case 12:return e.bitmap.bandIds=r,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.bitmap.interpolation=this._getLayerInterpolation(),e.bitmap.suspended=s,e.bitmap.invalidateTexture(),e.once(\"attach\",(function(){return c.requestUpdate()})),this._bitmapView.addChild(e),[3,14];case 13:return u=i.sent(),n.isAbortError(u)||T.error(u),[3,14];case 14:return this.requestUpdate(),[2]}}))}))},t.prototype._redrawImage=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,r,s=this;return i.__generator(this,(function(a){switch(a.label){case 0:return this.layer.updateRenderer(),this.hasTilingEffects?[4,this._updateGlobalSymbolizerParams(e)]:[3,2];case 1:return a.sent(),[3,3];case 2:this._updateSymbolizerParams(),this._globalSymbolizerParams=null,a.label=3;case 3:return t=this.layer.bandIds,r=this._bitmapView.children.map((function(e){return i.__awaiter(s,void 0,void 0,(function(){var r;return i.__generator(this,(function(i){switch(i.label){case 0:return this.useWebGLForProcessing?[3,2]:(r=e.bitmap,[4,this.layer.applyRenderer(e.bitmap.rawPixelData,this.hasTilingEffects&&this._globalSymbolizerParams&&\"stretch\"===this._globalSymbolizerParams.type?this._globalSymbolizerParams:null)]);case 1:r.source=i.sent(),i.label=2;case 2:return e.bitmap.symbolizerParameters=this.useWebGLForProcessing?this._globalSymbolizerParams||this._symbolizerParams:null,e.bitmap.bandIds=t,e.bitmap.interpolation=this._getLayerInterpolation(),e.bitmap.suspended=!1,[2]}}))}))})),[4,n.eachAlways(r)];case 4:return a.sent(),this.container.requestRender(),[2]}}))}))},t.prototype._createEmptyTilePixelBlock=function(){if(!this._emptyTilePixelBlock){var e=this._tileInfoView.tileInfo.size[0],t=this._tileInfoView.tileInfo.size[1];this._emptyTilePixelBlock=new p({width:e,height:t,pixels:[new Uint8Array(e*t)],mask:new Uint8Array(e*t),pixelType:\"u8\"})}return this._emptyTilePixelBlock},t.prototype._updateGlobalSymbolizerParams=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,r,s;return i.__generator(this,(function(i){switch(i.label){case 0:return t={srcResolution:this._previousSrcResolution,registryId:this._blockCacheRegistryId,signal:e},[4,this.layer.fetchPixels(this.view.extent,this.view.width,this.view.height,t)];case 1:return(r=i.sent())&&r.pixelBlock?(s=this.layer.symbolizer.generateWebGLParameters({pixelBlock:_.extractBands(r.pixelBlock,this.layer.bandIds),isGCS:this.view.spatialReference.isGeographic,resolution:{x:this._previousViewResolution,y:this._previousViewResolution},bandIds:this.layer.bandIds}),!this.useWebGLForProcessing&&s&&\"stretch\"===s.type&&this.layer.renderer&&\"raster-stretch\"===this.layer.renderer.type&&(s.factor=s.factor.map((function(e){return 255*e})),s.outMin=Math.round(255*s.outMin),s.outMax=Math.round(255*s.outMax)),this._globalSymbolizerParams=s,[2]):[2]}}))}))},t.prototype._updateSymbolizerParams=function(){this._symbolizerParams=this.layer.symbolizer.generateWebGLParameters({pixelBlock:null,isGCS:this.view.spatialReference.isGeographic,resolution:{x:this._previousViewResolution,y:this._previousViewResolution},bandIds:this.layer.bandIds})},t.prototype._updateBlockCacheRegistry=function(){var e=this.layer,t=e.url,i=e.rasterInfo,r=e.multidimensionalDefinition,s=e.raster,a=r&&i&&i.multidimensionalInfo?t+\"?sliceId=\"+s.getSliceIndex(r):t;a!==this._blockCacheRegistryUrl&&(null==this._blockCacheRegistryUrl&&d.unregister(this._blockCacheRegistryUrl,this._blockCacheRegistryId),this._blockCacheRegistryId=d.register(a,this.layer.raster.rasterInfo),this._blockCacheRegistryUrl=a)},t.prototype._getLayerInterpolation=function(){var e=this.layer.renderer.type;return\"raster-colormap\"===e||\"unique-value\"===e||\"class-breaks\"===e?\"nearest\":this.layer.interpolation},i.__decorate([c.property()],t.prototype,\"useProgressiveUpdate\",null),t=i.__decorate([c.subclass(\"esri.views.2d.layers.ImageryTileLayerView2D\")],t)}(P.ImageryTileLayerView(R.RefreshableLayerView(g.LayerView2DMixin(I))))}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/views/2d/layers/ImageryTileLayerView2D.js?')},\"./node_modules/arcgis-js-api/views/layers/ImageryTileLayerView.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../Graphic */ \"./node_modules/arcgis-js-api/Graphic.js\"),__webpack_require__(/*! ../../core/Error */ \"./node_modules/arcgis-js-api/core/Error.js\"),__webpack_require__(/*! ../../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ../../layers/graphics/data/projectionSupport */ \"./node_modules/arcgis-js-api/layers/graphics/data/projectionSupport.js\"),__webpack_require__(/*! ../../layers/support/rasterFunctions/rasterProjectionHelper */ \"./node_modules/arcgis-js-api/layers/support/rasterFunctions/rasterProjectionHelper.js\"),__webpack_require__(/*! ./support/popupUtils */ \"./node_modules/arcgis-js-api/views/layers/support/popupUtils.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,r,i,o,n,a,l,p,u,s){Object.defineProperty(t,\"__esModule\",{value:!0}),t.ImageryTileLayerView=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layer=null,t.view=null,t.fullExtent=null,t.tileInfo=null,t._rasterFieldPrefix=\"Raster.\",t.datumTransformation=null,t}return r.__extends(t,e),Object.defineProperty(t.prototype,\"hasTilingEffects\",{get:function(){return this.layer.renderer&&\"dynamicRangeAdjustment\"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment},enumerable:!0,configurable:!0}),t.prototype.fetchPopupFeatures=function(e,t){var l,p;return r.__awaiter(this,void 0,void 0,(function(){var u,f,c,d,y,m,h,v,_,g,b,w,x;return r.__generator(this,(function(r){switch(r.label){case 0:if(u=this.layer,!e)return[2,a.reject(new o(\"imageryTileLayerView:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:u}))];if(f=u.popupEnabled,c=s.getFetchPopupTemplate(u,t),!f||!n.isSome(c))throw new o(\"imageryTileLayerView:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:f,popupTemplate:c});return d=[],[4,u.identify(e)];case 1:if(y=r.sent().value){if(m=y.join(\", \"),\"Raster.ServicePixelValue\",(h={ObjectId:0})[\"Raster.ServicePixelValue\"]=this._formatAttributeValue(m,\"Raster.ServicePixelValue\"),(v=null===(p=null===(l=u.rasterInfo)||void 0===l?void 0:l.attributeTable)||void 0===p?void 0:p.features)&&v.length>0&&(_=v.filter((function(e){var t=e.attributes.value||e.attributes.Value||e.attributes.VALUE;return String(t)===m}))).length>0&&(g=_[0]))for(b in g.attributes)g.attributes.hasOwnProperty(b)&&(w=this._rasterFieldPrefix+b,h[w]=this._formatAttributeValue(g.attributes[b],w));(x=new i(this.fullExtent.clone(),null,h)).layer=u,x.sourceLayer=x.layer,d.push(x)}return[2,d]}}))}))},t.prototype.updateFullExtent=function(){var e,t=this.layer.tileInfo;t&&t.spatialReference||(e=new o(\"layerview:tiling-information-missing\",\"The layer doesn\\'t provide tiling information\",{layer:this.layer}));var r=this.view.spatialReference;if(p.doesBrowserSupportProjection(r,this.layer.spatialReference)){var i=u.projectExtent(this.layer.fullExtent,r,this.datumTransformation);null==i&&(e=new o(\"layerview:projection-not-supported\",\"The layer extent cannot be projected to the view\\'s spatial reference\",{layer:this.layer})),this._set(\"fullExtent\",i)}else e=new o(\"layerview:projection-not-supported\",\"The layer requires projection engine, which is not supported in current browser\",{layer:this.layer});return e?a.reject(e):a.resolve()},t.prototype._formatAttributeValue=function(e,t){if(\"string\"==typeof e){var r=this.layer.popupTemplate&&this.layer.popupTemplate.fieldInfos,i=this._getFieldInfo(r,t),o=i&&i.format;if(o){var n=void 0,a=void 0;return e.trim().indexOf(\",\")>-1?(a=(n=\",\")+\" \",this._formatDelimitedString(e,n,a,o)):e.trim().indexOf(\" \")>-1?(n=a=\" \",this._formatDelimitedString(e,n,a,o)):this._formatNumberFromString(e,o)}}return e},t.prototype._getFieldInfo=function(e,t){if(e&&e.length&&t){var r=t.toLowerCase(),i=void 0;return e.some((function(e){return!(!e.fieldName||e.fieldName.toLowerCase()!==r&&e.fieldName.toLowerCase()!==r.replace(/ /g,\"_\"))&&(i=e,!0)})),i}},t.prototype._formatDelimitedString=function(e,t,r,i){var o=this;return e&&t&&r&&i?e.trim().split(t).map((function(e){return o._formatNumberFromString(e,i)})).join(r):e},t.prototype._formatNumberFromString=function(e,t){if(!e||!t)return e;var r=Number(e);return isNaN(r)?e:t.format(r)},r.__decorate([l.property()],t.prototype,\"layer\",void 0),r.__decorate([l.property()],t.prototype,\"view\",void 0),r.__decorate([l.property()],t.prototype,\"fullExtent\",void 0),r.__decorate([l.property()],t.prototype,\"tileInfo\",void 0),r.__decorate([l.property()],t.prototype,\"_rasterFieldPrefix\",void 0),r.__decorate([l.property({readOnly:!0,dependsOn:[\"layer.renderer\"]})],t.prototype,\"hasTilingEffects\",null),t=r.__decorate([l.subclass(\"esri.views.layers.ImageryTileLayerView\")],t)}(e)}}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/views/layers/ImageryTileLayerView.js?')},\"./node_modules/arcgis-js-api/views/layers/support/popupUtils.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! @dojo/framework/shim/array */ \"./node_modules/@dojo/framework/shim/array.js\"),__webpack_require__(/*! ../../../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../../../layers/support/fieldUtils */ \"./node_modules/arcgis-js-api/layers/support/fieldUtils.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,i,t,l,s,d){Object.defineProperty(i,\"__esModule\",{value:!0}),i.getRequiredFields=function(e,i){return void 0===i&&(i=e.popupTemplate),t.__awaiter(this,void 0,void 0,(function(){var a,r,u,p,n,o,f,c,h;return t.__generator(this,(function(m){switch(m.label){case 0:return s.isSome(i)?[4,i.getRequiredFields(e.fields)]:[2,[]];case 1:return a=m.sent(),r=i.lastEditInfoEnabled,u=e.objectIdField,p=e.typeIdField,n=e.globalIdField,o=e.relationships,l.includes(a,\"*\")?[2,[\"*\"]]:r?[4,d.getFeatureEditFields(e)]:[3,3];case 2:return c=m.sent(),[3,4];case 3:c=[],m.label=4;case 4:return f=c,h=d.fixFields(e.fields,t.__spreadArrays(a,f)),p&&h.push(p),h&&u&&d.hasField(e.fields,u)&&-1===h.indexOf(u)&&h.push(u),h&&n&&d.hasField(e.fields,n)&&-1===h.indexOf(n)&&h.push(n),o&&o.forEach((function(i){var t=i.keyField;h&&t&&d.hasField(e.fields,t)&&-1===h.indexOf(t)&&h.push(t)})),[2,h]}}))}))},i.getFetchPopupTemplate=function(e,i){return e.popupTemplate?e.popupTemplate:s.isSome(i)&&i.defaultPopupTemplateEnabled&&s.isSome(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/views/layers/support/popupUtils.js?')},\"./node_modules/arcgis-js-api/views/support/drapedUtils.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT © 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! ../../geometry */ \"./node_modules/arcgis-js-api/geometry.js\"),__webpack_require__(/*! ../../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../../core/unitUtils */ \"./node_modules/arcgis-js-api/core/unitUtils.js\"),__webpack_require__(/*! ../../renderers/support/clickToleranceUtils */ \"./node_modules/arcgis-js-api/renderers/support/clickToleranceUtils.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,r,t,a,n,i){function l(e,r,a,i){var l;if(void 0===i&&(i=new t.Extent),\"2d\"===a.type)l=r*a.resolution;else if(\"3d\"===a.type){var s=a.basemapTerrain,o=s.overlayManager,c=o?o.overlayPixelSizeInMapUnits(e):1;l=s&&!s.spatialReference.equals(a.spatialReference)?n.getMetersPerUnitForSR(s.spatialReference)/n.getMetersPerUnitForSR(a.spatialReference):r*c}var p=e.x-l,u=e.y-l,y=e.x+l,f=e.y+l,m=a.spatialReference;return i.xmin=Math.min(p,y),i.ymin=Math.min(u,f),i.xmax=Math.max(p,y),i.ymax=Math.max(u,f),i.spatialReference=m,i}Object.defineProperty(r,\"__esModule\",{value:!0}),r.createQueryGeometry=l,r.intersectsDrapedGeometry=function(e,r,t){var n=t.toMap(e);return a.isNone(n)?null:l(n,i.calculateTolerance(),t,s).intersects(r)?n:null};var s=new t.Extent}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/views/support/drapedUtils.js?')}}]);","extractedComments":[]}