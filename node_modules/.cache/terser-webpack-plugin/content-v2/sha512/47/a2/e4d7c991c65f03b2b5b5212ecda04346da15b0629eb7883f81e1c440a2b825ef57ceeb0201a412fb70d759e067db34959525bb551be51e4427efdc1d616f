{"code":"(function(){(this||window).webpackJsonp.registerAbsMids({})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{\"./node_modules/arcgis-js-api/layers/ImageryTileLayer.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT Â© 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../geometry */ \"./node_modules/arcgis-js-api/geometry.js\"),__webpack_require__(/*! ../PopupTemplate */ \"./node_modules/arcgis-js-api/PopupTemplate.js\"),__webpack_require__(/*! ../rasterRenderers */ \"./node_modules/arcgis-js-api/rasterRenderers.js\"),__webpack_require__(/*! ../request */ \"./node_modules/arcgis-js-api/request.js\"),__webpack_require__(/*! ../core/Error */ \"./node_modules/arcgis-js-api/core/Error.js\"),__webpack_require__(/*! ../core/jsonMap */ \"./node_modules/arcgis-js-api/core/jsonMap.js\"),__webpack_require__(/*! ../core/Logger */ \"./node_modules/arcgis-js-api/core/Logger.js\"),__webpack_require__(/*! ../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../core/MultiOriginJSONSupport */ \"./node_modules/arcgis-js-api/core/MultiOriginJSONSupport.js\"),__webpack_require__(/*! ../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ../core/accessorSupport/ensureType */ \"./node_modules/arcgis-js-api/core/accessorSupport/ensureType.js\"),__webpack_require__(/*! ../geometry/support/spatialReferenceUtils */ \"./node_modules/arcgis-js-api/geometry/support/spatialReferenceUtils.js\"),__webpack_require__(/*! ./Layer */ \"./node_modules/arcgis-js-api/layers/Layer.js\"),__webpack_require__(/*! ./mixins/OperationalLayer */ \"./node_modules/arcgis-js-api/layers/mixins/OperationalLayer.js\"),__webpack_require__(/*! ./mixins/PortalLayer */ \"./node_modules/arcgis-js-api/layers/mixins/PortalLayer.js\"),__webpack_require__(/*! ./mixins/RefreshableLayer */ \"./node_modules/arcgis-js-api/layers/mixins/RefreshableLayer.js\"),__webpack_require__(/*! ./mixins/ScaleRangeLayer */ \"./node_modules/arcgis-js-api/layers/mixins/ScaleRangeLayer.js\"),__webpack_require__(/*! ./support/commonProperties */ \"./node_modules/arcgis-js-api/layers/support/commonProperties.js\"),__webpack_require__(/*! ./support/DimensionalDefinition */ \"./node_modules/arcgis-js-api/layers/support/DimensionalDefinition.js\"),__webpack_require__(/*! ./support/Field */ \"./node_modules/arcgis-js-api/layers/support/Field.js\"),__webpack_require__(/*! ./support/imageryRendererUtils */ \"./node_modules/arcgis-js-api/layers/support/imageryRendererUtils.js\"),__webpack_require__(/*! ./support/RasterJobHandler */ \"./node_modules/arcgis-js-api/layers/support/RasterJobHandler.js\"),__webpack_require__(/*! ./support/TileInfo */ \"./node_modules/arcgis-js-api/layers/support/TileInfo.js\"),__webpack_require__(/*! ./support/rasterDatasets/RasterFactory */ \"./node_modules/arcgis-js-api/layers/support/rasterDatasets/RasterFactory.js\"),__webpack_require__(/*! ../renderers/support/RasterSymbolizer */ \"./node_modules/arcgis-js-api/renderers/support/RasterSymbolizer.js\"),__webpack_require__(/*! ../support/popupUtils */ \"./node_modules/arcgis-js-api/support/popupUtils.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,r,t,i,n,o,a,s,l,p,d,u,c,y,h,f,_,m,b,g,v,I,R,S,J,x,P,T,w,O){var H=l.strict()({RSP_NearestNeighbor:\"nearest\",RSP_BilinearInterpolation:\"bilinear\",RSP_CubicConvolution:\"cubic\",RSP_Majority:\"majority\"});function D(){return{enabled:!this.loaded||\"RasterTileServer\"===this.raster.datasetFormat&&\"Raster\"===this.raster.tileType}}var L=p.getLogger(\"esri.layers.ImageryTileLayer\");return function(e){function r(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var i=e.apply(this,r)||this;return i._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},i.bandIds=null,i.copyright=null,i.fullExtent=null,i.interpolation=\"nearest\",i.legendEnabled=!0,i.isReference=null,i.listMode=\"show\",i.raster=null,i.rasterInfo=null,i.sourceJSON=null,i.spatialReference=null,i.tileInfo=null,i.version=null,i.title=null,i.type=\"imagery-tile\",i.url=null,i.operationalLayerType=\"ArcGISTiledImageServiceLayer\",i.popupEnabled=!0,i.popupTemplate=null,i.symbolizer=null,i}return t.__extends(r,e),r.prototype.normalizeCtorArgs=function(e,r){return\"string\"==typeof e?t.__assign({url:e},r):e},r.prototype.load=function(e){var r=this,t=d.isSome(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Image Service\"]},e).then((function(){return r._openRaster(t)}),(function(){return r._openRaster(t)}))),c.resolve(this)},Object.defineProperty(r.prototype,\"multidimensionalDefinition\",{set:function(e){this.raster&&(this._sliceId=this.raster.getSliceIndex(e)),this._set(\"multidimensionalDefinition\",e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,\"defaultPopupTemplate\",{get:function(){return this.createPopupTemplate()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,\"fields\",{get:function(){var e,r,t=[new S({name:\"Raster.ServicePixelValue\",alias:\"Pixel Value\",domain:null,editable:!1,length:50,type:\"string\"})],i=null===(r=null===(e=this.rasterInfo)||void 0===e?void 0:e.attributeTable)||void 0===r?void 0:r.fields;if(i){var n=i.filter((function(e){return\"oid\"!==e.type&&\"value\"!==e.name.toLowerCase()})).map((function(e){var r=e.clone();return r.name=\"Raster.\"+e.name,r}));t=t.concat(n)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,\"renderer\",{set:function(e){this._set(\"renderer\",e),this.updateRenderer()},enumerable:!0,configurable:!0}),r.prototype.readRenderer=function(e,r,t){var i=r&&r.layerDefinition&&r.layerDefinition.drawingInfo&&r.layerDefinition.drawingInfo.renderer,n=o.read(i,t)||void 0;if(null!=n)return n},r.prototype.createPopupTemplate=function(e){return O.createPopupTemplate(this,e)},r.prototype.updateRenderer=function(){return t.__awaiter(this,void 0,void 0,(function(){var e;return t.__generator(this,(function(r){switch(r.label){case 0:return this.loaded?JSON.stringify(this._cachedRendererJson)===JSON.stringify(this.renderer)?[2]:(e=this._rasterJobHandler.instance)?(this.symbolizer.renderer=this.renderer,this.symbolizer.bind(),[4,e.updateSymbolizer(this.symbolizer)]):[2]:[2];case 1:return r.sent(),this._cachedRendererJson=this.renderer.toJSON(),[2]}}))}))},r.prototype.applyRenderer=function(e,r){return t.__awaiter(this,void 0,void 0,(function(){var i,n,o,a;return t.__generator(this,(function(s){switch(s.label){case 0:return(i=e&&e.pixelBlock)&&i.pixels&&i.pixels.length>0?(this.updateRenderer(),o=this._rasterJobHandler.instance,a=this.bandIds,o?[4,o.symbolize(t.__assign(t.__assign({},e),{simpleStretchParams:r,bandIds:a}))]:[3,2]):[2,null];case 1:return n=s.sent(),[3,3];case 2:n=this.symbolizer.symbolize(t.__assign(t.__assign({},e),{simpleStretchParams:r,bandIds:a})),s.label=3;case 3:return[2,n]}}))}))},r.prototype.getTileUrl=function(e,r,t){return\"RasterTileServer\"===this.raster.datasetFormat?this.url+\"/tile/\"+e+\"/\"+r+\"/\"+t:\"\"},r.prototype.getCompatibleTileInfo=function(e,r){if(!this.loaded)return null;var t=f.getInfo(e);return P.create({size:256,spatialReference:e,origin:t?{x:t.origin[0],y:t.origin[1]}:{x:r.xmin,y:r.ymax}})},r.prototype.getCompatibleFullExtent=function(e){return this.loaded?this._compatibleFullExtent&&this._compatibleFullExtent.spatialReference.equals(e)?this._compatibleFullExtent:(this._compatibleFullExtent=this.raster.computeExtent(e),this._compatibleFullExtent):null},r.prototype.fetchTile=function(e,r,i,n){return void 0===n&&(n={}),t.__awaiter(this,void 0,void 0,(function(){var o,s;return t.__generator(this,(function(l){switch(l.label){case 0:return n.requestAsImageElement?(o=this.getTileUrl(e,r,i),[2,a(o,{responseType:\"image\",query:{sliceId:this._sliceId,_ts:n.timestamp},signal:n.signal}).then((function(e){return e.data}))]):[4,this._initJobHandler()];case 1:return l.sent(),this.multidimensionalDefinition&&(s=this._sliceId,n=t.__assign({multidimensionalDefinition:this.multidimensionalDefinition,sliceId:s},n)),[2,this.raster.fetchTile(e,r,i,n)]}}))}))},r.prototype.fetchPixels=function(e,r,i,n){return t.__awaiter(this,void 0,void 0,(function(){var o;return t.__generator(this,(function(a){switch(a.label){case 0:return[4,this._initJobHandler()];case 1:return a.sent(),this.multidimensionalDefinition&&(o=this._sliceId,n=t.__assign({multidimensionalDefinition:this.multidimensionalDefinition,sliceId:o},n)),[2,this.raster.fetchPixels(e,r,i,n)]}}))}))},r.prototype.identify=function(e,r){return void 0===r&&(r={}),this.raster.identify(e,r)},r.prototype.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++},r.prototype.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()},r.prototype.write=function(r,t){var i=this.raster;if(this.loaded?\"RasterTileServer\"===i.datasetFormat&&(\"Raster\"===i.tileType||\"Map\"===i.tileType):this.url&&/\\\\/ImageServer(\\\\/|\\\\/?$)/i.test(this.url))return e.prototype.write.call(this,r,t);if(t&&t.messages){var n=t.origin+\"/\"+(t.layerContainerType||\"operational-layers\");t.messages.push(new s(\"layer:unsupported\",\"Layers (\"+this.title+\", \"+this.id+\") of type \\'\"+this.declaredClass+\"\\' are not supported in the context of \\'\"+n+\"\\'\",{layer:this}))}return null},r.prototype._initJobHandler=function(){var e=this;if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;var r=new x;return this._rasterJobHandler.connectionPromise=r.initialize().then((function(){e._rasterJobHandler.instance=r,e.raster.rasterJobHandler=r,e.renderer&&e.updateRenderer()})).catch((function(){return null})),this._rasterJobHandler.connectionPromise},r.prototype._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0,this.raster.rasterJobHandler=null},r.prototype._openRaster=function(e){return t.__awaiter(this,void 0,void 0,(function(){var r,i,n,o,a,l,p,d,u,c,y;return t.__generator(this,(function(t){switch(t.label){case 0:return[4,T.open(this.raster||{url:this.url,sourceJSON:this.sourceJSON,signal:e})];case 1:if(r=t.sent(),this.url||(this.url=r.url),this.raster=r,!(i=r.rasterInfo))throw new s(\"tile-imagery-layer:load\",\"cannot load resources on \"+this.url);if(this.sourceJSON=this.sourceJSON||this.raster.sourceJSON,null!=this.sourceJSON&&(this._set(\"version\",this.sourceJSON.currentVersion),this._set(\"copyright\",this.sourceJSON.copyrightText)),\"Map\"===this.raster.tileType&&(this.popupEnabled=!1),n=i.spatialReference,o=i.pixelSize,a=i.storageInfo,!(l=a.tileInfo)){for(p=[],d=a.maximumPyramidLevel||0,u=Math.max(o.x,o.y),c=1/.0254*96*u,y=0;y<=d;y++)p.push({level:d-y,resolution:u,scale:c}),u*=2,c*=2;l=new P({origin:a.origin,size:[a.blockWidth,a.blockHeight],spatialReference:n,lods:p}),a.tileInfo=l}return null==this.title&&(this.title=this.raster.datasetName),i.multidimensionalInfo&&(this._configDefaultSlice(),this._sliceId=this.raster.getSliceIndex(this.multidimensionalDefinition)),this._configDefaultRenderer(),[2,r]}}))}))},r.prototype._configDefaultSlice=function(){var e=this.raster.rasterInfo.multidimensionalInfo.variables[0],r=[];e.dimensions.forEach((function(t){r.push(new R({variableName:e.name,dimensionName:t.name,values:t.values[0],isSlice:!0}))})),this.multidimensionalDefinition=r},r.prototype._configDefaultRenderer=function(){var e=this.raster.rasterInfo,r=e.pixelType;this.bandIds||(this.bandIds=J.getDefaultBandCombination(e)),this.renderer||(this.renderer=J.createDefaultRenderer(e,this.bandIds)),\"u8\"===r&&this.renderer&&\"stretchType\"in this.renderer&&\"min-max\"===this.renderer.stretchType&&this.renderer.dynamicRangeAdjustment&&(this.renderer.dynamicRangeAdjustment=!1,this.renderer.statistics=this.renderer.statistics||[[0,255],[0,255],[0,255]]),this.symbolizer?(this.symbolizer.renderer=this.renderer,this.symbolizer.rasterInfo=e):this.symbolizer=new w({renderer:this.renderer,rasterInfo:e}),this.symbolizer.bind()||L.warn(\"ImageryTileLayer\",\"The given renderer is not supported by the layer.\")},t.__decorate([y.property()],r.prototype,\"_cachedRendererJson\",void 0),t.__decorate([y.property()],r.prototype,\"_sliceId\",void 0),t.__decorate([y.property()],r.prototype,\"_compatibleFullExtent\",void 0),t.__decorate([y.property()],r.prototype,\"_rasterJobHandler\",void 0),t.__decorate([y.property({type:[h.Integer],json:{write:{overridePolicy:D}}})],r.prototype,\"bandIds\",void 0),t.__decorate([y.property()],r.prototype,\"copyright\",void 0),t.__decorate([y.property({type:i.Extent}),y.aliasOf(\"rasterInfo.extent\")],r.prototype,\"fullExtent\",void 0),t.__decorate([y.property({type:String,json:{read:{reader:H.read},write:{writer:H.write,overridePolicy:D}}})],r.prototype,\"interpolation\",void 0),t.__decorate([y.property(I.legendEnabled)],r.prototype,\"legendEnabled\",void 0),t.__decorate([y.property({type:Boolean,json:{read:!1}})],r.prototype,\"isReference\",void 0),t.__decorate([y.property({type:[\"show\",\"hide\"]})],r.prototype,\"listMode\",void 0),t.__decorate([y.property({type:[R]})],r.prototype,\"multidimensionalDefinition\",null),t.__decorate([y.property()],r.prototype,\"raster\",void 0),t.__decorate([y.property({readOnly:!0}),y.aliasOf(\"raster.rasterInfo\")],r.prototype,\"rasterInfo\",void 0),t.__decorate([y.property()],r.prototype,\"sourceJSON\",void 0),t.__decorate([y.property({type:i.SpatialReference}),y.aliasOf(\"rasterInfo.spatialReference\")],r.prototype,\"spatialReference\",void 0),t.__decorate([y.property({type:P,dependsOn:[\"rasterInfo\"]}),y.aliasOf(\"rasterInfo.storageInfo.tileInfo\")],r.prototype,\"tileInfo\",void 0),t.__decorate([y.property({readOnly:!0})],r.prototype,\"version\",void 0),t.__decorate([y.property()],r.prototype,\"title\",void 0),t.__decorate([y.property({readOnly:!0,json:{read:!1}})],r.prototype,\"type\",void 0),t.__decorate([y.property(I.url)],r.prototype,\"url\",void 0),t.__decorate([y.property({type:[\"ArcGISTiledImageServiceLayer\"]})],r.prototype,\"operationalLayerType\",void 0),t.__decorate([y.property({type:Boolean,value:!0,json:{read:{source:\"disablePopup\",reader:function(e,r){return!r.disablePopup}},write:{target:\"disablePopup\",overridePolicy:D,writer:function(e,r,t){r[t]=!e}}}})],r.prototype,\"popupEnabled\",void 0),t.__decorate([y.property({type:n,json:{read:{source:\"popupInfo\"},write:{target:\"popupInfo\",overridePolicy:D}}})],r.prototype,\"popupTemplate\",void 0),t.__decorate([y.property({readOnly:!0,dependsOn:[\"title\"]})],r.prototype,\"defaultPopupTemplate\",null),t.__decorate([y.property({readOnly:!0,type:[S],dependsOn:[\"rasterInfo\"]})],r.prototype,\"fields\",null),t.__decorate([y.property({types:o.rasterRendererTypes,json:{read:{source:\"layerDefinition.drawingInfo.renderer\"},write:{target:\"layerDefinition.drawingInfo.renderer\",overridePolicy:D}}})],r.prototype,\"renderer\",null),t.__decorate([y.reader(\"renderer\")],r.prototype,\"readRenderer\",null),t.__decorate([y.property()],r.prototype,\"symbolizer\",void 0),r=t.__decorate([y.subclass(\"esri.layers.ImageryTileLayer\")],r)}(v.ScaleRangeLayer(g.RefreshableLayer(m.OperationalLayer(b.PortalLayer(u.MultiOriginJSONMixin(_))))))}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/ImageryTileLayer.js?')},\"./node_modules/arcgis-js-api/layers/support/RasterStorageInfo.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT Â© 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../core/JSONSupport */ \"./node_modules/arcgis-js-api/core/JSONSupport.js\"),__webpack_require__(/*! ../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ../../geometry/Point */ \"./node_modules/arcgis-js-api/geometry/Point.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(o,e,r,t,p,i){return function(o){function e(){var e=null!==o&&o.apply(this,arguments)||this;return e.blockWidth=void 0,e.blockHeight=void 0,e.compression=null,e.origin=null,e.firstPyramidLevel=null,e.maximumPyramidLevel=null,e.pyramidScalingFactor=2,e.pyramidBlockWidth=null,e.pyramidBlockHeight=null,e.tileInfo=null,e.blockBoundary=null,e}return r.__extends(e,o),r.__decorate([p.property({type:Number,json:{write:!0}})],e.prototype,\"blockWidth\",void 0),r.__decorate([p.property({type:Number,json:{write:!0}})],e.prototype,\"blockHeight\",void 0),r.__decorate([p.property({type:String,json:{write:!0}})],e.prototype,\"compression\",void 0),r.__decorate([p.property({type:i,json:{write:!0}})],e.prototype,\"origin\",void 0),r.__decorate([p.property({type:Number,json:{write:!0}})],e.prototype,\"firstPyramidLevel\",void 0),r.__decorate([p.property({type:Number,json:{write:!0}})],e.prototype,\"maximumPyramidLevel\",void 0),r.__decorate([p.property()],e.prototype,\"pyramidScalingFactor\",void 0),r.__decorate([p.property({type:Number,json:{write:!0}})],e.prototype,\"pyramidBlockWidth\",void 0),r.__decorate([p.property({type:Number,json:{write:!0}})],e.prototype,\"pyramidBlockHeight\",void 0),r.__decorate([p.property({json:{write:!0}})],e.prototype,\"tileInfo\",void 0),r.__decorate([p.property()],e.prototype,\"blockBoundary\",void 0),e=r.__decorate([p.subclass(\"esri.layers.support.RasterStorageInfo\")],e)}(t.JSONSupport)}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/RasterStorageInfo.js?')},\"./node_modules/arcgis-js-api/layers/support/rasterDatasets/BaseRaster.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT Â© 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../../geometry */ \"./node_modules/arcgis-js-api/geometry.js\"),__webpack_require__(/*! ../../../request */ \"./node_modules/arcgis-js-api/request.js\"),__webpack_require__(/*! ../../../core/Error */ \"./node_modules/arcgis-js-api/core/Error.js\"),__webpack_require__(/*! ../../../core/JSONSupport */ \"./node_modules/arcgis-js-api/core/JSONSupport.js\"),__webpack_require__(/*! ../../../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../../../core/Promise */ \"./node_modules/arcgis-js-api/core/Promise.js\"),__webpack_require__(/*! ../../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../../core/urlUtils */ \"./node_modules/arcgis-js-api/core/urlUtils.js\"),__webpack_require__(/*! ../../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ../commonProperties */ \"./node_modules/arcgis-js-api/layers/support/commonProperties.js\"),__webpack_require__(/*! ../TileInfo */ \"./node_modules/arcgis-js-api/layers/support/TileInfo.js\"),__webpack_require__(/*! ./RawBlockCache */ \"./node_modules/arcgis-js-api/layers/support/rasterDatasets/RawBlockCache.js\"),__webpack_require__(/*! ../rasterFormats/RasterCodec */ \"./node_modules/arcgis-js-api/layers/support/rasterFormats/RasterCodec.js\"),__webpack_require__(/*! ../rasterFunctions/pixelUtils */ \"./node_modules/arcgis-js-api/layers/support/rasterFunctions/pixelUtils.js\"),__webpack_require__(/*! ../rasterFunctions/rasterProjectionHelper */ \"./node_modules/arcgis-js-api/layers/support/rasterFunctions/rasterProjectionHelper.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,r,n,o,i,a,s,l,u,c,f,p,h,d,m,y,g){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rasterJobHandler=null,t.datasetName=null,t.datasetFormat=null,t.rasterInfo=null,t.ioConfig={sampling:\"closest\"},t}return r.__extends(t,e),t.prototype.init=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=g.load(),this.addResolvingPromise(e),[4,this.when()];case 1:return t.sent(),[2]}}))}))},t.prototype.normalizeCtorArgs=function(e){return e&&e.ioConfig&&(e=r.__assign(r.__assign({},e),{ioConfig:r.__assign({resolution:null,bandIds:null,sampling:\"closest\",tileInfo:h.create()},e.ioConfig)})),e},Object.defineProperty(t.prototype,\"url\",{set:function(e){var t=c.urlToObject(e);this._set(\"url\",t.path)},enumerable:!0,configurable:!0}),t.prototype.open=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){throw new i(\"BaseRaster:open-not-implemented\",\"open() is not implemented\")}))}))},t.prototype.fetchTile=function(e,t,o,i){return void 0===i&&(i={}),r.__awaiter(this,void 0,void 0,(function(){var a,s,l,u;return r.__generator(this,(function(r){return a=i.tileInfo,s=a.lodAt(e),l=new n.Point({x:s.resolution,y:s.resolution,spatialReference:a.spatialReference}),u=this._getTileExtent(l,t,o,a),[2,this.fetchPixels(u,a.size[0],a.size[1],i)]}))}))},t.prototype.identify=function(e,t){return void 0===t&&(t={}),r.__awaiter(this,void 0,void 0,(function(){var n,o,i,a,l,u,c,f,p,h,m,y,x,v,_,w,b,R;return r.__generator(this,(function(r){switch(r.label){case 0:return n=this.rasterInfo,o=n.spatialReference,i=n.extent,a=t.datumTransformation,l=g.projectPoint(e,o,a),i.intersects(l)?(u=0,t.srcResolution?(c=g.snapPyramid(t.srcResolution,this.rasterInfo,this.ioConfig.sampling),u=c.pyramidLevel,[3,3]):[3,1]):[2,{location:l,value:null}];case 1:return[4,this.computeBestPyramidLevelForLocation(e,t)];case 2:if(null==(u=r.sent()))return[2,{location:l,value:null}];r.label=3;case 3:return null===(f=this.identifyPixelLocation(l,u,null))?[2,{location:l,value:null}]:(p=f.row,h=f.col,m=f.rowOffset,y=f.colOffset,x=this.url,v=u+\"/\"+p+\"/\"+h,_=d.getBlock(x,null,v),s.isSome(_)||(_=this.fetchRawTile(u,p,h,t),d.putBlock(x,null,v,_)),[4,_]);case 4:return(w=r.sent())&&w.pixels&&w.pixels.length>0?(b=m*this.rasterInfo.storageInfo.blockHeight+y,R=!w.mask||w.mask[b]?w.pixels.map((function(e){return e[b]})):null,[2,{location:l,value:R,pyramidLevel:u}]):[2,{location:l,value:null}]}}))}))},t.prototype.fetchPixels=function(e,t,o,i){return void 0===i&&(i={}),r.__awaiter(this,void 0,void 0,(function(){var a,s,l,u,c,f,p,h,d,m,x,v,_,w,b,R,I,k,P,B,C,M,S,T,j;return r.__generator(this,(function(r){switch(r.label){case 0:return a=e.clone().normalize(),e=a[0],s=this.rasterInfo.spatialReference,l=!e.spatialReference.equals(s),u=i.datumTransformation,c=new n.Point({x:(e.xmax-e.xmin)/t,y:(e.ymax-e.ymin)/o,spatialReference:e.spatialReference}),(f=i.srcResolution||(l?g.projectResolution(c,s,e,u):c))?(p=g.snapPyramid(f,this.rasterInfo,this.ioConfig.sampling),h=p.pyramidLevel,d=p.pyramidResolution,p.excessiveReading?[2,null]:(m=this.rasterInfo.storageInfo,null==(x=l?g.projectExtent(e,s,u):e)?[2,null]:(v={x:Math.floor((x.xmin-m.origin.x)/d.x+.1),y:Math.floor((m.origin.y-x.ymax)/d.y+.1)},_=Math.ceil((x.xmax-x.xmin)/d.x-.1),w=Math.ceil((x.ymax-x.ymin)/d.y-.1),_/t>8||w/o>8?[2,null]:[4,this.fetchRawPixels(h,v,{width:_,height:w},i)]))):[2,null];case 1:return(b=r.sent())?(R=h>0?m.pyramidBlockWidth:m.blockWidth,I=h>0?m.pyramidBlockHeight:m.blockHeight,!l&&1===b.pixelBlocks.length&&R===t&&I===o&&f.x===c.x&&f.y===c.y?[2,{extent:e,srcExtent:x,pixelBlock:b.pixelBlocks[0],transformGrid:null}]:(k=g.getProjectionOffsetGrid(e,b.extent,c,u),B=!i.requestRawData,C={rows:k.spacing[0],cols:k.spacing[1]},M=b.pixelBlocks,S=b.mosaicSize,T=b.isPartiallyFilled,this.rasterJobHandler?[4,this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:M,srcMosaicSize:S,destDimension:B?{width:t,height:o}:null,coefs:B?k.coefficients:null,sampleSpacing:B?C:null},i)]:[3,3])):[2,null];case 2:return P=r.sent(),[3,4];case 3:j=y.mosaic(M,S),P=B?y.approximateTransform(j,{width:t,height:o},k.coefficients,C):j,r.label=4;case 4:return[2,{srcExtent:x,pixelBlock:P,transformGrid:k,extent:e,isPartiallyFilled:T}]}}))}))},t.prototype.fetchRawPixels=function(e,t,o,i){return r.__awaiter(this,void 0,void 0,(function(){var a,s,l,c,f,p,h,d,m,y,g,x,v,_,w,b,R,I,k,P,B,C,M,S,T,j;return r.__generator(this,(function(r){switch(r.label){case 0:if(a=this.rasterInfo.storageInfo,s=a.origin,l=a.blockBoundary,c=e>0?this.rasterInfo.storageInfo.pyramidBlockWidth:this.rasterInfo.storageInfo.blockWidth,f=e>0?this.rasterInfo.storageInfo.pyramidBlockHeight:this.rasterInfo.storageInfo.blockHeight,p=Math.floor(t.x/c),h=Math.floor(t.y/f),d=Math.floor((t.x+o.width-1)/c),m=Math.floor((t.y+o.height-1)/f),y=this.rasterInfo,g=y.pixelSize,x=y.spatialReference,!(v=l[e]))return[2,null];if(_=v.minRow,w=v.minCol,b=v.maxCol,R=v.maxRow,m<_||d<w||h>R||p>b)return[2,null];for(I=[],P=!1,B=h;B<=m;B++)for(C=p;C<=d;C++)B>=_&&C>=w&&R>=B&&b>=C?(k=this._fetchRawTile(e,B,C,i),this.ioConfig.allowPartialFill&&(k=u.create((function(e){k.then((function(t){return e(t)})).catch((function(){P=!0,e(null)}))}))),I.push(k)):I.push(null);return 0===I.length?[2,null]:[4,u.all(I)];case 1:return M=r.sent(),S={height:(m-h+1)*c,width:(d-p+1)*f},T=g.x*Math.pow(2,e),j=g.y*Math.pow(2,e),[2,{extent:new n.Extent({xmin:s.x+p*c*T,xmax:s.x+(d+1)*c*T,ymin:s.y-(m+1)*f*j,ymax:s.y-h*f*j,spatialReference:x}),pixelBlocks:M,mosaicSize:S,isPartiallyFilled:P}]}}))}))},t.prototype.fetchRawTile=function(e,t,n,o){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){throw new i(\"BaseRaster:read-not-implemented\",\"fetchRawTile() is not implemented\")}))}))},t.prototype.computeExtent=function(e){return g.projectExtent(this.rasterInfo.extent,e)},t.prototype.decodePixelBlock=function(e,t){return this.rasterJobHandler?this.rasterJobHandler.decode({data:e,options:t}):m.decode(e,t)},t.prototype.request=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,a,s,l,u,c;return r.__generator(this,(function(f){switch(f.label){case 0:n=this.ioConfig.customFetchParameters,i=e.url,a=e.range,s=e.query,l=e.responseType,null==e.retryCount&&this.ioConfig.retryCount&&(e.retryCount=this.ioConfig.retryCount),u=a?{Range:\"bytes=\"+a.from+\"-\"+a.to}:null,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,o(i,{query:r.__assign(r.__assign({},s),n),headers:u,responseType:l,signal:t})];case 2:return[2,f.sent().data];case 3:if(c=f.sent(),e.retryCount>0)return e.retryCount--,[2,this.request(e,t)];throw c;case 4:return[2]}}))}))},t.prototype.getSliceIndex=function(e){var t=this.rasterInfo.multidimensionalInfo;if(!t||0===e.length)return null;for(var r=0,n=e[0].variableName,o=function(o){var i=t.variables[o],a=i.dimensions;if(i.name!==n)return r+=a.map((function(e){return e.values.length})).reduce((function(e,t){return e+t})),\"break\";for(var s=a.map((function(e){return e.values.length})),l=a.length,u=function(t){var n=e.filter((function(e){return e.dimensionName===a[t].name}))[0];if(null==n)return{value:null};var o=Array.isArray(n.values[0])?n.values[0][0]:n.values[0],i=a[t].values.indexOf(o);if(-1===i)return{value:null};s.shift(),r+=t===l-1?i:i*s.reduce((function(e,t){return e+t}))},c=0;c<l;c++){var f=u(c);if(\"object\"==typeof f)return f}},i=0;i<t.variables.length;i++){var a=o(i);if(\"object\"==typeof a)return a.value;if(\"break\"===a)break}return r},t.prototype.computeBestPyramidLevelForLocation=function(e,t){return void 0===t&&(t={}),r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,0]}))}))},t.prototype.identifyPixelLocation=function(e,t,r){var n=this.rasterInfo,o=n.spatialReference,i=n.pixelSize,a=n.extent,s=this.rasterInfo.storageInfo,l=s.blockWidth,u=s.blockHeight,c=s.maximumPyramidLevel,f=s.pyramidScalingFactor,p=s.origin,h=g.projectPoint(e,o,r);if(!a.intersects(h))return null;if(t<0||t>c)return null;var d=Math.pow(f,t),m=d*i.x,y=d*i.y,x=(p.y-h.y)/y/u,v=(h.x-p.x)/m/l,_=Math.min(u-1,Math.floor((x-Math.floor(x))*u)),w=Math.min(l-1,Math.floor((v-Math.floor(v))*l));return{pyramidLevel:t,row:Math.floor(x),col:Math.floor(v),rowOffset:_,colOffset:w,srcLocation:h}},t.prototype._getTileExtent=function(e,t,r,o){var i=o.origin,a=o.spatialReference,s=o.size[0],l=o.size[1],u=i.x+r*s*e.x,c=u+s*e.x,f=i.y-t*l*e.y,p=f-l*e.y;return new n.Extent({xmin:u,xmax:c,ymin:p,ymax:f,spatialReference:a})},t.prototype._fetchRawTile=function(e,t,n,o){var i=this.url,a=e+\"/\"+t+\"/\"+n,l=d.getBlock(i,o.registryId,a);if(!s.isSome(l)){var c=u.createAbortController();l=this.fetchRawTile(e,t,n,r.__assign(r.__assign({},o),{signal:c.signal})),d.putBlock(i,o.registryId,a,l,c),l.catch((function(){d.deleteBlock(i,o.registryId,a)}))}return o.signal&&u.onAbort(o,(function(){d.decreaseRefCount(i,o.registryId,a)})),l},r.__decorate([f.property(p.url)],t.prototype,\"url\",null),r.__decorate([f.property({type:String,json:{write:!0}})],t.prototype,\"datasetName\",void 0),r.__decorate([f.property({type:String,json:{write:!0}})],t.prototype,\"datasetFormat\",void 0),r.__decorate([f.property()],t.prototype,\"rasterInfo\",void 0),r.__decorate([f.property()],t.prototype,\"ioConfig\",void 0),r.__decorate([f.property()],t.prototype,\"sourceJSON\",void 0),t=r.__decorate([f.subclass(\"esri.layers.support.rasterDatasets.BaseRaster\")],t)}(l.EsriPromiseMixin(a.JSONSupport))}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/rasterDatasets/BaseRaster.js?')},\"./node_modules/arcgis-js-api/layers/support/rasterDatasets/CloudRaster.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT Â© 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../../geometry */ \"./node_modules/arcgis-js-api/geometry.js\"),__webpack_require__(/*! ../../../core/Error */ \"./node_modules/arcgis-js-api/core/Error.js\"),__webpack_require__(/*! ../../../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ../RasterInfo */ \"./node_modules/arcgis-js-api/layers/support/RasterInfo.js\"),__webpack_require__(/*! ../RasterStorageInfo */ \"./node_modules/arcgis-js-api/layers/support/RasterStorageInfo.js\"),__webpack_require__(/*! ../TileInfo */ \"./node_modules/arcgis-js-api/layers/support/TileInfo.js\"),__webpack_require__(/*! ./BaseRaster */ \"./node_modules/arcgis-js-api/layers/support/rasterDatasets/BaseRaster.js\"),__webpack_require__(/*! ./DBFParser */ \"./node_modules/arcgis-js-api/layers/support/rasterDatasets/DBFParser.js\"),__webpack_require__(/*! ../../../tasks/support/FeatureSet */ \"./node_modules/arcgis-js-api/tasks/support/FeatureSet.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,r,i,n,o,a,s,l,u,f,c,p,d){var h=new Map;h.set(\"int16\",\"esriFieldTypeSmallInteger\"),h.set(\"int32\",\"esriFieldTypeInteger\"),h.set(\"int64\",\"esriFieldTypeInteger\"),h.set(\"float32\",\"esriFieldTypeSingle\"),h.set(\"float64\",\"esriFieldTypeDouble\"),h.set(\"text\",\"esriFieldTypeString\");return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.storageInfo=null,t}return r.__extends(t,e),t.prototype.open=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,i,a,s,l,u;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.init()];case 1:return r.sent(),t=e?o.unwrap(e.signal):null,[4,this.request({url:this.url+\"/conf.json\",responseType:\"json\"},t)];case 2:if(i=r.sent(),!this._validateHeader(i))throw new n(\"cloudraster:open\",\"Invalid or unsupported conf.json.\");return this.datasetName=this.url.slice(this.url.lastIndexOf(\"/\")+1),a=this._parseHeader(i),s=a.storageInfo,\"thematic\"!==(l=a.rasterInfo).dataType?[3,4]:[4,this._fetchAuxiliaryInformation()];case 3:u=r.sent(),l.attributeTable=u,r.label=4;case 4:return this._set(\"storageInfo\",s),this._set(\"rasterInfo\",l),this.ioConfig.retryCount=this.ioConfig.retryCount||0,[2]}}))}))},t.prototype.fetchRawTile=function(e,t,i,n){return void 0===n&&(n={}),r.__awaiter(this,void 0,void 0,(function(){var o,a,s,l,u,f,c;return r.__generator(this,(function(r){switch(r.label){case 0:return(o=this.rasterInfo.storageInfo.maximumPyramidLevel-e)<0?[2,null]:(a=this._buildCacheFilePath(o,t,i,n.multidimensionalDefinition),s=this._getIndexRecordFromBundle(t,i),[4,this.request({url:a,range:{from:0,to:this.storageInfo.headerSize-1},responseType:\"array-buffer\"},n.signal)]);case 1:return(l=r.sent())?(u=new Uint8Array(l),0===(f=this._getTileEndAndContentType(u,s)).recordSize?[2,null]:[4,this.request({url:a,range:{from:f.position,to:f.position+f.recordSize},responseType:\"array-buffer\"},n.signal)]):[2,null];case 2:return(c=r.sent())?[2,this.decodePixelBlock(c,{width:this.rasterInfo.storageInfo.tileInfo.size[0],height:this.rasterInfo.storageInfo.tileInfo.size[1],planes:null,pixelType:null})]:[2,null]}}))}))},t.prototype._validateHeader=function(e){return e&&\"RasterInfo\"===e.type&&![\"origin\",\"extent\",\"geodataXform\",\"LODInfos\",\"blockWidth\",\"blockHeight\",\"bandCount\",\"pixelType\",\"pixelSizeX\",\"pixelSizeY\",\"format\",\"packetSize\"].some((function(t){return!e[t]}))},t.prototype._parseHeader=function(e){var t,r,n,o,a=[\"u1\",\"u2\",\"u4\",\"u8\",\"s8\",\"u16\",\"s16\",\"u32\",\"s32\",\"f32\",\"f64\"][e.pixelType],s=e.bandCount,c=e.histograms,p=e.colormap,d=e.blockWidth,h=e.blockHeight,m=e.firstPyramidLevel,y=e.maximumPyramidLevel,g=e.statistics&&e.statistics.map((function(e){return{min:e.min,max:e.max,avg:e.mean,stddev:e.standardDeviation,median:e.median,mode:e.mode}})),x=new i.SpatialReference(e.extent.spatialReference||e.geodataXform.spatialReference),v=new i.Extent({xmin:e.extent.xmin,ymin:e.extent.ymin,xmax:e.extent.xmax,ymax:e.extent.ymax,spatialReference:x}),I=new i.Point({x:e.pixelSizeX,y:e.pixelSizeY,spatialReference:x}),_=e.properties,S=e.format.toLowerCase().replace(\"cache/\",\"\"),b=new i.Point(e.origin.x,e.origin.y,x);if(p&&p.colors)for(t=[],r=0;r<p.colors.length;r++)n=p.colors[r],o=p.values?p.values[r]:r,t.push([o,255&n,n<<16>>>24,n<<8>>>24,n>>>24]);var w=e.LODInfos,T=[];for(r=0;r<w.levels.length;r++)T.push({level:w.levels[r],resolution:w.resolutions[r],scale:96/.0254*w.resolutions[r]});var z=new f({dpi:96,lods:T,format:S,origin:b,size:[d,h],spatialReference:x}),R={recordSize:8,packetSize:e.packetSize,headerSize:e.packetSize*e.packetSize*8+64},k=Math.round((v.xmax-v.xmin)/I.x),C=Math.round((v.ymax-v.ymin)/I.y),F=[{maxCol:Math.ceil(k/d)-1,maxRow:Math.ceil(C/h)-1,minCol:0,minRow:0}],P=2;if(y>0)for(r=0;r<y;r++)F.push({maxCol:Math.ceil(k/P/d)-1,maxRow:Math.ceil(C/P/h)-1,minCol:0,minRow:0}),P*=2;var H=e.mdInfo;return{storageInfo:R,rasterInfo:new l({width:k,height:C,pixelType:a,bandCount:s,extent:v,spatialReference:x,pixelSize:I,keyProperties:_,statistics:g,histograms:c,multidimensionalInfo:H,colormap:t,storageInfo:new u({blockWidth:d,blockHeight:h,pyramidBlockWidth:d,pyramidBlockHeight:h,origin:b,tileInfo:z,firstPyramidLevel:m,maximumPyramidLevel:y,blockBoundary:F})})}},t.prototype._fetchAuxiliaryInformation=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,i,n,o,s,l,u,f;return r.__generator(this,(function(r){switch(r.label){case 0:return t=this.request({url:this.url+\"/conf.vat.json\",responseType:\"json\"},e).then((function(e){return e})).catch((function(){return null})),i=this.request({url:this.url+\"/conf.vat.dbf\",responseType:\"array-buffer\"},e).then((function(e){return e})).catch((function(){return null})),[4,a.all([t,i])];case 1:return(n=r.sent())[0]&&(s=n[0].fields,l=n[0].values,s&&l&&(s=s.map((function(e){return{type:\"OID\"===e.name?\"esriFieldTypeOID\":h.get(e.type),name:e.name,alias:e.alias||e.name}})),u=l.map((function(e){return{attributes:e}})),s&&l&&(o={fields:s,features:u}))),!o&&n[1]&&(f=p.parse(n[1]),o=f.recordSet),[2,d.fromJSON(o)]}}))}))},t.prototype._buildCacheFilePath=function(e,t,r,i){var n=this.storageInfo.packetSize,o=Math.floor(t/n)*n,a=Math.floor(r/n)*n,s=\"R\"+this._toHexString4(o)+\"C\"+this._toHexString4(a),l=\"L\";l+=e>=10?e.toString():\"0\"+e.toString();var u=i&&i[0];if(!u)return this.url+\"/_alllayers/\"+l+\"/\"+s+\".bundle\";for(var f=this.rasterInfo.multidimensionalInfo.variables.filter((function(e){return e.name===u.variableName}))[0].dimensions[0].values.indexOf(u.values[0]).toString(16),c=4-f.length,p=0;p<c;p++)f=\"0\"+f;return f=\"S\"+f,this.url+\"/_alllayers/\"+u.variableName+\"/\"+f+\"/\"+l+\"/\"+s+\".bundle\"},t.prototype._getIndexRecordFromBundle=function(e,t){var r=this.storageInfo.packetSize,i=r*(e%r)+t%r;if(i<0)throw\"Invalid level / row / col\";return 20+i*this.storageInfo.recordSize+44},t.prototype._getTileEndAndContentType=function(e,t){var r,i=e.subarray(t,t+8),n=0;for(r=0;r<5;r++)n|=(255&i[r])<<8*r;var o=0xffffffffff&n;for(n=0,r=5;r<8;r++)n|=(255&i[r])<<8*(r-5);return{position:o,recordSize:0xffffffffff&n}},t.prototype._toHexString4=function(e){var t=e.toString(16);if(4!==t.length)for(var r=4-t.length;r-- >0;)t=\"0\"+t;return t},r.__decorate([s.property({readOnly:!0})],t.prototype,\"storageInfo\",void 0),r.__decorate([s.property({type:String,json:{write:!0}})],t.prototype,\"datasetFormat\",void 0),t=r.__decorate([s.subclass(\"esri.layers.support.rasterDatasets.CloudRaster\")],t)}(c)}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/rasterDatasets/CloudRaster.js?')},\"./node_modules/arcgis-js-api/layers/support/rasterDatasets/DBFParser.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT Â© 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! ./byteStreamUtils */ \"./node_modules/arcgis-js-api/layers/support/rasterDatasets/byteStreamUtils.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,r){return function(){function e(){}return Object.defineProperty(e,\"supportedVersions\",{get:function(){return[5]},enumerable:!0,configurable:!0}),e.parse=function(e){var t=new DataView(e),n=3&t.getUint8(0);if(3!==n)return{header:{version:n},recordSet:null};var i,a=t.getUint32(4,!0),o=t.getUint16(8,!0),s=t.getUint16(10,!0),u={version:n,recordCount:a,headerByteCount:o,recordByteCount:s},l=32,f=[],p=[];if(3===n){for(;13!==t.getUint8(l);)i=String.fromCharCode(t.getUint8(l+11)).trim(),f.push({name:r.bytesToUTF8(new Uint8Array(e,l,11)),type:i,typeName:[\"String\",\"Date\",\"Double\",\"Boolean\",\"String\",\"Integer\"][[\"C\",\"D\",\"F\",\"L\",\"M\",\"N\"].indexOf(i)],length:t.getUint8(l+16)}),l+=32;if(l+=1,f.length>0)for(var g=function(){var n=[];32===t.getUint8(l)?(l+=1,f.forEach((function(t){if(\"C\"===t.type)n.push(r.bytesToUTF8(new Uint8Array(e,l,t.length)).trim());else if(\"N\"===t.type)n.push(parseInt(String.fromCharCode.apply(null,new Uint8Array(e,l,t.length)).trim(),10));else if(\"F\"===t.type)n.push(parseFloat(String.fromCharCode.apply(null,new Uint8Array(e,l,t.length)).trim()));else if(\"D\"===t.type){var i=String.fromCharCode.apply(null,new Uint8Array(e,l,t.length)).trim();n.push(new Date(parseInt(i.substring(0,4),10),parseInt(i.substring(4,6),10)-1,parseInt(i.substring(6,8),10)))}l+=t.length})),p.push(n)):l+=s};p.length<a&&e.byteLength-l>s;)g()}var d=function(e){var t=e.fields,r=e.records,n=t.some((function(e){return\"oid\"===e.name.toLowerCase()}))?\"OBJECTID\":\"OID\",i=[{name:n,type:\"esriFieldTypeOID\",alias:\"OID\"}].concat(t.map((function(e){return{name:e.name,type:\"esriFieldType\"+e.typeName,alias:e.name}}))),a=i.map((function(e){return e.name})),o=[],s=0,u=0;return r.forEach((function(e){var t={};for(t[n]=s++,u=1;u<a.length;u++)t[a[u]]=e[u-1];o.push({attributes:t})})),{displayFieldName:\"\",fields:i,features:o}}({fields:f,records:p});return{header:u,fields:f,records:p,recordSet:d}},e}()}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/rasterDatasets/DBFParser.js?')},\"./node_modules/arcgis-js-api/layers/support/rasterDatasets/ImageServerRaster.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT Â© 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../../geometry */ \"./node_modules/arcgis-js-api/geometry.js\"),__webpack_require__(/*! ../../../request */ \"./node_modules/arcgis-js-api/request.js\"),__webpack_require__(/*! ../../../core/Error */ \"./node_modules/arcgis-js-api/core/Error.js\"),__webpack_require__(/*! ../../../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../../core/urlUtils */ \"./node_modules/arcgis-js-api/core/urlUtils.js\"),__webpack_require__(/*! ../../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ../RasterInfo */ \"./node_modules/arcgis-js-api/layers/support/RasterInfo.js\"),__webpack_require__(/*! ../RasterStorageInfo */ \"./node_modules/arcgis-js-api/layers/support/RasterStorageInfo.js\"),__webpack_require__(/*! ../serviceTileInfoProperty */ \"./node_modules/arcgis-js-api/layers/support/serviceTileInfoProperty.js\"),__webpack_require__(/*! ../TileInfo */ \"./node_modules/arcgis-js-api/layers/support/TileInfo.js\"),__webpack_require__(/*! ../TilemapCache */ \"./node_modules/arcgis-js-api/layers/support/TilemapCache.js\"),__webpack_require__(/*! ./BaseRaster */ \"./node_modules/arcgis-js-api/layers/support/rasterDatasets/BaseRaster.js\"),__webpack_require__(/*! ../rasterFunctions/pixelUtils */ \"./node_modules/arcgis-js-api/layers/support/rasterFunctions/pixelUtils.js\"),__webpack_require__(/*! ../../../tasks/support/FeatureSet */ \"./node_modules/arcgis-js-api/tasks/support/FeatureSet.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,i,n,r,a,l,s,o,u,c,h,f,m,p,x,d,y){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._levelOffset=0,t._slices=null,t._tilemapCache=null,t}return i.__extends(t,e),t.prototype.open=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,s,u,c,x,d,y,v,g,w,_,b,S,M,I,T,R,C,z,O,L,N,P,j;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.init()];case 1:return i.sent(),t=e&&e.signal,this.sourceJSON?(s={data:this.sourceJSON},[3,4]):[3,2];case 2:return[4,r(this.url,{responseType:\"json\",query:{f:\"json\"},signal:t})];case 3:s=i.sent(),i.label=4;case 4:if((n=s).ssl&&(this.url=this.url.replace(/^http:/i,\"https:\")),u=n.data,this.sourceJSON=u,c=[\"jpg\",\"jpeg\",\"png\",\"png8\",\"png24\",\"png32\",\"mixed\"],this.tileType=u.cacheType,null===this.tileType&&(c.indexOf(u.tileInfo.format.toLowerCase())>-1?this.tileType=\"Map\":\"lerc\"===u.tileInfo.format.toLowerCase()?this.tileType=\"Elevation\":this.tileType=\"Raster\"),!u)throw new a(\"imageserverraster:open\",\"cannot initialize tiled image service, missing service info\");if(!u.tileInfo)throw new a(\"imageserverraster:open\",\"use ImageryLayer to open non-tiled image services\");return this.datasetName=u.name,[4,this._fetchRasterInfo({signal:t})];case 5:if(x=i.sent(),!l.isSome(x))throw new a(\"image-server-raster:open\",\"cannot initialize image service\");if(d=\"Map\"===this.tileType?f.readServiceTileInfo(u.tileInfo,u,null):m.fromJSON(u.tileInfo),y=x.extent,v=x.pixelSize,g=.5/x.width*v.x,w=void 0,_=void 0,b=d.lodAt(Math.max.apply(null,d.lods.map((function(e){return e.level})))),\"Map\"!==this.tileType&&0!==u.maxScale&&(\"Raster\"===this.tileType?(w=d.lods.filter((function(e){return e.resolution===v.x}))[0])||(w=d.lods.filter((function(e){return e.resolution>v.x})).sort((function(e,t){return e.resolution>t.resolution?1:-1}))[0]):(w=d.lods.filter((function(e){return Math.abs(e.scale-u.maxScale)<g}))[0])||(w=d.lods.filter((function(e){return e.scale>u.maxScale})).sort((function(e,t){return e.scale>t.scale?1:-1}))[0]),v.x=v.y=w.resolution,x.width=Math.ceil((y.xmax-y.xmin)/v.x-.1),x.height=Math.ceil((y.ymax-y.ymin)/v.y-.1)),w||(w=b),S=d.lodAt(Math.min.apply(null,d.lods.map((function(e){return e.level})))),\"Map\"===this.tileType?this._levelOffset=d.lods[0].level:0!==u.minScale&&\"Elevation\"===this.tileType&&(_=d.lods.filter((function(e){return Math.abs(e.scale-u.minScale)<g}))[0],this._levelOffset=_.level-S.level),_||(_=S),M=Math.max(v.x,v.y),(Math.abs(v.x-v.y)>g||!d.lods.some((function(e){return Math.abs(e.resolution-M)<g})))&&(v.x=v.y=w.resolution,x.width=Math.ceil((y.xmax-y.xmin)/v.x-.1),x.height=Math.ceil((y.ymax-y.ymin)/v.y-.1)),I=w.level-_.level,T=d.size,R=T[0],C=T[1],z=d.origin,O=v.x,L=v.y,N=[{minCol:Math.floor((y.xmin-z.x+.1*O)/R/O),maxCol:Math.floor((y.xmax-z.x-.1*O)/R/O),minRow:Math.floor((z.y-y.ymax+.1*L)/C/L),maxRow:Math.floor((z.y-y.ymin-.1*L)/C/L)}],I>0)for(P=0;P<I;P++)O*=2,L*=2,N.push({minCol:Math.floor((y.xmin-z.x+.1*O)/R/O),maxCol:Math.floor((y.xmax-z.x-.1*O)/R/O),minRow:Math.floor((z.y-y.ymax+.1*L)/C/O),maxRow:Math.floor((z.y-y.ymin-.1*L)/C/O)});return x.storageInfo=new h({blockWidth:d.size[0],blockHeight:d.size[1],pyramidBlockWidth:d.size[0],pyramidBlockHeight:d.size[1],compression:d.format,origin:d.origin,firstPyramidLevel:1,maximumPyramidLevel:I,tileInfo:d,blockBoundary:N}),this._set(\"rasterInfo\",x),u.capabilities.toLowerCase().indexOf(\"tilemap\")>-1&&(j={tileInfo:x.storageInfo.tileInfo,parsedUrl:o.urlToObject(this.url),url:this.url,tileServers:[],type:\"tile\"},this._tilemapCache=new p.TilemapCache({layer:j})),[2]}}))}))},t.prototype.fetchRawTile=function(e,t,n,r){return void 0===r&&(r={}),i.__awaiter(this,void 0,void 0,(function(){var a,l,s,o,u,c,h,f,m,p,x,y,v,g,w,_,b,S,M,I,T,R;return i.__generator(this,(function(i){switch(i.label){case 0:return a=this.rasterInfo,l=a.storageInfo,s=a.extent,o=a.pixelSize,u=l.maximumPyramidLevel-e+this._levelOffset,c=this.url+\"/tile/\"+u+\"/\"+t+\"/\"+n,h=this._slices?{sliceId:r.sliceId||0}:null,[4,this.request({url:c,query:h,responseType:\"array-buffer\"},r.signal)];case 1:return(f=i.sent())?[4,this.decodePixelBlock(f,{width:l.tileInfo.size[0],height:l.tileInfo.size[1],planes:null,pixelType:null,isPoint:\"Elevation\"===this.tileType})]:[2,null];case 2:return m=i.sent(),p=l.blockBoundary[e],\"jpg\"!==l.compression||n>p.minCol&&n<p.maxCol&&t>p.minRow&&t<p.maxRow?[2,m]:(x=l.origin,y=l.blockWidth,v=l.blockHeight,g=Math.pow(2,e),w=Math.round((s.xmin-x.x)/(o.x*g))%y,_=Math.round((s.xmax-x.x)/(o.x*g))%y,b=Math.round((x.y-s.ymax)/(o.x*g))%v,S=Math.round((x.y-s.ymin)/(o.x*g))%v,M=n===p.minCol?w:0,I=t===p.minRow?b:0,T=n===p.maxCol?_:y,R=t===p.maxRow?S:v,d.setValidBoundary(m,{x:M,y:I},{width:T-M,height:R-I}),[2,m])}}))}))},t.prototype.getSliceIndex=function(e){for(var t=e,i=0;i<this._slices.length;i++){var n=this._slices[i].multidimensionalDefinition;if(n.length===t.length&&!n.some((function(e){var i=t.filter((function(t){return e.variableName===t.variableName&&t.dimensionName===e.dimensionName}))[0];return i?(Array.isArray(e.values[0])?e.values[0][0]:e.values[0])!==(Array.isArray(i.values[0])?i.values[0][0]:i.values[0]):null})))return i}return null},t.prototype.computeBestPyramidLevelForLocation=function(e,t){return void 0===t&&(t={}),i.__awaiter(this,void 0,void 0,(function(){var n,r,a,l,s;return i.__generator(this,(function(i){switch(i.label){case 0:if(!this._tilemapCache)return[2,0];if(null===(n=this.identifyPixelLocation(e,0,t.datumTransformation)))return[2,null];r=0,a=this.rasterInfo.storageInfo.maximumPyramidLevel,l=a-r+this._levelOffset,s=n.srcLocation,i.label=1;case 1:if(!(l>=0))return[3,6];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this._tilemapCache.fetchAvailability(l,n.row,n.col,t)];case 3:return\"available\"===i.sent()?[3,6]:[3,5];case 4:return i.sent(),[3,5];case 5:return l--,r++,null===(n=this.identifyPixelLocation(s,r,t.datumTransformation))?[2,null]:[3,1];case 6:return-1===l||null==n?[2,null]:[2,r]}}))}))},t.prototype._fetchRasterInfo=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t,a,l,o,u,h,f,m,p,x,d,v,g=this;return i.__generator(this,(function(i){return t=this.sourceJSON,a=Math.ceil((t.extent.xmax-t.extent.xmin)/t.pixelSizeX-.1),l=Math.ceil((t.extent.ymax-t.extent.ymin)/t.pixelSizeY-.1),o=n.SpatialReference.fromJSON(t.spatialReference||t.extent.spatialReference),\"Map\"===this.tileType?[2,new c({width:a,height:l,bandCount:3,extent:n.Extent.fromJSON(t.extent),spatialReference:o,pixelSize:new n.Point({x:t.pixelSizeX,y:t.pixelSizeY,spatialReference:o}),pixelType:\"u8\",statistics:null})]:(u=e.slice,h=e.signal,f=!!t.hasRasterAttributeTable&&r(this.url+\"/rasterAttributeTable\",{query:{slice:u,f:\"json\"},signal:h}).then((function(e){return y.fromJSON(e.data)})).catch((function(){return null})),m=!!t.hasColormap&&r(this.url+\"/colormap\",{query:{slice:u,f:\"json\"},signal:h}).then((function(e){return e.data&&e.data.colormap})),p=!!t.hasHistograms&&r(this.url+\"/histograms\",{query:{slice:u,f:\"json\"},signal:h}).then((function(e){return e.data&&e.data.histograms})),x=r(this.url+\"/keyProperties\",{query:{f:\"json\"},signal:h}).then((function(e){return e.data})).catch((function(){})),d=!!t.hasMultidimensions&&r(this.url+\"/multidimensionalInfo\",{query:{f:\"json\"},signal:h}).then((function(e){return e.data&&e.data.multidimensionalInfo})),v=!!t.hasMultidimensions&&r(this.url+\"/slices\",{query:{f:\"json\"},signal:h}).then((function(e){return e.data&&e.data.slices})).catch((function(){})),[2,s.all([f,m,p,x,d,v]).then((function(e){var i=null;if(t.minValues&&t.minValues.length===t.bandCount){i=[];for(var r=0;r<t.minValues.length;r++)i.push({min:t.minValues[r],max:t.maxValues[r],avg:t.meanValues[r],stddev:t.stdvValues[r]})}return g._slices=e[5]||null,new c({width:a,height:l,bandCount:t.bandCount,extent:n.Extent.fromJSON(t.extent),spatialReference:o,pixelSize:new n.Point({x:t.pixelSizeX,y:t.pixelSizeY,spatialReference:o}),pixelType:t.pixelType.toLowerCase(),statistics:i,attributeTable:e[0]||null,colormap:e[1]||null,histograms:e[2]||null,keyProperties:e[3]||null,multidimensionalInfo:e[4]||null})}))])}))}))},i.__decorate([u.property({type:String,json:{write:!0}})],t.prototype,\"datasetFormat\",void 0),i.__decorate([u.property()],t.prototype,\"tileType\",void 0),t=i.__decorate([u.subclass(\"esri.layers.support.rasterDatasets.ImageServerRaster\")],t)}(x)}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/rasterDatasets/ImageServerRaster.js?')},\"./node_modules/arcgis-js-api/layers/support/rasterDatasets/MRFRaster.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT Â© 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../../geometry */ \"./node_modules/arcgis-js-api/geometry.js\"),__webpack_require__(/*! ../../../core/Error */ \"./node_modules/arcgis-js-api/core/Error.js\"),__webpack_require__(/*! ../../../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ../PixelBlock */ \"./node_modules/arcgis-js-api/layers/support/PixelBlock.js\"),__webpack_require__(/*! ../RasterInfo */ \"./node_modules/arcgis-js-api/layers/support/RasterInfo.js\"),__webpack_require__(/*! ../RasterStorageInfo */ \"./node_modules/arcgis-js-api/layers/support/RasterStorageInfo.js\"),__webpack_require__(/*! ./BaseRaster */ \"./node_modules/arcgis-js-api/layers/support/rasterDatasets/BaseRaster.js\"),__webpack_require__(/*! ./xmlUtilities */ \"./node_modules/arcgis-js-api/layers/support/rasterDatasets/xmlUtilities.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,r,n,a,o,i,s,l,u,f,p,h){var c,g,d=(c=new ArrayBuffer(4),g=new Uint8Array(c),new Uint32Array(c)[0]=1,1===g[0]),m=new Map;m.set(\"Int8\",\"s8\"),m.set(\"UInt8\",\"u8\"),m.set(\"Int16\",\"s16\"),m.set(\"UInt16\",\"u16\"),m.set(\"Int32\",\"s32\"),m.set(\"UInt32\",\"u32\"),m.set(\"Float32\",\"f32\"),m.set(\"Float64\",\"f32\"),m.set(\"Double64\",\"f32\");var y=new Map;return y.set(\"lerc\",\".lrc\"),y.set(\"none\",\".til\"),y.set(\"deflate\",\".pzp\"),y.set(\"jpeg\",\".jzp\"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._files=null,t._storageIndex=null,t}return r.__extends(t,e),t.prototype.open=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,a,i,s,l,u,f,p,h,c,g,d,m,y,w,I,x,b,_,v;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.init()];case 1:return r.sent(),this.datasetName=this.url.slice(this.url.lastIndexOf(\"/\")+1),t=e?o.unwrap(e.signal):null,[4,this.request({url:this.url,responseType:\"xml\"},t)];case 2:return n=r.sent(),a=this._parseHeader(n),i=a.rasterInfo,s=a.files,this._set(\"rasterInfo\",i),this._files=s,[4,this.request({url:s.index,responseType:\"array-buffer\"},t)];case 3:for(l=r.sent(),this._storageIndex=this._parseIndex(l),u=0,f=-1,c=this.rasterInfo.storageInfo,g=c.blockWidth,d=c.blockHeight,m=c.compression,y=this.rasterInfo.storageInfo.pyramidScalingFactor,w=this.rasterInfo,I=w.width,x=w.height,b=w.bandCount,_=[],v=\"none\"===m?1:b;u<this._storageIndex.length;)f++,p=Math.ceil(I/g/Math.pow(y,f)),h=Math.ceil(x/d/Math.pow(y,f)),u+=p*h*v*4,_.push({maxRow:h,maxCol:p,minCol:0,minRow:0});return this.rasterInfo.storageInfo.blockBoundary=_,f>0&&(this.rasterInfo.storageInfo.firstPyramidLevel=1,this.rasterInfo.storageInfo.maximumPyramidLevel=f),[2]}}))}))},t.prototype.fetchRawTile=function(e,t,n,a){return void 0===a&&(a={}),r.__awaiter(this,void 0,void 0,(function(){var o,s,u,f,p,h,c,g,d,m,y,w,I,x,b,_,v,A,M,R,T,E,F,k,U,C;return r.__generator(this,(function(r){switch(r.label){case 0:if(o=this.rasterInfo.storageInfo,s=o.blockWidth,u=o.blockHeight,f=o.blockBoundary,p=o.compression,!(h=f[e])||h.maxRow<t||h.maxCol<n||h.minRow>t||h.minCol>n)return[2,null];if(c=this.rasterInfo,g=c.bandCount,d=c.pixelType,m=this._getTileLocation(e,t,n),y=m.ranges,w=m.actualTileWidth,I=m.actualTileHeight,!y||0===y.length)return[2,null];if(0===y[0].from&&0===y[0].to)return C=new Uint8Array(s*u),[2,new l({width:s,height:u,pixels:null,mask:C,validPixelCount:0})];for(x=this.ioConfig.bandIds,b=\"none\"===p?1:g,_=[],v=0,v=0;v<b;v++)(!x||x.indexOf[v]>-1)&&_.push(this.request({url:this._files.data,range:{from:y[v].from,to:y[v].to},responseType:\"array-buffer\"},a.signal));return[4,i.all(_)];case 1:for(A=r.sent(),M=A.map((function(e){return e.byteLength})).reduce((function(e,t){return e+t})),R=new Uint8Array(M),T=0,v=0;v<b;v++)R.set(new Uint8Array(A[v]),T),T+=A[v].byteLength;return E=\"lerc\"===this.rasterInfo.storageInfo.compression?\"lerc\":\"bip\",[4,this.decodePixelBlock(R.buffer,{width:s,height:u,format:E,pixelType:d})];case 2:if(F=r.sent(),k=0,U=0,w!==s||I!==u)if(C=F.mask)for(v=0;v<u;v++)if(U=v*s,v<I)for(k=w;k<s;k++)C[U+k]=0;else for(k=0;k<s;k++)C[U+k]=0;else for(C=new Uint8Array(s*u),F.mask=C,v=0;v<I;v++)for(U=v*s,k=0;k<w;k++)C[U+k]=1;return[2,F]}}))}))},t.prototype._parseIndex=function(e){if(e.byteLength%16>0)throw\"invalid array buffer must be multiples of 16\";var t,r,n,a,o,i;if(d){for(r=new Uint8Array(e),a=new ArrayBuffer(e.byteLength),n=new Uint8Array(a),o=0;o<e.byteLength/4;o++)for(i=0;i<4;i++)n[4*o+i]=r[4*o+3-i];t=new Uint32Array(a)}else t=new Uint32Array(e);return t},t.prototype._getTileLocation=function(e,t,r){var n,a,o,i=this.rasterInfo.storageInfo,s=i.blockWidth,l=i.blockHeight,u=i.pyramidScalingFactor,f=i.compression,p=this.rasterInfo,h=p.width,c=p.height,g=p.bandCount,d=\"none\"===f?1:g,m=0,y=0;for(o=0;o<e;o++)y=Math.pow(u,o),m+=(n=Math.ceil(h/s/y))*(a=Math.ceil(c/l/y));y=Math.pow(u,e),n=Math.ceil(h/s/y),a=Math.ceil(c/l/y),m+=t*n+r,m*=4*d;for(var w=this._storageIndex.subarray(m,m+4*d),I=0,x=0,b=[],_=0;_<d;_++)x=(I=w[4*_+0]*Math.pow(2,32)+w[4*_+1])+w[4*_+2]*Math.pow(2,32)+w[4*_+3],b.push({from:I,to:x});return{ranges:b,actualTileWidth:r<n-1?s:Math.ceil(h/y)-s*(n-1),actualTileHeight:t<a-1?l:Math.ceil(c/y)-l*(a-1)}},t.prototype._parseHeader=function(e){var t=h.getElement(e,\"MRF_META/Raster\");if(!t)throw new a(\"mrf:open\",\"not a valid MRF format\");var r=h.getElement(t,\"Size\"),o=parseInt(r.getAttribute(\"x\"),10),i=parseInt(r.getAttribute(\"y\"),10),s=parseInt(r.getAttribute(\"c\"),10),l=(h.getElementValue(t,\"Compression\")||\"none\").toLowerCase();if(!l||-1===[\"none\",\"lerc\"].indexOf(l))throw new a(\"mrf:open\",\"currently does not support compression \"+l);var p=h.getElementValue(t,\"DataType\")||\"UInt8\",c=m.get(p);if(null==c)throw new a(\"mrf:open\",\"currently does not support pixel type \"+p);var g,d,w=h.getElement(t,\"PageSize\"),I=parseInt(w.getAttribute(\"x\"),10),x=parseInt(w.getAttribute(\"y\"),10),b=h.getElement(t,\"DataValues\");if(b&&null!=(d=b.getAttribute(\"NoData\"))&&(g=d.trim().split(\" \").map((function(e){return parseFloat(e)}))),h.getElement(e,\"MRF_META/CachedSource\"))throw new a(\"mrf:open\",\"currently does not support MRF referencing other data files\");var _=h.getElement(e,\"MRF_META/GeoTags\"),v=h.getElement(_,\"BoundingBox\");if(null==v)throw new a(\"mrf:open\",\"missing node MRF_META/GeoTags/BoundingBox\");var A,M=parseFloat(v.getAttribute(\"minx\")),R=parseFloat(v.getAttribute(\"miny\")),T=parseFloat(v.getAttribute(\"maxx\")),E=parseFloat(v.getAttribute(\"maxy\")),F=h.getElementValue(_,\"Projection\"),k=h.getElementValue(e,\"datafile\"),U=h.getElementValue(e,\"IndexFile\");\"LOCAL_CS[]\"!==F&&(A=new n.SpatialReference({wkt:F}));var C=new n.Extent(M,R,T,E);C.spatialReference=A;var B=h.getElement(e,\"MRF_META/Rsets\"),L=parseInt(B&&B.getAttribute(\"scale\")||\"2\",10),S=new f({origin:new n.Point({x:C.xmin,y:C.ymax,spatialReference:A}),blockWidth:I,blockHeight:x,pyramidBlockWidth:I,pyramidBlockHeight:x,compression:l,pyramidScalingFactor:L}),H=new n.Point({x:(T-M)/o,y:(E-R)/i,spatialReference:A});return{rasterInfo:new u({width:o,height:i,extent:C,spatialReference:A,bandCount:s,pixelType:c,pixelSize:H,noDataValue:g,storageInfo:S}),files:{mrf:this.url,index:U||this.url.replace(\".mrf\",\".idx\"),data:k||this.url.replace(\".mrf\",y.get(l))}}},r.__decorate([s.property()],t.prototype,\"_files\",void 0),r.__decorate([s.property()],t.prototype,\"_storageIndex\",void 0),r.__decorate([s.property({type:String,json:{write:!0}})],t.prototype,\"datasetFormat\",void 0),t=r.__decorate([s.subclass(\"esri.layers.support.rasterIO.MRFRaster\")],t)}(p)}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/rasterDatasets/MRFRaster.js?')},\"./node_modules/arcgis-js-api/layers/support/rasterDatasets/RasterFactory.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT Â© 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../../core/Error */ \"./node_modules/arcgis-js-api/core/Error.js\"),__webpack_require__(/*! ../../../core/MapUtils */ \"./node_modules/arcgis-js-api/core/MapUtils.js\"),__webpack_require__(/*! ./CloudRaster */ \"./node_modules/arcgis-js-api/layers/support/rasterDatasets/CloudRaster.js\"),__webpack_require__(/*! ./ImageServerRaster */ \"./node_modules/arcgis-js-api/layers/support/rasterDatasets/ImageServerRaster.js\"),__webpack_require__(/*! ./MRFRaster */ \"./node_modules/arcgis-js-api/layers/support/rasterDatasets/MRFRaster.js\"),__webpack_require__(/*! ./TIFFRaster */ \"./node_modules/arcgis-js-api/layers/support/rasterDatasets/TIFFRaster.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,r,t,n,o,s,a,u,c){var i=new Map;return i.set(\"CRF\",{desc:\"Cloud Raster Format\",constructor:s}),i.set(\"MRF\",{desc:\"Meta Raster Format\",constructor:u}),i.set(\"TIFF\",{desc:\"GeoTIFF\",constructor:c}),i.set(\"RasterTileServer\",{desc:\"Raster Tile Server\",constructor:a}),function(){function e(){}return Object.defineProperty(e,\"supportedFormats\",{get:function(){var e=new Set;return i.forEach((function(r,t){return e.add(t)})),e},enumerable:!0,configurable:!0}),e.open=function(e){return t.__awaiter(this,void 0,void 0,(function(){var r,s,a,u,c,l,f,d,p,F,g;return t.__generator(this,(function(t){switch(t.label){case 0:return r=e.url,s=e.ioConfig,a=e.sourceJSON,null==(u=e.datasetFormat)&&r.lastIndexOf(\".\")&&(u=r.slice(r.lastIndexOf(\".\")+1).toUpperCase()),\"OVR\"===u||\"TIF\"===u?u=\"TIFF\":r.toLowerCase().indexOf(\"/imageserver\")>-1&&(u=\"RasterTileServer\"),c={bandIds:null,sampling:null},l={url:r,sourceJSON:a,datasetFormat:u,ioConfig:s||c},this.supportedFormats.has(u)?(f=i.get(u).constructor,[4,(d=new f(l)).open({signal:e.signal})]):[3,2];case 1:return t.sent(),[2,d];case 2:if(u)throw new n(\"rasterfactory:open\",\"not a supported format \"+u);return p=o.keysOfMap(i),F=0,[2,(g=function(){return(u=p[F++])?(f=i.get(u).constructor,(d=new f(l)).open({signal:e.signal}).then((function(){return d})).catch((function(){return g()}))):null})()]}}))}))},e.register=function(e,r,t){i.has(e.toUpperCase())||i.set(e.toUpperCase(),{desc:r,constructor:t})},e}()}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/rasterDatasets/RasterFactory.js?')},\"./node_modules/arcgis-js-api/layers/support/rasterDatasets/TIFFRaster.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT Â© 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ../../../geometry */ \"./node_modules/arcgis-js-api/geometry.js\"),__webpack_require__(/*! ../../../core/Error */ \"./node_modules/arcgis-js-api/core/Error.js\"),__webpack_require__(/*! ../../../core/maybe */ \"./node_modules/arcgis-js-api/core/maybe.js\"),__webpack_require__(/*! ../../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ../RasterInfo */ \"./node_modules/arcgis-js-api/layers/support/RasterInfo.js\"),__webpack_require__(/*! ../RasterStorageInfo */ \"./node_modules/arcgis-js-api/layers/support/RasterStorageInfo.js\"),__webpack_require__(/*! ./BaseRaster */ \"./node_modules/arcgis-js-api/layers/support/rasterDatasets/BaseRaster.js\"),__webpack_require__(/*! ../rasterFormats/TiffDecoder */ \"./node_modules/arcgis-js-api/layers/support/rasterFormats/TiffDecoder.js\"),__webpack_require__(/*! ../rasterFormats/TiffTags */ \"./node_modules/arcgis-js-api/layers/support/rasterFormats/TiffTags.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,r,i,n,a,s,o,u,l,f,h){var d=function(e,t){var r=e.get(t);return r&&r.values},c=function(e,t){var r=e.get(t);return r&&r.values[0]};return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._files=null,t._headerInfo=null,t._bufferSize=1048576,t}return r.__extends(t,e),t.prototype.open=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,s,l,h,d,c,p,y,m,I,_,g,v,T,b,w,x,F,S,E,B,D,k,R,L,O,z;return r.__generator(this,(function(H){switch(H.label){case 0:return[4,this.init()];case 1:return H.sent(),t=e?a.unwrap(e.signal):null,[4,this.request({url:this.url,range:{from:0,to:this._bufferSize},responseType:\"array-buffer\"},t)];case 2:if(!(s=H.sent()))throw new n(\"tiffraster:open\",\"failed to open url \"+this.url);return this.datasetName=this.url.slice(this.url.lastIndexOf(\"/\")+1),l=f.parseSignature(s),h=l.littleEndian,d=l.firstIFD,c=[],[4,this.readIFDs(c,s,h,d,0,4,t)];case 3:if(H.sent(),p=f.getImageInfo(c),y=p.width,m=p.height,I=p.tileWidth,_=p.tileHeight,g=p.planes,v=p.pixelType,T=p.compression,b=p.firstPyramidLevel,w=p.maximumPyramidLevel,x=p.pyramidBlockWidth,F=p.pyramidBlockHeight,S=p.tileBoundary,E=p.metadata,B=i.Extent.fromJSON(p.extent),D=B.spatialReference,k=B?new i.Point({x:B.xmin,y:B.ymax,spatialReference:D}):new i.Point({x:0,y:0}),R=new u({blockWidth:I,blockHeight:_,pyramidBlockWidth:x,pyramidBlockHeight:F,compression:T,origin:k,firstPyramidLevel:b,maximumPyramidLevel:w,blockBoundary:S}),L=new i.Point({x:(B.xmax-B.xmin)/y,y:(B.ymax-B.ymin)/m,spatialReference:D}),O=E?{BandProperties:E.bandProperties,DataType:E.dataType}:null,z=new o({width:y,height:m,bandCount:g,pixelType:v,compression:T,pixelSize:L,storageInfo:R,spatialReference:D,keyProperties:O,extent:B,statistics:E?E.statistics:null}),this._set(\"rasterInfo\",z),this._headerInfo=r.__assign({littleEndian:h,ifds:c},p),!this._headerInfo.isSupported)throw new n(\"tiffraster:open\",\"this tiff is not supported: \"+this._headerInfo.message);return[2]}}))}))},t.prototype.fetchRawTile=function(e,t,i,n){return void 0===n&&(n={}),r.__awaiter(this,void 0,void 0,(function(){var a,s,o,u,l,f,h,d,c,p,y,m,I,_,g;return r.__generator(this,(function(r){switch(r.label){case 0:return!this._headerInfo&&this._headerInfo.isSupported?[2,null]:(a=this.rasterInfo.storageInfo.blockBoundary,s=e>0?this.rasterInfo.storageInfo.pyramidBlockWidth:this.rasterInfo.storageInfo.blockWidth,o=e>0?this.rasterInfo.storageInfo.pyramidBlockHeight:this.rasterInfo.storageInfo.blockHeight,!(u=a[e])||u.maxRow<t||u.maxCol<i||u.minRow>t||u.minCol>i?[2,null]:(l=this.getTileLocation(e,t,i))?(f=l.range,h=l.actualTileWidth,d=l.actualTileHeight,c=l.ifd,[4,this.request({url:this.url,range:f,responseType:\"array-buffer\"},n.signal)]):[2,null]);case 1:return p=r.sent(),[4,this.decodePixelBlock(p,{format:\"tiff\",customOptions:{headerInfo:this._headerInfo,ifd:c,offset:0,size:0},width:s,height:o,planes:null,pixelType:null})];case 2:if(y=r.sent(),h!==s||d!==o)if(g=y.mask)for(m=0;m<o;m++)if(_=m*s,m<d)for(I=h;I<s;I++)g[_+I]=0;else for(I=0;I<s;I++)g[_+I]=0;else for(g=new Uint8Array(s*o),y.mask=g,m=0;m<d;m++)for(_=m*s,I=0;I<h;I++)g[_+I]=1;return[2,y]}}))}))},t.prototype.readIFDs=function(e,t,i,n,a,s,o){return void 0===s&&(s=4),r.__awaiter(this,void 0,void 0,(function(){var u;return r.__generator(this,(function(r){switch(r.label){case 0:return n?n>=t.byteLength||n<0?[4,this.request({url:this.url,range:{from:n+a,to:n+a+this._bufferSize},responseType:\"array-buffer\"},o)]:[3,2]:[2,null];case 1:t=r.sent(),a=n+a,n=0,r.label=2;case 2:return[4,this.readIFD(t,i,n,a,h.TIFF_TAGS,s,o)];case 3:return u=r.sent(),e.push(u.ifd),u.nextIFD?[4,this.readIFDs(e,t,i,u.nextIFD-a,a,s,o)]:[2,null];case 4:return r.sent(),[2]}}))}))},t.prototype.readIFD=function(e,t,i,n,a,s,o){return void 0===a&&(a=h.TIFF_TAGS),void 0===s&&(s=4),r.__awaiter(this,void 0,void 0,(function(){var u,l,d,c,p,y,m,I;return r.__generator(this,(function(r){switch(r.label){case 0:return e?(u=f.parseIFD(e,t,i,n,a,s)).success?(l=[],u.ifd.forEach((function(e){e.values||l.push(e)})),l.length>0?(d=l.map((function(e){return e.offlineOffsetSize})),c=Math.min.apply(null,d.map((function(e){return e[0]}))),Math.min.apply(null,d.map((function(e){return e[0]+e[1]})))-c<=this._bufferSize?[4,this.request({url:this.url,range:{from:c,to:c+this._bufferSize},responseType:\"array-buffer\"},o)]:[3,2]):[3,2]):[3,5]:[2,null];case 1:e=r.sent(),n=c,l.forEach((function(r){return f.parseFieldValues(e,t,r,n)})),r.label=2;case 2:return u.ifd.has(\"GEOKEYDIRECTORY\")?(p=u.ifd.get(\"GEOKEYDIRECTORY\"),(y=p.values)&&y.length>4?(m=y[0]+\".\"+y[1]+\".\"+y[2],[4,this.readIFD(e,t,p.valueOffset+6-n,n,h.GEO_KEYS,2,o)]):[3,4]):[3,4];case 3:I=r.sent(),p.data=I.ifd,p.data&&p.data.set(\"GEOTIFFVersion\",{id:0,type:2,valueCount:1,valueOffset:null,values:[m]}),r.label=4;case 4:return[2,u];case 5:return u.requiredBufferSize&&u.requiredBufferSize!==e.byteLength?[4,this.request({url:this.url,range:{from:n,to:n+u.requiredBufferSize+4},responseType:\"array-buffer\"},o)]:[3,7];case 6:return(e=r.sent()).byteLength<u.requiredBufferSize?[2,null]:[2,this.readIFD(e,t,0,n,h.TIFF_TAGS,4,o)];case 7:return[2]}}))}))},t.prototype.getTileLocation=function(e,t,r){var i=this.rasterInfo.storageInfo,n=i.firstPyramidLevel,a=i.blockBoundary,s=0===e?0:e-(n-1),o=this._headerInfo.ifds[s];if(!o)return null;var u=d(o,\"TILEOFFSETS\");if(void 0===u)return null;var l=d(o,\"TILEBYTECOUNTS\"),f=a[s],h=f.minRow,p=f.minCol,y=f.maxRow,m=f.maxCol;if(t>y||r>m||t<h||r<p)return null;var I=c(o,\"IMAGEWIDTH\"),_=c(o,\"IMAGELENGTH\"),g=c(o,\"TILEWIDTH\"),v=c(o,\"TILELENGTH\"),T=t*(m+1)+r,b=u[T],w=l[T];return null==b||null==w?null:{range:{from:b,to:b+w-1},ifd:o,actualTileWidth:r===m?I%g:g,actualTileHeight:t===y?_%v:v}},r.__decorate([s.property()],t.prototype,\"_files\",void 0),r.__decorate([s.property()],t.prototype,\"_headerInfo\",void 0),r.__decorate([s.property()],t.prototype,\"_bufferSize\",void 0),r.__decorate([s.property({type:String,json:{write:!0}})],t.prototype,\"datasetFormat\",void 0),t=r.__decorate([s.subclass(\"esri.layers.support.rasterDatasets.TIFFRaster\")],t)}(l)}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/rasterDatasets/TIFFRaster.js?')},\"./node_modules/arcgis-js-api/layers/support/rasterDatasets/xmlUtilities.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT Â© 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,n){function t(e,n){if(!e||!n)return[];var t,i=n;if(n.indexOf(\"/\")>-1?(i=n.slice(0,n.indexOf(\"/\")),n=n.slice(n.indexOf(\"/\")+1)):n=\"\",!(t=n?r(e,i).getElementsByTagNameNS(\"*\",n):e.getElementsByTagNameNS(\"*\",i))||0===t.length)return[];for(var l=[],u=0;u<t.length;u++)l.push(t[u]||t.item[u]);return l}function r(e,n){if(!e||!n)return null;var i=n;n.indexOf(\"/\")>-1?(i=n.slice(0,n.indexOf(\"/\")),n=n.slice(n.indexOf(\"/\")+1)):n=\"\";var l=t(e,i);return l.length>0?n?r(l[0],n):l[0]:null}Object.defineProperty(n,\"__esModule\",{value:!0}),n.getElements=t,n.getElement=r,n.getElementValue=function(e,n){var t,i=r(e,n);return i&&(t=i.textContent||i.nodeValue||i.innerText)?t.trim():null},n.getElementValues=function(e,n){for(var r,i=t(e,n),l=[],u=0;u<i.length;u++)(r=i[u].textContent||i[u].nodeValue||i[u].innerText)&&\"\"!==(r=r.trim())&&l.push(r);return l}}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/rasterDatasets/xmlUtilities.js?')},\"./node_modules/arcgis-js-api/layers/support/serviceTileInfoProperty.js\":function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT Â© 2020 Esri\\n//\\n// All rights reserved under the copyright laws of the United States\\n// and applicable international laws, treaties, and conventions.\\n//\\n// This material is licensed for use under the Esri Master License\\n// Agreement (MLA), and is bound by the terms of that agreement.\\n// You may redistribute and use this code without modification,\\n// provided you adhere to the terms of the MLA and include this\\n// copyright notice.\\n//\\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\\n//\\n// For additional information, contact:\\n// Environmental Systems Research Institute, Inc.\\n// Attn: Contracts and Legal Services Department\\n// 380 New York Street\\n// Redlands, California, USA 92373\\n// USA\\n//\\n// email: contracts@esri.com\\n//\\n// See http://js.arcgis.com/4.16/esri/copyright.txt for details.\\n\\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.js\"),__webpack_require__(/*! ./TileInfo */ \"./node_modules/arcgis-js-api/layers/support/TileInfo.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,r,n,i){function l(e,r,l,o){if(!e)return null;var a=r.minScale,t=r.maxScale,s=r.minLOD,u=r.maxLOD;if(null!=s&&null!=u)return o&&o.ignoreMinMaxLOD?i.fromJSON(e):i.fromJSON(n.__assign(n.__assign({},e),{lods:e.lods.filter((function(e){var r=e.level;return null!=r&&r>=s&&r<=u}))}));if(0!==a&&0!==t){var f=function(e){return Math.round(1e4*e)/1e4},c=a?f(a):1/0,m=t?f(t):-1/0;return i.fromJSON(n.__assign(n.__assign({},e),{lods:e.lods.filter((function(e){var r=f(e.scale);return r<=c&&r>=m}))}))}return i.fromJSON(e)}Object.defineProperty(r,\"__esModule\",{value:!0}),r.serviceTileInfoProperty={type:i,json:{origins:{service:{read:{source:[\"tileInfo\",\"minScale\",\"maxScale\",\"minLOD\",\"maxLOD\"],reader:l}}}}},r.readServiceTileInfo=l}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n\\n//# sourceURL=webpack:///./node_modules/arcgis-js-api/layers/support/serviceTileInfoProperty.js?')}}]);","extractedComments":[]}