// COPYRIGHT Â© 2020 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.16/esri/copyright.txt for details.

define(["require","exports","../../intl","../../views/3d/lib/SunCalc"],(function(e,n,a,t){function m(e,n){var a=new Date(n);return a.setUTCFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),a}function i(e,n){var a=new Date(e.getTime());return a.setUTCHours(a.getUTCHours()+n),a}var o;Object.defineProperty(n,"__esModule",{value:!0}),n.makeTime=m,n.dateAddHours=i,function(e){e[e.NORTHERN=0]="NORTHERN",e[e.SOUTHERN=1]="SOUTHERN"}(o=n.Hemisphere||(n.Hemisphere={}));var T={spring:{dayOfMonth:20,month:2},summer:{dayOfMonth:21,month:5},fall:{dayOfMonth:23,month:8},winter:{dayOfMonth:21,month:11}};function b(e,n,a){var t=new Date(e.getTime()),m=l(n,a),i=T[m],o=i.dayOfMonth,b=i.month;return t.setMonth(b),t.setDate(o),t}function l(e,n){return n===o.NORTHERN?e:r(e)}function r(e){var a=n.ORDERED_SEASONS.indexOf(e);return n.ORDERED_SEASONS[(a+2)%4]}n.ORDERED_SEASONS=["spring","summer","fall","winter"],n.getSeasonDate=b,n.getSeasonFromDate=function(e,n){return l(function(e){var n=e.getTime(),a=b(e,"spring",o.NORTHERN).getTime(),t=b(e,"summer",o.NORTHERN).getTime(),m=b(e,"fall",o.NORTHERN).getTime(),i=b(e,"winter",o.NORTHERN).getTime();return n>=a&&n<t?"spring":n>=t&&n<m?"summer":n>=m&&n<i?"fall":"winter"}(e),n)},n.getNorthernHemisphereSeason=l,n.flipSeasonHemisphere=r,n.sliderPosToDateTime=function(e,n){return m(e,60*n*1e3)},n.localDateToDateTime=function(e,n){var a=new Date(e.getTime());return a.setUTCFullYear(n.getFullYear(),n.getMonth(),n.getDate()),a},n.dateTimeToSliderPos=function(e){return 60*e.getUTCHours()+e.getUTCMinutes()+e.getUTCSeconds()/60+e.getUTCMilliseconds()/6e4},n.dateTimeToLocalDate=function(e){var n=new Date(0);return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n},n.getGMTOffsets=function(e){var n=[{name:"UTC-12",abbr:-12,label:["UTC-12",e.timezoneDateline]},{name:"UTC-11",abbr:-11,label:["UTC-11",e.timezoneSamoa]},{name:e.timezoneHAST,abbr:-10,label:["UTC-10 ("+e.timezoneHAST+")",e.timezoneHawaii]},{name:e.timezoneAKST,abbr:-9,label:["UTC-9 ("+e.timezoneAKST+")",e.timezoneAlaska]},{name:e.timezonePST,abbr:-8,label:["UTC-8 ("+e.timezonePST+")",e.timezoneBaja]},{name:e.timezoneMST,abbr:-7,label:["UTC-7 ("+e.timezoneMST+")",e.timezoneMountain]},{name:e.timezoneMST,abbr:-7,label:["UTC-7 ("+e.timezoneMST+")",e.timezoneLaPaz]},{name:e.timezoneMST,abbr:-7,label:["UTC-7 ("+e.timezoneMST+")",e.timezoneArizona]},{name:e.timezoneCST,abbr:-6,label:["UTC-6 ("+e.timezoneCST+")",e.timezoneSaskatchewan]},{name:e.timezoneCST,abbr:-6,label:["UTC-6 ("+e.timezoneCST+")",e.timezoneCentralAmerica]},{name:e.timezoneCST,abbr:-6,label:["UTC-6 ("+e.timezoneCST+")",e.timezoneCentralTime]},{name:e.timezoneCST,abbr:-6,label:["UTC-6 ("+e.timezoneCST+")",e.timezoneMexico]},{name:e.timezoneEST,abbr:-5,label:["UTC-5 ("+e.timezoneEST+")",e.timezoneEasternUS]},{name:e.timezoneEST,abbr:-5,label:["UTC-5 ("+e.timezoneEST+")",e.timezoneLima]},{name:e.timezoneEST,abbr:-5,label:["UTC-5 ("+e.timezoneEST+")",e.timezoneIndiana]},{name:"UTC-4",abbr:-4,label:["UTC-4",e.timezoneAtlantic]},{name:"UTC-4",abbr:-4,label:["UTC-4",e.timezoneCuiaba]},{name:"UTC-4",abbr:-4,label:["UTC-4",e.timezoneSantiago]},{name:"UTC-4",abbr:-4,label:["UTC-4",e.timezoneManaus]},{name:"UTC-4",abbr:-4,label:["UTC-4",e.timezoneAsuncion]},{name:"UTC-3",abbr:-3,label:["UTC-3",e.timezoneBrasilia]},{name:"UTC-3",abbr:-3,label:["UTC-3",e.timezoneGreenland]},{name:"UTC-3",abbr:-3,label:["UTC-3",e.timezoneMontevideo]},{name:"UTC-3",abbr:-3,label:["UTC-3",e.timezoneCayenne]},{name:"UTC-3",abbr:-3,label:["UTC-3",e.timezoneBuenosAires]},{name:"UTC-2",abbr:-2,label:["UTC-2",e.timezoneMidAtlantic]},{name:"UTC-1",abbr:-1,label:["UTC-1",e.timezoneAzores]},{name:"UTC-1",abbr:-1,label:["UTC-1",e.timezoneCaboVerde]},{name:"GMT",abbr:0,label:["UTC (GMT)",e.timezoneDublin]},{name:"GMT",abbr:0,label:["UTC (GMT)",e.timezoneReykjavik]},{name:"GMT",abbr:0,label:["UTC (GMT)",e.timezoneCasablanca]},{name:e.timezoneCET,abbr:1,label:["UTC+1 ("+e.timezoneCET+")",e.timezoneBelgrade]},{name:e.timezoneCET,abbr:1,label:["UTC+1 ("+e.timezoneCET+")",e.timezoneSarajevo]},{name:e.timezoneCET,abbr:1,label:["UTC+1 ("+e.timezoneCET+")",e.timezoneBrussels]},{name:e.timezoneCET,abbr:1,label:["UTC+1 ("+e.timezoneCET+")",e.timezoneWCAfrica]},{name:e.timezoneCET,abbr:1,label:["UTC+1 ("+e.timezoneCET+")",e.timezoneAmsterdam]},{name:e.timezoneCET,abbr:1,label:["UTC+1 ("+e.timezoneCET+")",e.timezoneWindhoek]},{name:e.timezoneEET,abbr:2,label:["UTC+2 ("+e.timezoneEET+")",e.timezoneMinsk]},{name:e.timezoneEET,abbr:2,label:["UTC+2 ("+e.timezoneEET+")",e.timezoneCairo]},{name:e.timezoneEET,abbr:2,label:["UTC+2 ("+e.timezoneEET+")",e.timezoneHelsinki]},{name:e.timezoneEET,abbr:2,label:["UTC+2 ("+e.timezoneEET+")",e.timezoneAthens]},{name:e.timezoneEET,abbr:2,label:["UTC+2 ("+e.timezoneEET+")",e.timezoneJerusalem]},{name:e.timezoneEET,abbr:2,label:["UTC+2 ("+e.timezoneEET+")",e.timezoneAmman]},{name:e.timezoneEET,abbr:2,label:["UTC+2 ("+e.timezoneEET+")",e.timezoneBeirut]},{name:e.timezoneEET,abbr:2,label:["UTC+2 ("+e.timezoneEET+")",e.timezoneHarare]},{name:e.timezoneEET,abbr:2,label:["UTC+2 ("+e.timezoneEET+")",e.timezoneDamascus]},{name:e.timezoneEET,abbr:2,label:["UTC+2 ("+e.timezoneEET+")",e.timezoneIstanbul]},{name:e.timezoneMSK,abbr:3,label:["UTC+3 ("+e.timezoneMSK+")",e.timezoneKuwait]},{name:e.timezoneMSK,abbr:3,label:["UTC+3 ("+e.timezoneMSK+")",e.timezoneBaghdad]},{name:e.timezoneMSK,abbr:3,label:["UTC+3 ("+e.timezoneMSK+")",e.timezoneNairobi]},{name:e.timezoneMSK,abbr:3,label:["UTC+3 ("+e.timezoneMSK+")",e.timezoneKaliningrad]},{name:e.timezoneGST,abbr:4,label:["UTC+4 ("+e.timezoneGST+")",e.timezoneMoscow]},{name:e.timezoneGST,abbr:4,label:["UTC+4 ("+e.timezoneGST+")",e.timezoneMuscat]},{name:e.timezoneGST,abbr:4,label:["UTC+4 ("+e.timezoneGST+")",e.timezoneBaku]},{name:e.timezoneGST,abbr:4,label:["UTC+4 ("+e.timezoneGST+")",e.timezoneYerevan]},{name:e.timezoneGST,abbr:4,label:["UTC+4 ("+e.timezoneGST+")",e.timezoneTbilisi]},{name:e.timezoneGST,abbr:4,label:["UTC+4 ("+e.timezoneGST+")",e.timezonePortLouis]},{name:"UTC+5",abbr:5,label:["UTC+5",e.timezoneTashkent]},{name:"UTC+5",abbr:5,label:["UTC+5",e.timezoneIslamabad]},{name:"UTC+6",abbr:6,label:["UTC+6",e.timezoneEkaterinburg]},{name:"UTC+6",abbr:6,label:["UTC+6",e.timezoneAstana]},{name:"UTC+6",abbr:6,label:["UTC+6",e.timezoneDhaka]},{name:e.timezoneICT,abbr:7,label:["UTC+7 ("+e.timezoneICT+")",e.timezoneNovosibirsk]},{name:e.timezoneICT,abbr:7,label:["UTC+7 ("+e.timezoneICT+")",e.timezoneBangkok]},{name:e.timezoneCCT,abbr:8,label:["UTC+8 ("+e.timezoneCCT+")",e.timezoneKrasnoyarsk]},{name:e.timezoneCCT,abbr:8,label:["UTC+8 ("+e.timezoneCCT+")",e.timezoneBeijing]},{name:e.timezoneCCT,abbr:8,label:["UTC+8 ("+e.timezoneCCT+")",e.timezoneSingapore]},{name:e.timezoneCCT,abbr:8,label:["UTC+8 ("+e.timezoneCCT+")",e.timezoneTaipei]},{name:e.timezoneCCT,abbr:8,label:["UTC+8 ("+e.timezoneCCT+")",e.timezonePerth]},{name:e.timezoneCCT,abbr:8,label:["UTC+8 ("+e.timezoneCCT+")",e.timezoneUlaanbaatar]},{name:e.timezoneJST,abbr:9,label:["UTC+9 ("+e.timezoneJST+")",e.timezoneIrkutsk]},{name:e.timezoneJST,abbr:9,label:["UTC+9 ("+e.timezoneJST+")",e.timezoneSeoul]},{name:e.timezoneJST,abbr:9,label:["UTC+9 ("+e.timezoneJST+")",e.timezoneOsaka]},{name:e.timezoneAEST,abbr:10,label:["UTC+10 ("+e.timezoneAEST+")",e.timezoneYakutsk]},{name:e.timezoneAEST,abbr:10,label:["UTC+10 ("+e.timezoneAEST+")",e.timezoneCanberra]},{name:e.timezoneAEST,abbr:10,label:["UTC+10 ("+e.timezoneAEST+")",e.timezoneBrisbane]},{name:e.timezoneAEST,abbr:10,label:["UTC+10 ("+e.timezoneAEST+")",e.timezoneHobart]},{name:e.timezoneAEST,abbr:10,label:["UTC+10 ("+e.timezoneAEST+")",e.timezoneGuam]},{name:"UTC+11",abbr:11,label:["UTC+11",e.timezoneVladivostok]},{name:"UTC+11",abbr:11,label:["UTC+11",e.timezoneSolomon]},{name:e.timezoneNZST,abbr:12,label:["UTC+12 ("+e.timezoneNZST+")",e.timezoneMagadan]},{name:e.timezoneNZST,abbr:12,label:["UTC+12 ("+e.timezoneNZST+")",e.timezoneFiji]},{name:e.timezoneNZST,abbr:12,label:["UTC+12 ("+e.timezoneNZST+")",e.timezoneAuckland]},{name:e.timezoneNZST,abbr:12,label:["UTC+12 ("+e.timezoneNZST+")",e.timezoneNukualofa]}];return n.sort((function(e,n){return e.abbr<n.abbr?-1:e.abbr>n.abbr?1:0})),n},n.calculatePlaySpeed=function(e,n,a){if(isNaN(e.getTime())&&isNaN(n.getTime()))return 3e5;var t=a.getTime(),m=e.getTime(),i=n.getTime(),o=m-36e5,T=m+36e5,b=i-48e5,l=i+24e5,r=3e5;return t>=o&&t<=T?r=t-o<=12e5?18e5-(t-o)/12e5*16e5:T-t<=6e5?3e5-(T-t)/12e5*2*1e5:2e5:t>=b&&t<=l?r=t-b<=6e5?3e5-(t-b)/12e5*2*1e5:l-t<=12e5?18e5-(l-t)/12e5*16e5:2e5:(t<m||t>i)&&(r=18e5),r},n.getSunriseAndSunsetTimes=function(e,n,a,m){var o=t.getTimes(e,n,a),T=o.sunrise,b=o.sunset,l=i(e,m),r=i(T,m),z=i(b,m);if(l.getUTCDate()!==r.getUTCDate()||l.getUTCDate()!==z.getUTCDate()){var C=l.getTime()-r.getTime()>0?1:-1;T.setUTCDate(T.getUTCDate()+C),b.setUTCDate(b.getUTCDate()+C)}return{sunrise:T,sunset:b}},n.formatSliderLabel=function(e,n){var t=new Date(36e5*Math.round(e/60));"tick"!==n&&(t=new Date(6e4*e));var m=a.formatDate(t,{hour:"2-digit",minute:"2-digit",timeZone:"UTC"});return"tick"===n&&-1!==m.indexOf(" ")&&(m=(m=a.formatDate(t,{hour:"numeric",timeZone:"UTC"})).replace(":00","")),m}}));