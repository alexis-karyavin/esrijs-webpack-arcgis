// COPYRIGHT Â© 2020 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.16/esri/copyright.txt for details.

define(["require","exports","tslib","@dojo/framework/shim/array","../intl","../../esri/core/promiseUtils","../core/events","../core/Handles","../core/string","../core/watchUtils","../core/accessorSupport/decorators","./Widget","./Search/SearchResultRenderer","./Search/SearchViewModel","./support/widget"],(function(e,t,r,s,o,n,i,a,l,u,c,d,h,p,_){var g="esri-search esri-widget",v="esri-widget__loader",f="esri-widget__loader-text",y="esri-widget__loader-animation",m="esri-input",w="esri-search--multiple-sources",S="esri-search--loading",b="esri-search--searching",M="esri-search--show-suggestions",x="esri-search--sources",C="esri-search--warning",k="esri-search__container",T="esri-search__input",N="esri-search__input-container",E="esri-search__form",B="esri-search__submit-button",L="esri-search__sources-button",R="esri-search__clear-button",O="esri-search__source-name",I="esri-search__suggestions-menu",A="esri-search__suggestions-list",K="esri-search__suggestions-list--current-location",D="esri-search__sources-menu",H="esri-search__source",P="esri-search__warning-menu",U="esri-search__warning-body",F="esri-search__warning-header",W="esri-search__warning-text",G="esri-search__no-value-text",$="esri-widget--disabled",j="esri-widget--button",V="esri-icon-font-fallback-text",X="esri-icon-locate-circled",q="esri-menu",z="esri-menu__list",J="esri-menu__list-item",Q="esri-menu__list-item--active",Y="esri-menu__header",Z="esri-icon-search",ee="esri-icon-down-arrow esri-search__sources-button--down",te="esri-icon-up-arrow esri-search__sources-button--up",re="esri-icon-close",se="esri-icon-notice-triangle",oe="esri-icon-search",ne="esri-disabled",ie=/<[a-z/][\s\S]*>/i;return function(e){function t(t,r){var s=e.call(this,t,r)||this;return s._handles=new a,s._inputNode=null,s._sourceMenuButtonNode=null,s._sourceListNode=null,s._suggestionListNode=null,s._searchResultRenderer=new h,s._relatedTarget=null,s._locateFailed=null,s.activeMenu="none",s.activeSource=null,s.activeSourceIndex=null,s.allPlaceholder=null,s.allSources=null,s.autoNavigate=null,s.autoSelect=null,s.defaultSources=null,s.disabled=!1,s.goToOverride=null,s.iconClass=oe,s.includeDefaultSources=null,s.label=void 0,s.locationEnabled=null,s.maxResults=null,s.maxSuggestions=null,s.messages=null,s.messagesCommon=null,s.minSuggestCharacters=null,s.popupEnabled=null,s.popupTemplate=null,s.portal=null,s.resultGraphic=null,s.resultGraphicEnabled=null,s.results=null,s.searchAllEnabled=null,s.searchTerm=null,s.selectedResult=null,s.sources=null,s.suggestions=null,s.suggestionsEnabled=null,s.view=null,s.viewModel=new p,s.own(u.watch(s,"searchTerm",(function(e){(e&&"warning"===s.activeMenu||!e&&!s.get("viewModel.selectedSuggestion.location"))&&(s.activeMenu="none")})),u.on(s,"viewModel.allSources","change",(function(){return s._watchSourceChanges()})),u.init(s,"viewModel.defaultPopupTemplate",(function(e){e&&(e.content=s._renderSearchResultsContent.bind(s))}))),s}return r.__extends(t,e),t.prototype.destroy=function(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)},Object.defineProperty(t.prototype,"displayedSearchTerm",{get:function(){return(""+this.viewModel.searchTerm).trim()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"suggestionsMenuId",{get:function(){return this.id+"-suggest-menu"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sourceMenuId",{get:function(){return this.id+"-source-menu"},enumerable:!0,configurable:!0}),t.prototype.clear=function(){},t.prototype.focus=function(){this._inputNode&&(this.activeMenu="suggestion",this._inputNode.focus(),this.emit("search-focus"))},t.prototype.blur=function(e){this._inputNode&&(this._inputNode.blur(),this._inputBlur(e),this.emit("search-blur"))},t.prototype.search=function(e){var t=this;this.activeMenu="none",this._cancelSuggest(),this._cancelSearch();var r=n.createAbortController(),s=r.signal;return this._searchController=r,this.viewModel.search(e,{signal:s}).catch((function(e){if(t._searchController===r)return t.activeMenu="none",t._searchController=null,e})).then((function(e){if(t._searchController===r)return t.activeMenu=e.numResults?"none":"warning",t._searchController=null,e}))},t.prototype.suggest=function(e){var t=this;this._cancelSuggest();var r=n.createAbortController(),s=r.signal;return this._suggestController=r,this.viewModel.suggest(e,null,{signal:s}).then((function(e){if(t._suggestController===r)return t._suggestController=null,e.numResults&&(t.activeMenu="suggestion"),t._scrollToTopSuggestion(),e})).catch((function(){if(t._suggestController===r)return t._suggestController=null,null}))},t.prototype.render=function(){var e,t=this.viewModel.state,r=((e={})[ne]="disabled"===t,e[$]=this.disabled,e);return _.tsx("div",{class:this.classes(g,r)},"loading"===t?this.renderLoader():this.renderContainer())},t.prototype.renderSubmitButton=function(){var e=this.messages;return _.tsx("div",{key:"esri-search__submit-button",bind:this,role:"button",title:e.searchButtonTitle,class:this.classes(B,j),tabindex:"0",onclick:this._handleSearchButtonClick,onkeydown:this._handleSearchButtonClick},_.tsx("span",{"aria-hidden":"true",role:"presentation",class:Z}),_.tsx("span",{class:V},e.searchButtonTitle))},t.prototype.renderWarningMenu=function(){return _.tsx("div",{key:"esri-search__error-menu",class:this.classes(q,P)},_.tsx("div",{class:U},this.renderWarning()))},t.prototype.renderSourceMenuButton=function(){var e=this.messages,t=this.activeMenu,r=this.sourceMenuId,s=this.viewModel,o=s.activeSourceIndex;return s.allSources.length>1?_.tsx("div",{key:"esri-search__source-menu-button",bind:this,role:"button",title:e.searchIn,"aria-haspopup":"true","aria-expanded":"source"===t,"aria-controls":r,class:this.classes(L,j),tabindex:"0",onkeydown:this._handleSourceMenuButtonKeydown,onclick:this._handleSourcesMenuToggleClick,onkeyup:this._handleSourceMenuButtonKeyup,onblur:this._sourcesButtonBlur,afterCreate:_.storeNode,"data-node-ref":"_sourceMenuButtonNode"},_.tsx("span",{"aria-hidden":"true",role:"presentation",class:ee}),_.tsx("span",{"aria-hidden":"true",role:"presentation",class:te}),_.tsx("span",{class:O},this._getSourceName(o))):null},t.prototype.renderSourcesList=function(){var e=this,t=this.viewModel,r=t.allSources,s=t.searchAllEnabled;return r.length>1?_.tsx("ul",{id:this.sourceMenuId,role:"menu",bind:this,afterCreate:_.storeNode,"data-node-ref":"_sourceListNode",class:z},s?this.renderSource(p.ALL_INDEX):null,r.map((function(t,r){return e.renderSource(r)})).toArray()):null},t.prototype.renderSourcesMenu=function(){return this.viewModel.allSources.length>1?_.tsx("div",{tabIndex:0,key:"esri-search__source-menu",class:this.classes(q,D)},this.renderSourcesList()):null},t.prototype.renderLoader=function(){var e=this.messages,t=this.messagesCommon;return _.tsx("div",{role:"presentation",class:v,key:"base-loader"},_.tsx("span",{"aria-hidden":"true",role:"presentation",class:y}),_.tsx("span",{class:V},e.searchButtonTitle),_.tsx("span",{class:f},t.loading))},t.prototype.renderContainer=function(){var e,t=this.viewModel,r=t.allSources,s=t.state,o=this.activeMenu,n=((e={})[w]=r.length>1,e[S]="loading"===s,e[b]="searching"===s,e[C]="warning"===o,e[x]="source"===o,e[M]="suggestion"===o,e);return _.tsx("div",{role:"presentation",class:this.classes(n,k),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())},t.prototype.renderClearButton=function(){return this.searchTerm?_.tsx("div",{key:"esri-search__clear-button",bind:this,role:"button",class:this.classes(R,j),tabindex:"0",title:this.messages.clearButtonTitle,onfocus:this._clearButtonFocus,onclick:this._handleClearButtonClick,onkeydown:this._handleClearButtonClick},_.tsx("span",{"aria-hidden":"true",class:re})):null},t.prototype.renderLocationGroup=function(){var e=this.messages,t=this.locationEnabled,r=this.displayedSearchTerm;return t&&!r?_.tsx("ul",{role:"presentation",key:"esri-search__suggestion-list-current-location",class:this.classes(z,A,K)},_.tsx("li",{bind:this,onclick:this._handleUseCurrentLocationClick,onkeydown:this._handleUseCurrentLocationClick,onkeyup:this._handleSuggestionKeyup,role:"menuitem",class:J,tabindex:"-1"},_.tsx("span",{"aria-hidden":"true",role:"presentation",class:X})," ",e.useCurrentLocation)):null},t.prototype.renderInput=function(){var e=this.locationEnabled,t=this.displayedSearchTerm,r=this.messages,s=this.suggestionsMenuId,o=this.viewModel,n=o.maxInputLength,i=o.placeholder,a=o.searchTerm,l=o.suggestionCount,u=e&&!t||l;return _.tsx("input",{bind:this,placeholder:i,"aria-label":r.searchButtonTitle,maxlength:n,autocomplete:"off",type:"text",tabindex:"0",class:this.classes(m,T),"aria-autocomplete":"list",value:a,"aria-haspopup":"true","aria-owns":u?s:null,role:"textbox",onkeydown:this._handleInputKeydown,onkeyup:this._handleInputKeyup,onclick:this._handleInputClick,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:_.storeNode,"data-node-ref":"_inputNode",onfocusout:this._storeRelatedTarget,onfocus:this.focus,onblur:this.blur,title:a?"":i})},t.prototype.renderForm=function(){return _.tsx("form",{key:"esri-search__form",bind:this,class:E,onsubmit:this._formSubmit,role:"search"},this.renderInput())},t.prototype.renderSuggestList=function(e){var t=this,r=e.sourceIndex,s=e.results.length,o=e.results;return s?_.tsx("ul",{role:"presentation",key:"esri-search__suggestion-list-"+r,class:this.classes(z,A)},o.map((function(e,r){return t.renderSuggestion(e,r)}))):null},t.prototype.renderSuggestionsGroup=function(){var e=this,t=this.viewModel.suggestions;return t?t.map((function(t){return[e.renderSuggestionHeader(t),e.renderSuggestList(t)]})):null},t.prototype.renderSuggestionsMenu=function(){var e=this.activeMenu,t=this.displayedSearchTerm,r=this.locationEnabled,s=this.suggestionsMenuId,o=this.viewModel.suggestionCount;return r&&!t||o?_.tsx("div",{id:s,"aria-expanded":"suggestion"===e,key:"esri-search__suggestions-menu",class:this.classes(q,I),role:"menu",bind:this,afterCreate:_.storeNode,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null},t.prototype.renderInputContainer=function(){return _.tsx("div",{key:"esri-search__input-container",class:N},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())},t.prototype.renderSuggestionHeader=function(e){var t=this.viewModel,r=t.allSources,s=t.activeSourceIndex,o=e.sourceIndex,n=e.results.length,i=r.length>1&&s===p.ALL_INDEX;return n&&i?_.tsx("div",{key:"esri-search__suggestion-header-"+o,class:Y},this._getSourceName(o)):null},t.prototype.renderSuggestion=function(e,t){var r=this.messages,s=this.viewModel.searchTerm;if(s){var o=e.text||r.untitledResult,n=ie.test(o),i=[];if(n)i.push(_.tsx("div",{innerHTML:o}));else{var a=this._splitResult(o,s),l=s.toLowerCase();a.forEach((function(e,t){e&&e.length&&(e.toLowerCase()===l?i.push(_.tsx("strong",{key:t},e)):i.push(e))}))}return _.tsx("li",{bind:this,onclick:this._handleSuggestionClick,onkeydown:this._handleSuggestionClick,onkeyup:this._handleSuggestionKeyup,key:"esri-search__suggestion$-{sourceIndex}_"+t,"data-suggestion":e,role:"menuitem",class:J,tabindex:"-1"},i)}},t.prototype.renderSource=function(e){var t,r=this.viewModel.activeSourceIndex,s=((t={})[Q]=e===r,t);return _.tsx("li",{bind:this,key:"esri-search__source-"+e,onclick:this._handleSourceClick,onkeydown:this._handleSourceClick,onkeyup:this._handleSourceKeyup,"data-source-index":e,role:"menuitem",class:this.classes(H,J,s),tabindex:"-1"},this._getSourceName(e))},t.prototype.renderNoResultsWarning=function(e){var t=this.messages,r=e?o.substitute(t.noResultsFoundForValue,{value:'"'+e+'"'}):t.noResultsFound;return _.tsx("div",{key:"esri-search__no_results"},_.tsx("div",{class:F},t.noResults),_.tsx("div",{class:W},r))},t.prototype.renderEmptySearchWarning=function(){var e=this.messages;return _.tsx("div",{key:"esri-search__empty-search"},_.tsx("span",{"aria-hidden":"true",class:se}),_.tsx("span",{class:G},e.emptyValue))},t.prototype.renderLocateWarning=function(){var e=this.messages;return _.tsx("div",{key:"esri-search__locate-error"},_.tsx("span",{"aria-hidden":"true",class:se}),_.tsx("span",{class:G},e.locateError))},t.prototype.renderWarning=function(){var e,t=this.displayedSearchTerm,r=this._locateFailed,s=this.viewModel;return r?this.renderLocateWarning():(null===(e=s.selectedSuggestion)||void 0===e?void 0:e.location)||t?this.renderNoResultsWarning(t):this.renderEmptySearchWarning()},t.prototype._watchSourceChanges=function(){var e=this,t=this._handles,r=this.viewModel.allSources;t.remove("sources"),r.forEach((function(r){return t.add(u.watch(r,"name",(function(){return e.scheduleRender()})),"sources")}))},t.prototype._handleSourceMenuButtonKeydown=function(e){var t=i.eventKey(e);if("ArrowUp"===t||"ArrowDown"===t||"End"===t||"Home"===t)return e.preventDefault(),e.stopPropagation(),void(this.activeMenu="source");this._handleSourcesMenuToggleClick(e)},t.prototype._handleSourcesMenuToggleClick=function(e){var t="source"===this.activeMenu;if(this.activeMenu=t?"none":"source",this.renderNow(),t)this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus();else{var r=this._sourceListNode?this._sourceListNode.getElementsByTagName("li"):null;if(r){var s="End"===i.eventKey(e)?r[r.length-1]:r[0];s&&s.focus()}}},t.prototype._handleClearButtonClick=function(){this.viewModel.clear(),this._focus()},t.prototype._handleSearchButtonClick=function(){this.search()},t.prototype._handleSuggestionClick=function(e){var t=e.currentTarget["data-suggestion"];t&&(this._focus(),this.search(t))},t.prototype._handleUseCurrentLocationClick=function(){var e=this;this._focus("none"),this._cancelSuggest(),this._cancelSearch();var t=n.createAbortController(),r=t.signal;this._searchController=t,this.viewModel.searchNearby({signal:r}).catch((function(){e._locateFailed=!0,e.activeMenu="warning"})).then((function(){e._searchController=null}))},t.prototype._handleSourceClick=function(e){var t=e.currentTarget["data-source-index"];this.viewModel.activeSourceIndex=t,this._focus("none")},t.prototype._sourcesButtonBlur=function(e){var t=e&&e.relatedTarget;this._removeActiveMenu(t,this._sourceListNode)},t.prototype._inputBlur=function(e){var t=e&&e.relatedTarget;this._removeActiveMenu(t||this._relatedTarget,this._suggestionListNode)},t.prototype._storeRelatedTarget=function(e){this._relatedTarget=e.relatedTarget},t.prototype._clearButtonFocus=function(){this.activeMenu="none"},t.prototype._removeActiveMenu=function(e,t){!e||e&&t&&t.contains(e)||(this.activeMenu="none")},t.prototype._cancelSuggest=function(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)},t.prototype._cancelSearch=function(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1},t.prototype._handleInputKeydown=function(e){var t=i.eventKey(e);("Tab"===t||"Escape"===t||e.shiftKey&&"Tab"===t)&&this._cancelSuggest()},t.prototype._handleInputKeyup=function(e){var t=i.eventKey(e),r=e.ctrlKey||e.metaKey||"Copy"===t||"ArrowLeft"===t||"ArrowRight"===t||"Enter"===t||"Shift"===t,s=this._suggestionListNode?this._suggestionListNode.getElementsByTagName("li"):null;if(!r){if("Tab"===t||"Escape"===t||e.shiftKey&&"Tab"===t)return this._cancelSuggest(),void("Escape"===t&&(this.activeMenu="none"));if("ArrowUp"!==t&&"ArrowDown"!==t||!s)this.viewModel.searchTerm&&this.suggest();else{this.activeMenu="suggestion",e.stopPropagation(),e.preventDefault(),this._cancelSuggest();var o=s["ArrowUp"===t?s.length-1:0];o&&o.focus()}}},t.prototype._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)},t.prototype._handleInputClick=function(){this.activeMenu="suggestion"},t.prototype._handleInputPaste=function(e){var t=e.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value),this.viewModel.searchTerm&&this.suggest()},t.prototype._handleSourceMenuButtonKeyup=function(e){var t=i.eventKey(e);if("ArrowUp"===t||"ArrowDown"===t||"Home"===t||"End"===t){e.stopPropagation(),e.preventDefault();var r=this._sourceListNode?this._sourceListNode.getElementsByTagName("li"):null;if(r){var s=r["ArrowUp"===t||"End"===t?r.length-1:0];s&&s.focus()}}},t.prototype._handleSourceKeyup=function(e){var t=e.target,r=this._sourceListNode?s.from(this._sourceListNode.getElementsByTagName("li")):null,o=i.eventKey(e);if("Escape"===o)return this._focus("none"),void(this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus());if(r){var n=r.indexOf(t);if("Home"!==o&&"End"!==o&&"ArrowUp"!==o&&"ArrowDown"!==o||(e.stopPropagation(),e.preventDefault()),"Home"===o){var a=r[0];return void(a&&a.focus())}if("End"===o){var l=r[r.length-1];return void(l&&l.focus())}if("ArrowUp"===o){var u=n-1,c=u<0?this._sourceMenuButtonNode:r[u];return void(c&&c.focus())}if("ArrowDown"===o){var d=n+1,h=d>=r.length?this._sourceMenuButtonNode:r[d];h&&h.focus()}}},t.prototype._handleSuggestionKeyup=function(e){var t=e.target,r=this._suggestionListNode?s.from(this._suggestionListNode.getElementsByTagName("li")):null,o=r.indexOf(t),n=i.eventKey(e);if(this._cancelSuggest(),"Backspace"!==n&&"Delete"!==n)if("Escape"!==n){if(r){if("Home"!==n&&"End"!==n&&"ArrowUp"!==n&&"ArrowDown"!==n||(e.stopPropagation(),e.preventDefault()),"Home"===n){var a=r[0];a&&a.focus()}if("End"===n){var l=r[r.length-1];l&&l.focus()}if("ArrowUp"===n){var u=o-1,c=u<0?r[r.length-1]:r[u];return void(c&&c.focus())}if("ArrowDown"===n){var d=o+1,h=d>=r.length?r[0]:r[d];return void(h&&h.focus())}}}else this._focus("none");else this._focus()},t.prototype._focus=function(e){this.focus(),e&&(this.activeMenu=e)},t.prototype._formSubmit=function(e){e.preventDefault(),this.search()},t.prototype._getSourceName=function(e){var t=this.messages,r=this.viewModel.allSources.getItemAt(e);return e===p.ALL_INDEX?t.all:r&&r.name||t.untitledSource},t.prototype._splitResult=function(e,t){var r=l.escapeRegExpString(t);return e.replace(new RegExp("(^|)("+r+")(|$)","ig"),"$1|$2|$3").split("|")},t.prototype._renderSearchResultsContent=function(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer},r.__decorate([c.property({dependsOn:["viewModel.searchTerm"]}),_.renderable()],t.prototype,"displayedSearchTerm",null),r.__decorate([c.property({readOnly:!0,dependsOn:["id"]}),_.renderable()],t.prototype,"suggestionsMenuId",null),r.__decorate([c.property({readOnly:!0,dependsOn:["id"]}),_.renderable()],t.prototype,"sourceMenuId",null),r.__decorate([c.property(),_.renderable()],t.prototype,"activeMenu",void 0),r.__decorate([c.aliasOf("viewModel.activeSource"),_.renderable()],t.prototype,"activeSource",void 0),r.__decorate([c.aliasOf("viewModel.activeSourceIndex"),_.renderable()],t.prototype,"activeSourceIndex",void 0),r.__decorate([c.aliasOf("viewModel.allPlaceholder"),_.renderable()],t.prototype,"allPlaceholder",void 0),r.__decorate([c.aliasOf("viewModel.allSources")],t.prototype,"allSources",void 0),r.__decorate([c.aliasOf("viewModel.autoNavigate")],t.prototype,"autoNavigate",void 0),r.__decorate([c.aliasOf("viewModel.autoSelect")],t.prototype,"autoSelect",void 0),r.__decorate([c.aliasOf("viewModel.defaultSources")],t.prototype,"defaultSources",void 0),r.__decorate([_.renderable(),c.property()],t.prototype,"disabled",void 0),r.__decorate([c.aliasOf("viewModel.goToOverride")],t.prototype,"goToOverride",void 0),r.__decorate([c.property()],t.prototype,"iconClass",void 0),r.__decorate([c.aliasOf("viewModel.includeDefaultSources")],t.prototype,"includeDefaultSources",void 0),r.__decorate([c.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],t.prototype,"label",void 0),r.__decorate([_.renderable(),c.aliasOf("viewModel.locationEnabled")],t.prototype,"locationEnabled",void 0),r.__decorate([c.aliasOf("viewModel.maxResults")],t.prototype,"maxResults",void 0),r.__decorate([c.aliasOf("viewModel.maxSuggestions")],t.prototype,"maxSuggestions",void 0),r.__decorate([c.property(),_.renderable(),_.messageBundle("esri/widgets/Search/t9n/Search")],t.prototype,"messages",void 0),r.__decorate([c.property(),_.renderable(),_.messageBundle("esri/t9n/common")],t.prototype,"messagesCommon",void 0),r.__decorate([c.aliasOf("viewModel.minSuggestCharacters")],t.prototype,"minSuggestCharacters",void 0),r.__decorate([c.aliasOf("viewModel.popupEnabled")],t.prototype,"popupEnabled",void 0),r.__decorate([c.aliasOf("viewModel.popupTemplate")],t.prototype,"popupTemplate",void 0),r.__decorate([c.aliasOf("viewModel.portal")],t.prototype,"portal",void 0),r.__decorate([c.aliasOf("viewModel.resultGraphic")],t.prototype,"resultGraphic",void 0),r.__decorate([c.aliasOf("viewModel.resultGraphicEnabled")],t.prototype,"resultGraphicEnabled",void 0),r.__decorate([c.aliasOf("viewModel.results"),_.renderable()],t.prototype,"results",void 0),r.__decorate([c.aliasOf("viewModel.searchAllEnabled"),_.renderable()],t.prototype,"searchAllEnabled",void 0),r.__decorate([c.aliasOf("viewModel.searchTerm"),_.renderable()],t.prototype,"searchTerm",void 0),r.__decorate([c.aliasOf("viewModel.selectedResult")],t.prototype,"selectedResult",void 0),r.__decorate([c.aliasOf("viewModel.sources")],t.prototype,"sources",void 0),r.__decorate([c.aliasOf("viewModel.suggestions"),_.renderable()],t.prototype,"suggestions",void 0),r.__decorate([c.aliasOf("viewModel.suggestionsEnabled")],t.prototype,"suggestionsEnabled",void 0),r.__decorate([c.aliasOf("viewModel.view"),_.renderable()],t.prototype,"view",void 0),r.__decorate([_.vmEvent(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),c.property({type:p}),_.renderable(["viewModel.allSources","viewModel.activeSource.placeholder","viewModel.activeSource.name","viewModel.state"])],t.prototype,"viewModel",void 0),r.__decorate([c.aliasOf("viewModel.clear")],t.prototype,"clear",null),r.__decorate([_.accessibleHandler()],t.prototype,"_handleSourcesMenuToggleClick",null),r.__decorate([_.accessibleHandler()],t.prototype,"_handleClearButtonClick",null),r.__decorate([_.accessibleHandler()],t.prototype,"_handleSearchButtonClick",null),r.__decorate([_.accessibleHandler()],t.prototype,"_handleSuggestionClick",null),r.__decorate([_.accessibleHandler()],t.prototype,"_handleUseCurrentLocationClick",null),r.__decorate([_.accessibleHandler()],t.prototype,"_handleSourceClick",null),t=r.__decorate([c.subclass("esri.widgets.Search")],t)}(d)}));